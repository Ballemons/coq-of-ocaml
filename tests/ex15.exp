Inductive 'set':
  ([ ], [ ('Empty', [ ]); ('Node', [ Type ('set'); Type ('Z'); Type ('set') ]) ])

Value (non_rec, 'empty', [ ], [ ], Some Type ('set')) =
  Constructor ((), 'Empty')

Value
  (rec, 'member_rec', [ ],
    [ ('counter', Type ('nat')); ('x', Type ('Z')); ('s', Type ('set')) ],
    Some Type ('bool')) =
  Match
    ((), Variable ((), 'counter'),
      [
        (Nat(0),
          Apply ((), Variable ((), 'not_terminated'), Variable ((), 'tt')));
        (Constructor ('S', 'counter'),
          Match
            ((), Variable ((), 's'),
              [
                (Constructor ('Empty'),
                  Constructor
                    ((),
                      'false'));
                (Constructor ('Node', 's1', 'y', 's2'),
                  IfThenElse
                    ((),
                      Apply
                        ((),
                          Apply
                            ((),
                              Variable
                                ((),
                                  'Z.ltb'),
                              Variable
                                ((),
                                  'x')),
                          Variable
                            ((),
                              'y')),
                      Apply
                        ((),
                          Apply
                            ((),
                              Apply
                                ((),
                                  Variable
                                    ((),
                                      'member_rec'),
                                  Variable
                                    ((),
                                      'counter')),
                              Variable
                                ((),
                                  'x')),
                          Variable
                            ((),
                              's1')),
                      IfThenElse
                        ((),
                          Apply
                            ((),
                              Apply
                                ((),
                                  Variable
                                    ((),
                                      'Z.ltb'),
                                  Variable
                                    ((),
                                      'y')),
                              Variable
                                ((),
                                  'x')),
                          Apply
                            ((),
                              Apply
                                ((),
                                  Apply
                                    ((),
                                      Variable
                                        ((),
                                          'member_rec'),
                                      Variable
                                        ((),
                                          'counter')),
                                  Variable
                                    ((),
                                      'x')),
                              Variable
                                ((),
                                  's2')),
                          Constructor
                            ((),
                              'true'))))
              ]))
      ])

Value
  (non_rec, 'member', [ ], [ ('x', Type ('Z')); ('s', Type ('set')) ],
    Some Type ('bool')) =
  Let () (non_rec, 'counter', [ ], [ ], None) =
    Apply ((), Variable ((), 'read_counter'), Variable ((), 'tt')) in
  Apply
    ((),
      Apply
        ((), Apply ((), Variable ((), 'member_rec'), Variable ((), 'counter')),
          Variable ((), 'x')), Variable ((), 's'))

Value
  (rec, 'insert_rec', [ ],
    [ ('counter', Type ('nat')); ('x', Type ('Z')); ('s', Type ('set')) ],
    Some Type ('set')) =
  Match
    ((), Variable ((), 'counter'),
      [
        (Nat(0),
          Apply ((), Variable ((), 'not_terminated'), Variable ((), 'tt')));
        (Constructor ('S', 'counter'),
          Match
            ((), Variable ((), 's'),
              [
                (Constructor ('Empty'),
                  Constructor
                    ((),
                      'Node',
                      Constructor
                        ((),
                          'Empty'),
                      Variable
                        ((),
                          'x'),
                      Constructor
                        ((),
                          'Empty')));
                (Constructor ('Node', 's1', 'y', 's2'),
                  IfThenElse
                    ((),
                      Apply
                        ((),
                          Apply
                            ((),
                              Variable
                                ((),
                                  'Z.ltb'),
                              Variable
                                ((),
                                  'x')),
                          Variable
                            ((),
                              'y')),
                      Constructor
                        ((),
                          'Node',
                          Apply
                            ((),
                              Apply
                                ((),
                                  Apply
                                    ((),
                                      Variable
                                        ((),
                                          'insert_rec'),
                                      Variable
                                        ((),
                                          'counter')),
                                  Variable
                                    ((),
                                      'x')),
                              Variable
                                ((),
                                  's1')),
                          Variable
                            ((),
                              'y'),
                          Variable
                            ((),
                              's2')),
                      IfThenElse
                        ((),
                          Apply
                            ((),
                              Apply
                                ((),
                                  Variable
                                    ((),
                                      'Z.ltb'),
                                  Variable
                                    ((),
                                      'y')),
                              Variable
                                ((),
                                  'x')),
                          Constructor
                            ((),
                              'Node',
                              Variable
                                ((),
                                  's1'),
                              Variable
                                ((),
                                  'y'),
                              Apply
                                ((),
                                  Apply
                                    ((),
                                      Apply
                                        ((),
                                          Variable
                                            ((),
                                              'insert_rec'),
                                          Variable
                                            ((),
                                              'counter')),
                                      Variable
                                        ((),
                                          'x')),
                                  Variable
                                    ((),
                                      's2'))),
                          Variable
                            ((),
                              's'))))
              ]))
      ])

Value
  (non_rec, 'insert', [ ], [ ('x', Type ('Z')); ('s', Type ('set')) ],
    Some Type ('set')) =
  Let () (non_rec, 'counter', [ ], [ ], None) =
    Apply ((), Variable ((), 'read_counter'), Variable ((), 'tt')) in
  Apply
    ((),
      Apply
        ((), Apply ((), Variable ((), 'insert_rec'), Variable ((), 'counter')),
          Variable ((), 'x')), Variable ((), 's'))
