3
(Value
  (rec, @coq_rec,
    [
      ((f_map, [ A; B ], [ (f, (A -> B)); (l, Type (list/0, A)) ],
        Some Type (list/0, B)),
        Match
          (4, Variable (4, l/0),
            [
              (Constructor ([]/0), Constructor (5, []/0));
              (Constructor (cons/0, x, l),
                Constructor
                  (6, cons/0,
                    Apply
                      (6,
                        Variable
                          (6,
                            f/0),
                        [
                          Variable
                            (6,
                              x/0)
                        ]),
                    Apply
                      (6,
                        Variable
                          (6,
                            f_map/0),
                        [
                          Variable
                            (6,
                              f/0);
                          Variable
                            (6,
                              l/0)
                        ])))
            ]))
    ]))

9
(Value
  (rec, @free_rec,
    [
      ((f_map2_rec, [ A; B ],
        [ (counter, Type (nat/0)); (f, (A -> B)); (l, Type (list/0, A)) ],
        Some Monad ([ NonTermination/0 ], Type (list/0, B))),
        Match
          (?, Variable (?, counter/0),
            [
              (Constructor (O/0),
                Apply
                  (?,
                    Variable
                      (?,
                        not_terminated/0),
                    [
                      Tuple
                        (?)
                    ]));
              (Constructor (S/0, counter),
                Match
                  (10,
                    Variable
                      (10,
                        l/0),
                    [
                      (Constructor
                        ([]/0),
                        Return
                          (?,
                            Constructor
                              (11,
                                []/0)));
                      (Constructor
                        (cons/0,
                          x,
                          l),
                        Bind
                          (?,
                            Apply
                              (12,
                                Apply
                                  (?,
                                    Variable
                                      (?,
                                        f_map2_rec/0),
                                    [
                                      Variable
                                        (?,
                                          counter/0)
                                    ]),
                                [
                                  Variable
                                    (12,
                                      f/0);
                                  Variable
                                    (12,
                                      l/0)
                                ]),
                            Some
                              x_1,
                            Return
                              (?,
                                Constructor
                                  (12,
                                    cons/0,
                                    Apply
                                      (12,
                                        Variable
                                          (12,
                                            f/0),
                                        [
                                          Variable
                                            (12,
                                              x/0)
                                        ]),
                                    Variable
                                      (?,
                                        x_1/0)))))
                    ]))
            ]))
    ]))

9
(Value
  (non_rec, @.,
    [
      ((f_map2, [ A; B ], [ (f, (A -> B)); (l, Type (list/0, A)) ],
        Some Monad ([ Counter/0; NonTermination/0 ], Type (list/0, B))),
        Bind
          (?,
            Lift
              (?, [ Counter/0 ], [ Counter/0; NonTermination/0 ],
                Apply (?, Variable (?, read_counter/0), [ Tuple (?) ])),
            Some x,
            Lift
              (?, [ NonTermination/0 ], [ Counter/0; NonTermination/0 ],
                Apply
                  (?, Variable (?, f_map2_rec/0),
                    [
                      Variable (?, x/0);
                      Variable (?, f/0);
                      Variable (?, l/0)
                    ]))))
    ]))

15
(Value
  (non_rec, @.,
    [
      ((n, [ ], [ ], Some Type (Z/0)),
        LetFun 16
          (rec, @coq_rec,
            [
              ((sum, [ ], [ (l, Type (list/0, Type (Z/0))) ],
                Some Type (Z/0)),
                Match
                  (17,
                    Variable
                      (17,
                        l/0),
                    [
                      (Constructor
                        ([]/0),
                        Constant
                          (18,
                            Int(0)));
                      (Constructor
                        (cons/0,
                          x,
                          l),
                        Apply
                          (19,
                            Variable
                              (19,
                                Z.add/0),
                            [
                              Variable
                                (19,
                                  x/0);
                              Apply
                                (19,
                                  Variable
                                    (19,
                                      sum/0),
                                  [
                                    Variable
                                      (19,
                                        l/0)
                                  ])
                            ]))
                    ]))
            ]) in
        Apply
          (21, Variable (21, sum/0),
            [
              Constructor
                (21, cons/0, Constant (21, Int(1)),
                  Constructor
                    (21,
                      cons/0,
                      Constant
                        (21,
                          Int(2)),
                      Constructor
                        (21,
                          cons/0,
                          Constant
                            (21,
                              Int(3)),
                          Constructor
                            (21,
                              []/0))))
            ]))
    ]))

23
(Value
  (non_rec, @.,
    [
      ((n2, [ A ], [ (x, A) ],
        Some Monad ([ Counter/0; NonTermination/0 ], Type (Z/0))),
        Match
          (?, Variable (?, x/0),
            [
              (Any,
                LetFun 24
                  (rec, @free_rec,
                    [
                      ((sum_rec,
                        [
                        ],
                        [
                          (counter,
                            Type
                              (nat/0));
                          (l,
                            Type
                              (list/0,
                                Type
                                  (Z/0)))
                        ],
                        Some
                          Monad
                            ([
                              NonTermination/0
                            ],
                              Type
                                (Z/0))),
                        Match
                          (?,
                            Variable
                              (?,
                                counter/0),
                            [
                              (Constructor
                                (O/0),
                                Apply
                                  (?,
                                    Variable
                                      (?,
                                        not_terminated/0),
                                    [
                                      Tuple
                                        (?)
                                    ]));
                              (Constructor
                                (S/0,
                                  counter),
                                Match
                                  (25,
                                    Variable
                                      (25,
                                        l/0),
                                    [
                                      (Constructor
                                        ([]/0),
                                        Return
                                          (?,
                                            Constant
                                              (26,
                                                Int(0))));
                                      (Constructor
                                        (cons/0,
                                          x,
                                          l),
                                        Bind
                                          (?,
                                            Apply
                                              (27,
                                                Apply
                                                  (?,
                                                    Variable
                                                      (?,
                                                        sum_rec/0),
                                                    [
                                                      Variable
                                                        (?,
                                                          counter/0)
                                                    ]),
                                                [
                                                  Variable
                                                    (27,
                                                      l/0)
                                                ]),
                                            Some
                                              x_1,
                                            Return
                                              (?,
                                                Apply
                                                  (27,
                                                    Variable
                                                      (27,
                                                        Z.add/0),
                                                    [
                                                      Variable
                                                        (27,
                                                          x/0);
                                                      Variable
                                                        (?,
                                                          x_1/0)
                                                    ]))))
                                    ]))
                            ]))
                    ])
                  in
                LetFun 24
                  (non_rec, @.,
                    [
                      ((sum,
                        [
                        ],
                        [
                          (l,
                            Type
                              (list/0,
                                Type
                                  (Z/0)))
                        ],
                        Some
                          Monad
                            ([
                              Counter/0;
                              NonTermination/0
                            ],
                              Type
                                (Z/0))),
                        Bind
                          (?,
                            Lift
                              (?,
                                [
                                  Counter/0
                                ],
                                [
                                  Counter/0;
                                  NonTermination/0
                                ],
                                Apply
                                  (?,
                                    Variable
                                      (?,
                                        read_counter/0),
                                    [
                                      Tuple
                                        (?)
                                    ])),
                            Some
                              x_1,
                            Lift
                              (?,
                                [
                                  NonTermination/0
                                ],
                                [
                                  Counter/0;
                                  NonTermination/0
                                ],
                                Apply
                                  (?,
                                    Variable
                                      (?,
                                        sum_rec/0),
                                    [
                                      Variable
                                        (?,
                                          x_1/0);
                                      Variable
                                        (?,
                                          l/0)
                                    ]))))
                    ])
                  in
                Apply
                  (29,
                    Variable
                      (29,
                        sum/0),
                    [
                      Constructor
                        (29,
                          cons/0,
                          Constant
                            (29,
                              Int(1)),
                          Constructor
                            (29,
                              cons/0,
                              Constant
                                (29,
                                  Int(2)),
                              Constructor
                                (29,
                                  cons/0,
                                  Constant
                                    (29,
                                      Int(3)),
                                  Constructor
                                    (29,
                                      []/0))))
                    ]))
            ]))
    ]))
