Inductive 't1':
  ([ ],
    [
      ('C1', [ Type ('Z') ]);
      ('C2', [ Type ('bool'); Type ('Z') ]);
      ('C3', [ ])
    ])

(.,
  Value (non_rec, 'n', [ ], [ ], Some Type ('t1')) =
    Constructor
      ((unknown, Effect ([ ], .)), 'C2',
        Constructor ((unknown, Effect ([ ], .)), 'false'),
        Constant ((unknown, Effect ([ ], .)), Int(3))))

(.,
  Value (non_rec, 'm', [ ], [ ], Some Type ('bool')) =
    Match
      ((unknown, Effect ([ ], .)), Variable ((unknown, Effect ([ ], .)), 'n'),
        [
          (Constructor ('C2', 'b', Any),
            Variable ((unknown, Effect ([ ], .)), 'b'));
          (Any, Constructor ((unknown, Effect ([ ], .)), 'true'))
        ]))

Inductive 't2':
  ([ 'a' ], [ ('D1', [ ]); ('D2', [ 'a'; Type ('t2', 'a') ]) ])

(. -> . -[ 'NonTermination' ]-> .,
  Value
    (rec, 'of_list_rec', [ 'A' ],
      [ ('counter', Type ('nat')); ('l', Type ('list', 'A')) ],
      Some Type ('t2', 'A')) =
    Match
      ((unknown, Effect ([ 'NonTermination' ], .)),
        Variable ((unknown, Effect ([ ], .)), 'counter'),
        [
          (Nat(0),
            Apply
              ((unknown, Effect ([ 'NonTermination' ], .)),
                Variable
                  ((unknown,
                    Effect
                      ([ ],
                        .
                          -[
                            'NonTermination'
                          ]-> .)),
                    'not_terminated'),
                Variable ((unknown, Effect ([ ], .)), 'tt')));
          (Constructor ('S', 'counter'),
            Match
              ((unknown, Effect ([ 'NonTermination' ], .)),
                Variable ((unknown, Effect ([ ], .)), 'l'),
                [
                  (Constructor ('[]'),
                    Constructor
                      ((unknown,
                        Effect
                          ([
                          ],
                            .)),
                        'D1'));
                  (Constructor ('cons', 'x', 'xs'),
                    Constructor
                      ((unknown,
                        Effect
                          ([
                            'NonTermination'
                          ],
                            .)),
                        'D2',
                        Variable
                          ((unknown,
                            Effect
                              ([
                              ],
                                .)),
                            'x'),
                        Apply
                          ((unknown,
                            Effect
                              ([
                                'NonTermination'
                              ],
                                .)),
                            Apply
                              ((unknown,
                                Effect
                                  ([
                                  ],
                                    .
                                      -[
                                        'NonTermination'
                                      ]->
                                      .)),
                                Variable
                                  ((unknown,
                                    Effect
                                      ([
                                      ],
                                        .
                                          ->
                                          .
                                            -[
                                              'NonTermination'
                                            ]->
                                            .)),
                                    'of_list_rec'),
                                Variable
                                  ((unknown,
                                    Effect
                                      ([
                                      ],
                                        .)),
                                    'counter')),
                            Variable
                              ((unknown,
                                Effect
                                  ([
                                  ],
                                    .)),
                                'xs'))))
                ]))
        ]))

(. -[ 'Counter'; 'NonTermination' ]-> .,
  Value
    (non_rec, 'of_list', [ 'A' ], [ ('l', Type ('list', 'A')) ],
      Some Type ('t2', 'A')) =
    Let (unknown, Effect ([ 'Counter'; 'NonTermination' ], .))
      (non_rec, 'counter', [ ], [ ], None) =
      Apply
        ((unknown, Effect ([ 'Counter' ], .)),
          Variable
            ((unknown, Effect ([ ], . -[ 'Counter' ]-> .)), 'read_counter'),
          Variable ((unknown, Effect ([ ], .)), 'tt')) in
    Apply
      ((unknown, Effect ([ 'NonTermination' ], .)),
        Apply
          ((unknown, Effect ([ ], . -[ 'NonTermination' ]-> .)),
            Variable
              ((unknown, Effect ([ ], . -> . -[ 'NonTermination' ]-> .)),
                'of_list_rec'), Variable ((unknown, Effect ([ ], .)), 'counter')),
        Variable ((unknown, Effect ([ ], .)), 'l')))

(. -> . -[ 'NonTermination' ]-> .,
  Value
    (rec, 'sum_rec', [ ],
      [ ('counter', Type ('nat')); ('l', Type ('t2', Type ('Z'))) ],
      Some Type ('Z')) =
    Match
      ((unknown, Effect ([ 'NonTermination' ], .)),
        Variable ((unknown, Effect ([ ], .)), 'counter'),
        [
          (Nat(0),
            Apply
              ((unknown, Effect ([ 'NonTermination' ], .)),
                Variable
                  ((unknown,
                    Effect
                      ([ ],
                        .
                          -[
                            'NonTermination'
                          ]-> .)),
                    'not_terminated'),
                Variable ((unknown, Effect ([ ], .)), 'tt')));
          (Constructor ('S', 'counter'),
            Match
              ((unknown, Effect ([ 'NonTermination' ], .)),
                Variable ((unknown, Effect ([ ], .)), 'l'),
                [
                  (Constructor ('D1'),
                    Constant
                      ((unknown,
                        Effect
                          ([
                          ],
                            .)),
                        Int(0)));
                  (Constructor ('D2', 'x', 'xs'),
                    Apply
                      ((unknown,
                        Effect
                          ([
                            'NonTermination'
                          ],
                            .)),
                        Apply
                          ((unknown,
                            Effect
                              ([
                              ],
                                .)),
                            Variable
                              ((unknown,
                                Effect
                                  ([
                                  ],
                                    .)),
                                'Z.add'),
                            Variable
                              ((unknown,
                                Effect
                                  ([
                                  ],
                                    .)),
                                'x')),
                        Apply
                          ((unknown,
                            Effect
                              ([
                                'NonTermination'
                              ],
                                .)),
                            Apply
                              ((unknown,
                                Effect
                                  ([
                                  ],
                                    .
                                      -[
                                        'NonTermination'
                                      ]->
                                      .)),
                                Variable
                                  ((unknown,
                                    Effect
                                      ([
                                      ],
                                        .
                                          ->
                                          .
                                            -[
                                              'NonTermination'
                                            ]->
                                            .)),
                                    'sum_rec'),
                                Variable
                                  ((unknown,
                                    Effect
                                      ([
                                      ],
                                        .)),
                                    'counter')),
                            Variable
                              ((unknown,
                                Effect
                                  ([
                                  ],
                                    .)),
                                'xs'))))
                ]))
        ]))

(. -[ 'Counter'; 'NonTermination' ]-> .,
  Value
    (non_rec, 'sum', [ ], [ ('l', Type ('t2', Type ('Z'))) ], Some Type ('Z')) =
    Let (unknown, Effect ([ 'Counter'; 'NonTermination' ], .))
      (non_rec, 'counter', [ ], [ ], None) =
      Apply
        ((unknown, Effect ([ 'Counter' ], .)),
          Variable
            ((unknown, Effect ([ ], . -[ 'Counter' ]-> .)), 'read_counter'),
          Variable ((unknown, Effect ([ ], .)), 'tt')) in
    Apply
      ((unknown, Effect ([ 'NonTermination' ], .)),
        Apply
          ((unknown, Effect ([ ], . -[ 'NonTermination' ]-> .)),
            Variable
              ((unknown, Effect ([ ], . -> . -[ 'NonTermination' ]-> .)),
                'sum_rec'), Variable ((unknown, Effect ([ ], .)), 'counter')),
        Variable ((unknown, Effect ([ ], .)), 'l')))

(.,
  Value (non_rec, 's', [ ], [ ], Some Type ('Z')) =
    Apply
      ((unknown, Effect ([ 'Counter'; 'NonTermination' ], .)),
        Variable
          ((unknown, Effect ([ ], . -[ 'Counter'; 'NonTermination' ]-> .)),
            'sum'),
        Apply
          ((unknown, Effect ([ 'Counter'; 'NonTermination' ], .)),
            Variable
              ((unknown, Effect ([ ], . -[ 'Counter'; 'NonTermination' ]-> .)),
                'of_list'),
            Constructor
              ((unknown, Effect ([ ], .)), 'cons',
                Constant ((unknown, Effect ([ ], .)), Int(5)),
                Constructor
                  ((unknown, Effect ([ ], .)), 'cons',
                    Constant ((unknown, Effect ([ ], .)), Int(7)),
                    Constructor
                      ((unknown, Effect ([ ], .)), 'cons',
                        Constant ((unknown, Effect ([ ], .)), Int(3)),
                        Constructor ((unknown, Effect ([ ], .)), '[]')))))))
