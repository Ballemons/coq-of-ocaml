<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Tezos.Contract_storage</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Tezos.Contract_storage</h1>

<div class="code">
</div>

<div class="doc">
Generated by coq-of-ocaml 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">OCaml.OCaml</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="var">Positivity</span> <span class="id" title="var">Checking</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="var">Guard</span> <span class="id" title="var">Checking</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Tezos.Environment.html#"><span class="id" title="library">Tezos.Environment</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Environment.Notations</span>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Contract_repr.html#"><span class="id" title="library">Tezos.Contract_repr</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Delegate_storage.html#"><span class="id" title="library">Tezos.Delegate_storage</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Gas_limit_repr.html#"><span class="id" title="library">Tezos.Gas_limit_repr</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Manager_repr.html#"><span class="id" title="library">Tezos.Manager_repr</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Michelson_v1_primitives.html#"><span class="id" title="library">Tezos.Michelson_v1_primitives</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Raw_context.html#"><span class="id" title="library">Tezos.Raw_context</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Roll_storage.html#"><span class="id" title="library">Tezos.Roll_storage</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Script_expr_hash.html#"><span class="id" title="library">Tezos.Script_expr_hash</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Script_repr.html#"><span class="id" title="library">Tezos.Script_repr</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Storage_mli.html#"><span class="id" title="library">Tezos.Storage_mli</span></a>. <span class="id" title="keyword">Module</span> <a name="Storage"><span class="id" title="module">Storage</span></a> := <a class="idref" href="Tezos.Storage_mli.html#"><span class="id" title="module">Storage_mli</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Storage_sigs.html#"><span class="id" title="library">Tezos.Storage_sigs</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Tez_repr.html#"><span class="id" title="library">Tezos.Tez_repr</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Top-level&nbsp;evaluations&nbsp;are&nbsp;ignored&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;top_level_evaluation&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="failwith"><span class="id" title="definition">failwith</span></a> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>} (<span class="id" title="var">msg</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Contract_storage.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="big_map_diff_item"><span class="id" title="module">big_map_diff_item</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="big_map_diff_item.Update"><span class="id" title="module">Update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="big_map_diff_item.Update.record"><span class="id" title="record">record</span></a> {<span class="id" title="var">big_map</span> <span class="id" title="var">diff_key</span> <span class="id" title="var">diff_key_hash</span> <span class="id" title="var">diff_value</span> : <span class="id" title="keyword">Set</span>} : <span class="id" title="keyword">Set</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="big_map_diff_item.Update.big_map"><span class="id" title="projection">big_map</span></a> : <a class="idref" href="Tezos.Contract_storage.html#big_map"><span class="id" title="variable">big_map</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="big_map_diff_item.Update.diff_key"><span class="id" title="projection">diff_key</span></a> : <a class="idref" href="Tezos.Contract_storage.html#diff_key"><span class="id" title="variable">diff_key</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="big_map_diff_item.Update.diff_key_hash"><span class="id" title="projection">diff_key_hash</span></a> : <a class="idref" href="Tezos.Contract_storage.html#diff_key_hash"><span class="id" title="variable">diff_key_hash</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="big_map_diff_item.Update.diff_value"><span class="id" title="projection">diff_value</span></a> : <a class="idref" href="Tezos.Contract_storage.html#diff_value"><span class="id" title="variable">diff_value</span></a> }.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item.Update.record"><span class="id" title="record">record</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item.Update"><span class="id" title="module">Update</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="big_map_diff_item.Update_skeleton"><span class="id" title="definition">Update_skeleton</span></a> := <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item.record"><span class="id" title="record">Update.record</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="big_map_diff_item.Alloc"><span class="id" title="module">Alloc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="big_map_diff_item.Alloc.record"><span class="id" title="record">record</span></a> {<span class="id" title="var">big_map</span> <span class="id" title="var">key_type</span> <span class="id" title="var">value_type</span> : <span class="id" title="keyword">Set</span>} : <span class="id" title="keyword">Set</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="big_map_diff_item.Alloc.big_map"><span class="id" title="projection">big_map</span></a> : <a class="idref" href="Tezos.Contract_storage.html#big_map"><span class="id" title="variable">big_map</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="big_map_diff_item.Alloc.key_type"><span class="id" title="projection">key_type</span></a> : <a class="idref" href="Tezos.Contract_storage.html#key_type"><span class="id" title="variable">key_type</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="big_map_diff_item.Alloc.value_type"><span class="id" title="projection">value_type</span></a> : <a class="idref" href="Tezos.Contract_storage.html#value_type"><span class="id" title="variable">value_type</span></a> }.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item.Alloc.record"><span class="id" title="record">record</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item.Alloc"><span class="id" title="module">Alloc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="big_map_diff_item.Alloc_skeleton"><span class="id" title="definition">Alloc_skeleton</span></a> := <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item.record"><span class="id" title="record">Alloc.record</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="module">big_map_diff_item</span></a>.<br/>

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;'big_map_diff_item.Update".<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;'big_map_diff_item.Alloc".<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a> : <span class="id" title="keyword">Set</span> :=<br/>
| <a name="Update"><span class="id" title="constructor">Update</span></a> : <a class="idref" href="Tezos.Contract_storage.html#6f258cef46a888a0fb56ed00b9cd84cc"><span class="id" title="notation">'</span></a><a class="idref" href="Tezos.Contract_storage.html#6f258cef46a888a0fb56ed00b9cd84cc"><span class="id" title="notation">big_map_diff_item.Update</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a><br/>
| <a name="Clear"><span class="id" title="constructor">Clear</span></a> : <a class="idref" href="Tezos.Environment.html#Z.t"><span class="id" title="axiom">Z.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a><br/>
| <a name="Copy"><span class="id" title="constructor">Copy</span></a> : <a class="idref" href="Tezos.Environment.html#Z.t"><span class="id" title="axiom">Z.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Z.t"><span class="id" title="axiom">Z.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a><br/>
| <a name="Alloc"><span class="id" title="constructor">Alloc</span></a> : <a class="idref" href="Tezos.Contract_storage.html#f06b950e7e1b4f1781404b41f4d37ea1"><span class="id" title="notation">'</span></a><a class="idref" href="Tezos.Contract_storage.html#f06b950e7e1b4f1781404b41f4d37ea1"><span class="id" title="notation">big_map_diff_item.Alloc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a><br/>
<br/>
<span class="id" title="keyword">where</span> <a name="6f258cef46a888a0fb56ed00b9cd84cc"><span class="id" title="notation">&quot;</span></a>'big_map_diff_item.Update" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="Tezos.Contract_storage.html#Update_skeleton"><span class="id" title="definition">big_map_diff_item.Update_skeleton</span></a> <a class="idref" href="Tezos.Environment.html#Z.t"><span class="id" title="axiom">Z.t</span></a> <a class="idref" href="Tezos.Script_repr.html#expr"><span class="id" title="definition">Script_repr.expr</span></a> <a class="idref" href="Tezos.Script_expr_hash.html#t"><span class="id" title="definition">Script_expr_hash.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tezos.Script_repr.html#expr"><span class="id" title="definition">Script_repr.expr</span></a>))<br/>
<span class="id" title="var">and</span> "'big_map_diff_item.Alloc" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="Tezos.Contract_storage.html#Alloc_skeleton"><span class="id" title="definition">big_map_diff_item.Alloc_skeleton</span></a> <a class="idref" href="Tezos.Environment.html#Z.t"><span class="id" title="axiom">Z.t</span></a> <a class="idref" href="Tezos.Script_repr.html#expr"><span class="id" title="definition">Script_repr.expr</span></a> <a class="idref" href="Tezos.Script_repr.html#expr"><span class="id" title="definition">Script_repr.expr</span></a>).<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="ConstructorRecordNotations_big_map_diff_item"><span class="id" title="module">ConstructorRecordNotations_big_map_diff_item</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="ConstructorRecordNotations_big_map_diff_item.big_map_diff_item"><span class="id" title="module">big_map_diff_item</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ConstructorRecordNotations_big_map_diff_item.big_map_diff_item.Update"><span class="id" title="definition">Update</span></a> := <a class="idref" href="Tezos.Contract_storage.html#6f258cef46a888a0fb56ed00b9cd84cc"><span class="id" title="notation">'</span></a><a class="idref" href="Tezos.Contract_storage.html#6f258cef46a888a0fb56ed00b9cd84cc"><span class="id" title="notation">big_map_diff_item.Update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="ConstructorRecordNotations_big_map_diff_item.big_map_diff_item.Alloc"><span class="id" title="definition">Alloc</span></a> := <a class="idref" href="Tezos.Contract_storage.html#f06b950e7e1b4f1781404b41f4d37ea1"><span class="id" title="notation">'</span></a><a class="idref" href="Tezos.Contract_storage.html#f06b950e7e1b4f1781404b41f4d37ea1"><span class="id" title="notation">big_map_diff_item.Alloc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Tezos.Contract_storage.html#ConstructorRecordNotations_big_map_diff_item.big_map_diff_item"><span class="id" title="module">big_map_diff_item</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tezos.Contract_storage.html#ConstructorRecordNotations_big_map_diff_item"><span class="id" title="module">ConstructorRecordNotations_big_map_diff_item</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ConstructorRecordNotations_big_map_diff_item</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="big_map_diff"><span class="id" title="definition">big_map_diff</span></a> : <span class="id" title="keyword">Set</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="big_map_diff_item_encoding"><span class="id" title="definition">big_map_diff_item_encoding</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Data_encoding.encoding"><span class="id" title="definition">Data_encoding.encoding</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Data_encoding.union"><span class="id" title="axiom">Data_encoding.union</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Data_encoding.__case_value"><span class="id" title="axiom">Data_encoding.__case_value</span></a> "update" <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="Tezos.Environment.html#Data_encoding.Tag"><span class="id" title="constructor">Data_encoding.Tag</span></a> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.obj5"><span class="id" title="axiom">Data_encoding.obj5</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "action"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.constant"><span class="id" title="axiom">Data_encoding.constant</span></a> "update"))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "big_map" <a class="idref" href="Tezos.Environment.html#Data_encoding.z"><span class="id" title="axiom">Data_encoding.z</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "key_hash" <a class="idref" href="Tezos.Script_expr_hash.html#encoding"><span class="id" title="definition">Script_expr_hash.encoding</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "key" <a class="idref" href="Tezos.Script_repr.html#expr_encoding"><span class="id" title="definition">Script_repr.expr_encoding</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.opt"><span class="id" title="axiom">Data_encoding.opt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "value" <a class="idref" href="Tezos.Script_repr.html#expr_encoding"><span class="id" title="definition">Script_repr.expr_encoding</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Update"><span class="id" title="constructor">Update</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.big_map</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.diff_key</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">diff_key</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.diff_key_hash</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">diff_key_hash</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.diff_value</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">diff_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">|}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">diff_key_hash</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">diff_key</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">diff_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">diff_key_hash</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">diff_key</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">diff_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Update"><span class="id" title="constructor">Update</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.big_map</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.diff_key</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">diff_key</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.diff_key_hash</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">diff_key_hash</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.diff_value</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">diff_value</span></a> |})<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Data_encoding.__case_value"><span class="id" title="axiom">Data_encoding.__case_value</span></a> "remove" <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="Tezos.Environment.html#Data_encoding.Tag"><span class="id" title="constructor">Data_encoding.Tag</span></a> 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.obj2"><span class="id" title="axiom">Data_encoding.obj2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "action"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.constant"><span class="id" title="axiom">Data_encoding.constant</span></a> "remove"))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "big_map" <a class="idref" href="Tezos.Environment.html#Data_encoding.z"><span class="id" title="axiom">Data_encoding.z</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Contract_storage.html#Clear"><span class="id" title="constructor">Clear</span></a> <span class="id" title="var">big_map</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Clear"><span class="id" title="constructor">Clear</span></a> <span class="id" title="var">big_map</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Data_encoding.__case_value"><span class="id" title="axiom">Data_encoding.__case_value</span></a> "copy" <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="Tezos.Environment.html#Data_encoding.Tag"><span class="id" title="constructor">Data_encoding.Tag</span></a> 2)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.obj3"><span class="id" title="axiom">Data_encoding.obj3</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "action"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.constant"><span class="id" title="axiom">Data_encoding.constant</span></a> "copy"))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "source_big_map" <a class="idref" href="Tezos.Environment.html#Data_encoding.z"><span class="id" title="axiom">Data_encoding.z</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "destination_big_map" <a class="idref" href="Tezos.Environment.html#Data_encoding.z"><span class="id" title="axiom">Data_encoding.z</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Contract_storage.html#Copy"><span class="id" title="constructor">Copy</span></a> <span class="id" title="var">src</span> <span class="id" title="var">dst</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">src</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">dst</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">src</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">dst</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Copy"><span class="id" title="constructor">Copy</span></a> <span class="id" title="var">src</span> <span class="id" title="var">dst</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Data_encoding.__case_value"><span class="id" title="axiom">Data_encoding.__case_value</span></a> "alloc" <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="Tezos.Environment.html#Data_encoding.Tag"><span class="id" title="constructor">Data_encoding.Tag</span></a> 3)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.obj4"><span class="id" title="axiom">Data_encoding.obj4</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "action"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.constant"><span class="id" title="axiom">Data_encoding.constant</span></a> "alloc"))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "big_map" <a class="idref" href="Tezos.Environment.html#Data_encoding.z"><span class="id" title="axiom">Data_encoding.z</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "key_type" <a class="idref" href="Tezos.Script_repr.html#expr_encoding"><span class="id" title="definition">Script_repr.expr_encoding</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.req"><span class="id" title="axiom">Data_encoding.req</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> "value_type"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_repr.html#expr_encoding"><span class="id" title="definition">Script_repr.expr_encoding</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Alloc"><span class="id" title="constructor">Alloc</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Alloc.big_map</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Alloc.key_type</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">key_type</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Alloc.value_type</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">value_type</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">|}</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">key_type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">value_type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">key_type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">value_type</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Alloc"><span class="id" title="constructor">Alloc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Alloc.big_map</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Alloc.key_type</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">key_type</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Alloc.value_type</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">value_type</span></a> |})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="big_map_diff_encoding"><span class="id" title="definition">big_map_diff_encoding</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Data_encoding.encoding"><span class="id" title="definition">Data_encoding.encoding</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a>) :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">let</span> <span class="id" title="var">arg</span> := <a class="idref" href="Tezos.Environment.html#Data_encoding.def"><span class="id" title="axiom">Data_encoding.def</span></a> "contract.big_map_diff" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">eta</span> ⇒ <a class="idref" href="Tezos.Contract_storage.html#arg"><span class="id" title="variable">arg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="Tezos.Contract_storage.html#eta"><span class="id" title="variable">eta</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.__list_value"><span class="id" title="axiom">Data_encoding.__list_value</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item_encoding"><span class="id" title="definition">big_map_diff_item_encoding</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="big_map_key_cost"><span class="id" title="definition">big_map_key_cost</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> := 65.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="big_map_cost"><span class="id" title="definition">big_map_cost</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> := 33.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="update_script_big_map"><span class="id" title="definition">update_script_big_map</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Total_bytes"><span class="id" title="axiom">Storage.Big_map.Total_bytes</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">function_parameter</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Total_bytes"><span class="id" title="axiom">Storage.Big_map.Total_bytes</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Environment.html#Z.t"><span class="id" title="axiom">Z.t</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">diff</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fold_left_s"><span class="id" title="axiom">Error_monad.fold_left_s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">total</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Contract_storage.html#Clear"><span class="id" title="constructor">Clear</span></a> <span class="id" title="var">id</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">size</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Total_bytes"><span class="id" title="axiom">Storage.Big_map.Total_bytes</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">id</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#remove_rec"><span class="id" title="axiom">Storage.Big_map.remove_rec</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">id</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Z"><span class="id" title="axiom">Compare.Z</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lt"><span class="id" title="projection">Compare.S.op_lt</span></a>) <span class="id" title="var">id</span> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">total</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Environment.html#Z.sub"><span class="id" title="axiom">Z.sub</span></a> (<a class="idref" href="Tezos.Environment.html#Z.sub"><span class="id" title="axiom">Z.sub</span></a> <span class="id" title="var">total</span> <a class="idref" href="Tezos.Contract_storage.html#size"><span class="id" title="variable">size</span></a>) (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_cost"><span class="id" title="definition">big_map_cost</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Contract_storage.html#Copy"><span class="id" title="constructor">Copy</span></a> <span class="id" title="var">from</span> <span class="id" title="var">to_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#copy"><span class="id" title="axiom">Storage.Big_map.copy</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">from</span> <span class="id" title="var">to_</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Z"><span class="id" title="axiom">Compare.Z</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lt"><span class="id" title="projection">Compare.S.op_lt</span></a>) <span class="id" title="var">to_</span> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">total</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">size</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Total_bytes"><span class="id" title="axiom">Storage.Big_map.Total_bytes</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">from</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Environment.html#Z.add"><span class="id" title="axiom">Z.add</span></a> (<a class="idref" href="Tezos.Environment.html#Z.add"><span class="id" title="axiom">Z.add</span></a> <span class="id" title="var">total</span> <a class="idref" href="Tezos.Contract_storage.html#size"><span class="id" title="variable">size</span></a>) (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_cost"><span class="id" title="definition">big_map_cost</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Alloc"><span class="id" title="constructor">Alloc</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Alloc.big_map</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Alloc.key_type</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">key_type</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Alloc.value_type</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">value_type</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">|}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Total_bytes"><span class="id" title="axiom">Storage.Big_map.Total_bytes</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">big_map</span> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key_type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Micheline.strip_locations"><span class="id" title="axiom">Micheline.strip_locations</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Script_repr.html#strip_annotations"><span class="id" title="definition">Script_repr.strip_annotations</span></a> (<a class="idref" href="Tezos.Environment.html#Micheline.root"><span class="id" title="axiom">Micheline.root</span></a> <span class="id" title="var">key_type</span>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">value_type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Micheline.strip_locations"><span class="id" title="axiom">Micheline.strip_locations</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Script_repr.html#strip_annotations"><span class="id" title="definition">Script_repr.strip_annotations</span></a> (<a class="idref" href="Tezos.Environment.html#Micheline.root"><span class="id" title="axiom">Micheline.root</span></a> <span class="id" title="var">value_type</span>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Key_type"><span class="id" title="axiom">Storage.Big_map.Key_type</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">big_map</span> <a class="idref" href="Tezos.Contract_storage.html#key_type"><span class="id" title="variable">key_type</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Value_type"><span class="id" title="axiom">Storage.Big_map.Value_type</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">big_map</span> <a class="idref" href="Tezos.Contract_storage.html#value_type"><span class="id" title="variable">value_type</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Z"><span class="id" title="axiom">Compare.Z</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lt"><span class="id" title="projection">Compare.S.op_lt</span></a>) <span class="id" title="var">big_map</span> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">total</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Environment.html#Z.add"><span class="id" title="axiom">Z.add</span></a> <span class="id" title="var">total</span> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_cost"><span class="id" title="definition">big_map_cost</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Update"><span class="id" title="constructor">Update</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.big_map</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.diff_key_hash</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">diff_key_hash</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.diff_value</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">|}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">freed</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">existed</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Contents"><span class="id" title="axiom">Storage.Big_map.Contents</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.remove"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.remove</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">diff_key_hash</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">freed</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Contract_storage.html#existed"><span class="id" title="variable">existed</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_plus"><span class="id" title="axiom">Pervasives.op_plus</span></a> <a class="idref" href="Tezos.Contract_storage.html#freed"><span class="id" title="variable">freed</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_key_cost"><span class="id" title="definition">big_map_key_cost</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#freed"><span class="id" title="variable">freed</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">size</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Total_bytes"><span class="id" title="axiom">Storage.Big_map.Total_bytes</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">big_map</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Total_bytes"><span class="id" title="axiom">Storage.Big_map.Total_bytes</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">big_map</span> (<a class="idref" href="Tezos.Environment.html#Z.sub"><span class="id" title="axiom">Z.sub</span></a> <a class="idref" href="Tezos.Contract_storage.html#size"><span class="id" title="variable">size</span></a> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Contract_storage.html#freed"><span class="id" title="variable">freed</span></a>)) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Z"><span class="id" title="axiom">Compare.Z</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lt"><span class="id" title="projection">Compare.S.op_lt</span></a>) <span class="id" title="var">big_map</span> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">total</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Environment.html#Z.sub"><span class="id" title="axiom">Z.sub</span></a> <span class="id" title="var">total</span> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Contract_storage.html#freed"><span class="id" title="variable">freed</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Update"><span class="id" title="constructor">Update</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.big_map</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.diff_key_hash</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">diff_key_hash</span></a><a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">big_map_diff_item.Update.diff_value</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#Build_record"><span class="id" title="constructor">|}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">size_diff</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">existed</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Contents"><span class="id" title="axiom">Storage.Big_map.Contents</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.init_set"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.init_set</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">diff_key_hash</span> <span class="id" title="var">v</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">size_diff</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Contract_storage.html#existed"><span class="id" title="variable">existed</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#size_diff"><span class="id" title="variable">size_diff</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_plus"><span class="id" title="axiom">Pervasives.op_plus</span></a> <a class="idref" href="Tezos.Contract_storage.html#size_diff"><span class="id" title="variable">size_diff</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_key_cost"><span class="id" title="definition">big_map_key_cost</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">size</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Total_bytes"><span class="id" title="axiom">Storage.Big_map.Total_bytes</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">big_map</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Total_bytes"><span class="id" title="axiom">Storage.Big_map.Total_bytes</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">big_map</span> (<a class="idref" href="Tezos.Environment.html#Z.add"><span class="id" title="axiom">Z.add</span></a> <a class="idref" href="Tezos.Contract_storage.html#size"><span class="id" title="variable">size</span></a> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Contract_storage.html#size_diff"><span class="id" title="variable">size_diff</span></a>)) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Z"><span class="id" title="axiom">Compare.Z</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lt"><span class="id" title="projection">Compare.S.op_lt</span></a>) <span class="id" title="var">big_map</span> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">total</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Environment.html#Z.add"><span class="id" title="axiom">Z.add</span></a> <span class="id" title="var">total</span> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Contract_storage.html#size_diff"><span class="id" title="variable">size_diff</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">diff</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="create_base"><span class="id" title="definition">create_base</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) (<span class="id" title="var">op_staroptstar</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Contract_repr.html#contract"><span class="id" title="definition">Contract_repr.contract</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="Tezos.Script_repr.html#t"><span class="id" title="definition">Script_repr.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">prepaid_bootstrap_storage</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#op_staroptstar"><span class="id" title="variable">op_staroptstar</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">op_starsthstar</span> ⇒ <span class="id" title="var">op_starsthstar</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">contract</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">balance</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">manager</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">delegate</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">script</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<span class="id" title="var">_</span> := <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_repr.html#is_implicit"><span class="id" title="definition">Contract_repr.is_implicit</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">counter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#get"><span class="id" title="axiom">Storage.Contract.Global_counter.get</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Counter"><span class="id" title="axiom">Storage.Contract.Counter</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#counter"><span class="id" title="variable">counter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#balance"><span class="id" title="variable">balance</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#manager"><span class="id" title="variable">manager</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">manager</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Manager"><span class="id" title="axiom">Storage.Contract.Manager</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> (<a class="idref" href="Tezos.Manager_repr.html#Hash"><span class="id" title="constructor">Manager_repr.Hash</span></a> <a class="idref" href="Tezos.Contract_storage.html#manager"><span class="id" title="variable">manager</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#delegate"><span class="id" title="variable">delegate</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">delegate</span> ⇒ <a class="idref" href="Tezos.Delegate_storage.html#init"><span class="id" title="definition">Delegate_storage.init</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#delegate"><span class="id" title="variable">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#script"><span class="id" title="variable">script</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">Script_repr.t.code</span></a> <a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">code</span></a><a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">Script_repr.t.storage</span></a> <a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">storage</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">|}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map_diff</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">code_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.init"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="var">code</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">storage_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Storage"><span class="id" title="axiom">Storage.Contract.Storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.init"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="var">storage</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#update_script_big_map"><span class="id" title="definition">update_script_big_map</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">big_map_diff</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">total_size</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Z.add"><span class="id" title="axiom">Z.add</span></a> (<a class="idref" href="Tezos.Environment.html#Z.add"><span class="id" title="axiom">Z.add</span></a> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Contract_storage.html#code_size"><span class="id" title="variable">code_size</span></a>) (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Contract_storage.html#storage_size"><span class="id" title="variable">storage_size</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#big_map_size"><span class="id" title="variable">big_map_size</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Sequences&nbsp;of&nbsp;instructions&nbsp;are&nbsp;ignored&nbsp;(operator&nbsp;";")&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;instruction_sequence&nbsp;";"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">prepaid_bootstrap_storage</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Contract_storage.html#prepaid_bootstrap_storage"><span class="id" title="variable">prepaid_bootstrap_storage</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#total_size"><span class="id" title="variable">total_size</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Paid_storage_space"><span class="id" title="axiom">Storage.Contract.Paid_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#prepaid_bootstrap_storage"><span class="id" title="variable">prepaid_bootstrap_storage</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Used_storage_space"><span class="id" title="axiom">Storage.Contract.Used_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#total_size"><span class="id" title="variable">total_size</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="originate_raw"><span class="id" title="definition">originate_raw</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) (<span class="id" title="var">prepaid_bootstrap_storage</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> : <a class="idref" href="Tezos.Contract_repr.html#contract"><span class="id" title="definition">Contract_repr.contract</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">balance</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">script</span> : <a class="idref" href="Tezos.Script_repr.html#t"><span class="id" title="definition">Script_repr.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">delegate</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#create_base"><span class="id" title="definition">create_base</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#prepaid_bootstrap_storage"><span class="id" title="variable">prepaid_bootstrap_storage</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#balance"><span class="id" title="variable">balance</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="Tezos.Contract_storage.html#delegate"><span class="id" title="variable">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tezos.Contract_storage.html#script"><span class="id" title="variable">script</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="create_implicit"><span class="id" title="definition">create_implicit</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">manager</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">balance</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#create_base"><span class="id" title="definition">create_base</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="Tezos.Contract_repr.html#implicit_contract"><span class="id" title="definition">Contract_repr.implicit_contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#manager"><span class="id" title="variable">manager</span></a>) <a class="idref" href="Tezos.Contract_storage.html#balance"><span class="id" title="variable">balance</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tezos.Contract_storage.html#manager"><span class="id" title="variable">manager</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="delete"><span class="id" title="definition">delete</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) (<span class="id" title="var">contract</span> : <a class="idref" href="Tezos.Contract_repr.html#contract"><span class="id" title="definition">Contract_repr.contract</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_repr.html#is_implicit"><span class="id" title="definition">Contract_repr.is_implicit</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Contract_storage.html#failwith"><span class="id" title="definition">failwith</span></a> "Non implicit contracts cannot be removed"<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Delegate_storage.html#remove"><span class="id" title="definition">Delegate_storage.remove</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.delete"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.delete</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Manager"><span class="id" title="axiom">Storage.Contract.Manager</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.delete"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.delete</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Counter"><span class="id" title="axiom">Storage.Contract.Counter</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.delete"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.delete</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.remove"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.remove</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Storage"><span class="id" title="axiom">Storage.Contract.Storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.remove"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.remove</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Paid_storage_space"><span class="id" title="axiom">Storage.Contract.Paid_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.remove"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.remove</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Used_storage_space"><span class="id" title="axiom">Storage.Contract.Used_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.remove"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.remove</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="allocated"><span class="id" title="definition">allocated</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.key"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_false"><span class="id" title="axiom">Error_monad.return_false</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_true"><span class="id" title="axiom">Error_monad.return_true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="__exists"><span class="id" title="definition">__exists</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> : <a class="idref" href="Tezos.Contract_repr.html#contract"><span class="id" title="definition">Contract_repr.contract</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_repr.html#is_implicit"><span class="id" title="definition">Contract_repr.is_implicit</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_true"><span class="id" title="axiom">Error_monad.return_true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Contract_storage.html#allocated"><span class="id" title="definition">allocated</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="must_exist"><span class="id" title="definition">must_exist</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> : <a class="idref" href="Tezos.Contract_repr.html#contract"><span class="id" title="definition">Contract_repr.contract</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#__exists"><span class="id" title="definition">__exists</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_unit"><span class="id" title="axiom">Error_monad.return_unit</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="must_be_allocated"><span class="id" title="definition">must_be_allocated</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.key"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#allocated"><span class="id" title="definition">allocated</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_unit"><span class="id" title="axiom">Error_monad.return_unit</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_repr.html#is_implicit"><span class="id" title="definition">Contract_repr.is_implicit</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">pkh</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="__list_value"><span class="id" title="definition">__list_value</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Contract_repr.html#t"><span class="id" title="inductive">Contract_repr.t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#__list_value"><span class="id" title="axiom">Storage.Contract.__list_value</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="fresh_contract_from_current_nonce"><span class="id" title="definition">fresh_contract_from_current_nonce</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Contract_repr.html#contract"><span class="id" title="definition">Contract_repr.contract</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__nonce_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Raw_context.html#increment_origination_nonce"><span class="id" title="definition">Raw_context.increment_origination_nonce</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_repr.html#originated_contract"><span class="id" title="definition">Contract_repr.originated_contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#__nonce_value"><span class="id" title="variable">__nonce_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="originated_from_current_nonce"><span class="id" title="definition">originated_from_current_nonce</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt_since</span> : <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) (<span class="id" title="var">ctxt_until</span> : <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Contract_repr.html#contract"><span class="id" title="definition">Contract_repr.contract</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">since</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Raw_context.html#origination_nonce"><span class="id" title="definition">Raw_context.origination_nonce</span></a> <a class="idref" href="Tezos.Contract_storage.html#ctxt_since"><span class="id" title="variable">ctxt_since</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="tactic">until</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Raw_context.html#origination_nonce"><span class="id" title="definition">Raw_context.origination_nonce</span></a> <a class="idref" href="Tezos.Contract_storage.html#ctxt_until"><span class="id" title="variable">ctxt_until</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.filter_map_s"><span class="id" title="axiom">Error_monad.filter_map_s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">contract</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#__exists"><span class="id" title="definition">__exists</span></a> <a class="idref" href="Tezos.Contract_storage.html#ctxt_until"><span class="id" title="variable">ctxt_until</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_some"><span class="id" title="axiom">Error_monad.return_some</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_none"><span class="id" title="axiom">Error_monad.return_none</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) (<a class="idref" href="Tezos.Contract_repr.html#originated_contracts"><span class="id" title="definition">Contract_repr.originated_contracts</span></a> <a class="idref" href="Tezos.Contract_storage.html#since"><span class="id" title="variable">since</span></a> <a class="idref" href="Tezos.Contract_storage.html#until"><span class="id" title="variable">until</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_counter_increment"><span class="id" title="definition">check_counter_increment</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Counter"><span class="id" title="axiom">Storage.Contract.Counter</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">manager</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">counter</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Z"><span class="id" title="axiom">Compare.Z</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>)) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">contract</span> := <a class="idref" href="Tezos.Contract_repr.html#implicit_contract"><span class="id" title="definition">Contract_repr.implicit_contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#manager"><span class="id" title="variable">manager</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">contract_counter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Counter"><span class="id" title="axiom">Storage.Contract.Counter</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">expected</span> := <a class="idref" href="Tezos.Environment.html#Z.succ"><span class="id" title="axiom">Z.succ</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract_counter"><span class="id" title="variable">contract_counter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Z"><span class="id" title="axiom">Compare.Z</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_eq"><span class="id" title="projection">Compare.S.op_eq</span></a>) <a class="idref" href="Tezos.Contract_storage.html#expected"><span class="id" title="variable">expected</span></a> <a class="idref" href="Tezos.Contract_storage.html#counter"><span class="id" title="variable">counter</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.return_unit"><span class="id" title="axiom">Error_monad.return_unit</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Z"><span class="id" title="axiom">Compare.Z</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_gt"><span class="id" title="projection">Compare.S.op_gt</span></a>) <a class="idref" href="Tezos.Contract_storage.html#expected"><span class="id" title="variable">expected</span></a> <a class="idref" href="Tezos.Contract_storage.html#counter"><span class="id" title="variable">counter</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="increment_counter"><span class="id" title="definition">increment_counter</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">manager</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">contract</span> := <a class="idref" href="Tezos.Contract_repr.html#implicit_contract"><span class="id" title="definition">Contract_repr.implicit_contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#manager"><span class="id" title="variable">manager</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">global_counter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#get"><span class="id" title="axiom">Storage.Contract.Global_counter.get</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#set"><span class="id" title="axiom">Storage.Contract.Global_counter.set</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> (<a class="idref" href="Tezos.Environment.html#Z.succ"><span class="id" title="axiom">Z.succ</span></a> <a class="idref" href="Tezos.Contract_storage.html#global_counter"><span class="id" title="variable">global_counter</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">contract_counter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Counter"><span class="id" title="axiom">Storage.Contract.Counter</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Counter"><span class="id" title="axiom">Storage.Contract.Counter</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> (<a class="idref" href="Tezos.Environment.html#Z.succ"><span class="id" title="axiom">Z.succ</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract_counter"><span class="id" title="variable">contract_counter</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="get_script_code"><span class="id" title="definition">get_script_code</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.context"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.key"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.value"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.value</span></a>))) :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="get_script"><span class="id" title="definition">get_script</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.context"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.key"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tezos.Script_repr.html#t"><span class="id" title="definition">Script_repr.t</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">code</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">storage</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Storage"><span class="id" title="axiom">Storage.Contract.Storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#code"><span class="id" title="variable">code</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Contract_storage.html#storage"><span class="id" title="variable">storage</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">code</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">storage</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> {| <a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">Script_repr.t.code</span></a> <a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">code</span></a><a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">;</span></a> <a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">Script_repr.t.storage</span></a> <a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_repr.html#t.Build"><span class="id" title="constructor">storage</span></a> |}<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) ⇒ <a class="idref" href="Tezos.Contract_storage.html#failwith"><span class="id" title="definition">failwith</span></a> "get_script"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="get_storage"><span class="id" title="definition">get_storage</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Storage"><span class="id" title="axiom">Storage.Contract.Storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.context"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Storage"><span class="id" title="axiom">Storage.Contract.Storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.key"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tezos.Script_repr.html#expr"><span class="id" title="definition">Script_repr.expr</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Storage"><span class="id" title="axiom">Storage.Contract.Storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">storage</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">storage</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">cost</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Script_repr.html#force_decode"><span class="id" title="definition">Script_repr.force_decode</span></a> <span class="id" title="var">storage</span>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Raw_context.html#consume_gas"><span class="id" title="definition">Raw_context.consume_gas</span></a> <a class="idref" href="Tezos.Contract_storage.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Contract_storage.html#cost"><span class="id" title="variable">cost</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tezos.Contract_storage.html#storage"><span class="id" title="variable">storage</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="get_counter"><span class="id" title="definition">get_counter</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Counter"><span class="id" title="axiom">Storage.Contract.Counter</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">manager</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Environment.html#Z.t"><span class="id" title="axiom">Z.t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">contract</span> := <a class="idref" href="Tezos.Contract_repr.html#implicit_contract"><span class="id" title="definition">Contract_repr.implicit_contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#manager"><span class="id" title="variable">manager</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Counter"><span class="id" title="axiom">Storage.Contract.Counter</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_repr.html#is_implicit"><span class="id" title="definition">Contract_repr.is_implicit</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Contract_storage.html#get"><span class="id" title="axiom">Storage.Contract.Global_counter.get</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Contract_storage.html#failwith"><span class="id" title="definition">failwith</span></a> "get_counter"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="get_manager_key"><span class="id" title="definition">get_manager_key</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Manager"><span class="id" title="axiom">Storage.Contract.Manager</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">manager</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.t"><span class="id" title="projection">S.SPublic_key.t</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">contract</span> := <a class="idref" href="Tezos.Contract_repr.html#implicit_contract"><span class="id" title="definition">Contract_repr.implicit_contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#manager"><span class="id" title="variable">manager</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Manager"><span class="id" title="axiom">Storage.Contract.Manager</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Contract_storage.html#failwith"><span class="id" title="definition">failwith</span></a> "get_manager_key"<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Tezos.Manager_repr.html#Hash"><span class="id" title="constructor">Manager_repr.Hash</span></a> <span class="id" title="var">_</span>) ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Tezos.Manager_repr.html#Public_key"><span class="id" title="constructor">Manager_repr.Public_key</span></a> <span class="id" title="var">v</span>) ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="is_manager_key_revealed"><span class="id" title="definition">is_manager_key_revealed</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Manager"><span class="id" title="axiom">Storage.Contract.Manager</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">manager</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">contract</span> := <a class="idref" href="Tezos.Contract_repr.html#implicit_contract"><span class="id" title="definition">Contract_repr.implicit_contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#manager"><span class="id" title="variable">manager</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Manager"><span class="id" title="axiom">Storage.Contract.Manager</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_false"><span class="id" title="axiom">Error_monad.return_false</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Tezos.Manager_repr.html#Hash"><span class="id" title="constructor">Manager_repr.Hash</span></a> <span class="id" title="var">_</span>) ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_false"><span class="id" title="axiom">Error_monad.return_false</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Tezos.Manager_repr.html#Public_key"><span class="id" title="constructor">Manager_repr.Public_key</span></a> <span class="id" title="var">_</span>) ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_true"><span class="id" title="axiom">Error_monad.return_true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="reveal_manager_key"><span class="id" title="definition">reveal_manager_key</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Manager"><span class="id" title="axiom">Storage.Contract.Manager</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">manager</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">public_key</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.t"><span class="id" title="projection">S.SPublic_key.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">contract</span> := <a class="idref" href="Tezos.Contract_repr.html#implicit_contract"><span class="id" title="definition">Contract_repr.implicit_contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#manager"><span class="id" title="variable">manager</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Manager"><span class="id" title="axiom">Storage.Contract.Manager</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Manager_repr.html#Public_key"><span class="id" title="constructor">Manager_repr.Public_key</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Manager_repr.html#Hash"><span class="id" title="constructor">Manager_repr.Hash</span></a> <span class="id" title="var">v</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">actual_hash</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.__hash_value"><span class="id" title="projection">S.SPublic_key.__hash_value</span></a>) <a class="idref" href="Tezos.Contract_storage.html#public_key"><span class="id" title="variable">public_key</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.equal"><span class="id" title="projection">S.SPublic_key_hash.equal</span></a>) <a class="idref" href="Tezos.Contract_storage.html#actual_hash"><span class="id" title="variable">actual_hash</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <a class="idref" href="Tezos.Manager_repr.html#Public_key"><span class="id" title="constructor">Manager_repr.Public_key</span></a> <a class="idref" href="Tezos.Contract_storage.html#public_key"><span class="id" title="variable">public_key</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Manager"><span class="id" title="axiom">Storage.Contract.Manager</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="get_balance"><span class="id" title="definition">get_balance</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.key"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Tez_repr.html#t"><span class="id" title="definition">Tez_repr.t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_repr.html#is_implicit"><span class="id" title="definition">Contract_repr.is_implicit</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Tez_repr.html#zero"><span class="id" title="definition">Tez_repr.zero</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Contract_storage.html#failwith"><span class="id" title="definition">failwith</span></a> "get_balance"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="update_script_storage"><span class="id" title="definition">update_script_storage</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Total_bytes"><span class="id" title="axiom">Storage.Big_map.Total_bytes</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Storage"><span class="id" title="axiom">Storage.Contract.Storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.key"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">storage</span> : <a class="idref" href="Tezos.Script_repr.html#expr"><span class="id" title="definition">Script_repr.expr</span></a>) (<span class="id" title="var">big_map_diff</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff_item"><span class="id" title="inductive">big_map_diff_item</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">storage</span> := <a class="idref" href="Tezos.Script_repr.html#__lazy_expr_value"><span class="id" title="definition">Script_repr.__lazy_expr_value</span></a> <a class="idref" href="Tezos.Contract_storage.html#storage"><span class="id" title="variable">storage</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map_size_diff</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Contract_storage.html#update_script_big_map"><span class="id" title="definition">update_script_big_map</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_diff"><span class="id" title="variable">big_map_diff</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">size_diff</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Storage"><span class="id" title="axiom">Storage.Contract.Storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.set"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.set</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#storage"><span class="id" title="variable">storage</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">previous_size</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Used_storage_space"><span class="id" title="axiom">Storage.Contract.Used_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">new_size</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Z.add"><span class="id" title="axiom">Z.add</span></a> <a class="idref" href="Tezos.Contract_storage.html#previous_size"><span class="id" title="variable">previous_size</span></a> (<a class="idref" href="Tezos.Environment.html#Z.add"><span class="id" title="axiom">Z.add</span></a> <a class="idref" href="Tezos.Contract_storage.html#big_map_size_diff"><span class="id" title="variable">big_map_size_diff</span></a> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Contract_storage.html#size_diff"><span class="id" title="variable">size_diff</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Used_storage_space"><span class="id" title="axiom">Storage.Contract.Used_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#new_size"><span class="id" title="variable">new_size</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="spend"><span class="id" title="definition">spend</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.key"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">amount</span> : <a class="idref" href="Tezos.Tez_repr.html#t"><span class="id" title="definition">Tez_repr.t</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">balance</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Tez_repr.html#op_minusquestion"><span class="id" title="definition">Tez_repr.op_minusquestion</span></a> <a class="idref" href="Tezos.Contract_storage.html#balance"><span class="id" title="variable">balance</span></a> <a class="idref" href="Tezos.Contract_storage.html#amount"><span class="id" title="variable">amount</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">new_balance</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="var">new_balance</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Roll_storage.html#Contract.remove_amount"><span class="id" title="definition">Roll_storage.Contract.remove_amount</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#amount"><span class="id" title="variable">amount</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Tez_repr.html#op_gt"><span class="id" title="definition">Tez_repr.op_gt</span></a> <span class="id" title="var">new_balance</span> <a class="idref" href="Tezos.Tez_repr.html#zero"><span class="id" title="definition">Tez_repr.zero</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_repr.html#is_implicit"><span class="id" title="definition">Contract_repr.is_implicit</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">pkh</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Delegate_storage.html#get"><span class="id" title="definition">Delegate_storage.get</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">pkh'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Sequences&nbsp;of&nbsp;instructions&nbsp;are&nbsp;ignored&nbsp;(operator&nbsp;";")&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;instruction_sequence&nbsp;";"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Contract_storage.html#delete"><span class="id" title="definition">delete</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="credit"><span class="id" title="definition">credit</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.context"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.key"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">amount</span> : <a class="idref" href="Tezos.Tez_repr.html#t"><span class="id" title="definition">Tez_repr.t</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Tez_repr.html#op_ltgt"><span class="id" title="definition">Tez_repr.op_ltgt</span></a> <a class="idref" href="Tezos.Contract_storage.html#amount"><span class="id" title="variable">amount</span></a> <a class="idref" href="Tezos.Tez_repr.html#zero"><span class="id" title="definition">Tez_repr.zero</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">target_has_code</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Code"><span class="id" title="axiom">Storage.Contract.Code</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.mem"><span class="id" title="projection">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.mem</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a> <a class="idref" href="Tezos.Contract_storage.html#target_has_code"><span class="id" title="variable">target_has_code</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_repr.html#is_implicit"><span class="id" title="definition">Contract_repr.is_implicit</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">manager</span> ⇒ <a class="idref" href="Tezos.Contract_storage.html#create_implicit"><span class="id" title="definition">create_implicit</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">manager</span> <a class="idref" href="Tezos.Contract_storage.html#amount"><span class="id" title="variable">amount</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">balance</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">balance</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Tez_repr.html#op_plusquestion"><span class="id" title="definition">Tez_repr.op_plusquestion</span></a> <a class="idref" href="Tezos.Contract_storage.html#amount"><span class="id" title="variable">amount</span></a> <span class="id" title="var">balance</span>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Balance"><span class="id" title="axiom">Storage.Contract.Balance</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set</span></a>) <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#balance"><span class="id" title="variable">balance</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Roll_storage.html#Contract.add_amount"><span class="id" title="definition">Roll_storage.Contract.add_amount</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#amount"><span class="id" title="variable">amount</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="init"><span class="id" title="definition">init</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#init"><span class="id" title="axiom">Storage.Contract.Global_counter.init</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="used_storage_space"><span class="id" title="definition">used_storage_space</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Used_storage_space"><span class="id" title="axiom">Storage.Contract.Used_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Used_storage_space"><span class="id" title="axiom">Storage.Contract.Used_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.key"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Environment.html#Z.t"><span class="id" title="axiom">Z.t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Used_storage_space"><span class="id" title="axiom">Storage.Contract.Used_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">fees</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <span class="id" title="var">fees</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="paid_storage_space"><span class="id" title="definition">paid_storage_space</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Paid_storage_space"><span class="id" title="axiom">Storage.Contract.Paid_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Paid_storage_space"><span class="id" title="axiom">Storage.Contract.Paid_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.key"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Environment.html#Z.t"><span class="id" title="axiom">Z.t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Paid_storage_space"><span class="id" title="axiom">Storage.Contract.Paid_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get_option</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Contract_storage.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">paid_space</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <span class="id" title="var">paid_space</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="set_paid_storage_space_and_return_fees_to_pay"><span class="id" title="definition">set_paid_storage_space_and_return_fees_to_pay</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Paid_storage_space"><span class="id" title="axiom">Storage.Contract.Paid_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contract</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Paid_storage_space"><span class="id" title="axiom">Storage.Contract.Paid_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.key"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.key</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">new_storage_space</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Z"><span class="id" title="axiom">Compare.Z</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Z.t"><span class="id" title="axiom">Z.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Paid_storage_space"><span class="id" title="axiom">Storage.Contract.Paid_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">already_paid_space</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Paid_storage_space"><span class="id" title="axiom">Storage.Contract.Paid_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Z"><span class="id" title="axiom">Compare.Z</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_gteq"><span class="id" title="projection">Compare.S.op_gteq</span></a>) <a class="idref" href="Tezos.Contract_storage.html#already_paid_space"><span class="id" title="variable">already_paid_space</span></a> <a class="idref" href="Tezos.Contract_storage.html#new_storage_space"><span class="id" title="variable">new_storage_space</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_pay</span> := <a class="idref" href="Tezos.Environment.html#Z.sub"><span class="id" title="axiom">Z.sub</span></a> <a class="idref" href="Tezos.Contract_storage.html#new_storage_space"><span class="id" title="variable">new_storage_space</span></a> <a class="idref" href="Tezos.Contract_storage.html#already_paid_space"><span class="id" title="variable">already_paid_space</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Contract_storage.html#Paid_storage_space"><span class="id" title="axiom">Storage.Contract.Paid_storage_space</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Contract_storage.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Contract_storage.html#new_storage_space"><span class="id" title="variable">new_storage_space</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Contract_storage.html#to_pay"><span class="id" title="variable">to_pay</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Contract_storage.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>