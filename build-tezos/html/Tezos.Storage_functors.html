<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Tezos.Storage_functors</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Tezos.Storage_functors</h1>

<div class="code">
</div>

<div class="doc">
Generated by coq-of-ocaml 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">OCaml.OCaml</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="var">Positivity</span> <span class="id" title="var">Checking</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="var">Guard</span> <span class="id" title="var">Checking</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Tezos.Environment.html#"><span class="id" title="library">Tezos.Environment</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Environment.Notations</span>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Gas_limit_repr.html#"><span class="id" title="library">Tezos.Gas_limit_repr</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Misc.html#"><span class="id" title="library">Tezos.Misc</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Raw_context.html#"><span class="id" title="library">Tezos.Raw_context</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Storage_description.html#"><span class="id" title="library">Tezos.Storage_description</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Storage_sigs.html#"><span class="id" title="library">Tezos.Storage_sigs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Storage_sigs</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Registered"><span class="id" title="definition">Registered</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ghost</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#REGISTER.Build_signature"><span class="id" title="constructor">Storage_sigs.REGISTER.ghost</span></a> <a class="idref" href="Tezos.Storage_sigs.html#REGISTER.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#REGISTER.Build_signature"><span class="id" title="constructor">ghost</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Ghost"><span class="id" title="definition">Ghost</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ghost</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#REGISTER.Build_signature"><span class="id" title="constructor">Storage_sigs.REGISTER.ghost</span></a> <a class="idref" href="Tezos.Storage_sigs.html#REGISTER.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#REGISTER.Build_signature"><span class="id" title="constructor">ghost</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="ENCODER"><span class="id" title="module">ENCODER</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="ENCODER.signature"><span class="id" title="record">signature</span></a> {<span class="id" title="var">t</span> : <span class="id" title="keyword">Set</span>} : <span class="id" title="keyword">Set</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="ENCODER.of_bytes"><span class="id" title="projection">of_bytes</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="method">t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="ENCODER.to_bytes"><span class="id" title="projection">to_bytes</span></a> : <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="method">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a>;<br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <a class="idref" href="Tezos.Storage_functors.html#ENCODER.signature"><span class="id" title="record">signature</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tezos.Storage_functors.html#ENCODER"><span class="id" title="module">ENCODER</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Make_encoder"><span class="id" title="definition">Make_encoder</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">V</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#VALUE.signature"><span class="id" title="record">VALUE.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">of_bytes</span> (<span class="id" title="var">__key_value</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">__b_value</span> : <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Data_encoding.Binary.of_bytes"><span class="id" title="axiom">Data_encoding.Binary.of_bytes</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.encoding"><span class="id" title="projection">Storage_sigs.VALUE.encoding</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#__b_value"><span class="id" title="variable">__b_value</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__error_value"><span class="id" title="axiom">Error_monad.__error_value</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_bytes</span> (<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)) : <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Environment.html#Data_encoding.Binary.to_bytes"><span class="id" title="axiom">Data_encoding.Binary.to_bytes</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.encoding"><span class="id" title="projection">Storage_sigs.VALUE.encoding</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">__b_value</span> ⇒ <span class="id" title="var">__b_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#MBytes.create"><span class="id" title="axiom">MBytes.create</span></a> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">ENCODER.of_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">of_bytes</span></a><a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">ENCODER.to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">to_bytes</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">ENCODER.signature</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="len_name"><span class="id" title="definition">len_name</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> := "len".<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="data_name"><span class="id" title="definition">data_name</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> := "data".<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="encode_len_value"><span class="id" title="definition">encode_len_value</span></a> (<span class="id" title="var">__bytes_value</span> : <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a>) : <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">length</span> := <a class="idref" href="Tezos.Environment.html#MBytes.length"><span class="id" title="axiom">MBytes.length</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Data_encoding.Binary.to_bytes_exn"><span class="id" title="axiom">Data_encoding.Binary.to_bytes_exn</span></a> <a class="idref" href="Tezos.Environment.html#Data_encoding.int31"><span class="id" title="axiom">Data_encoding.int31</span></a>) <a class="idref" href="Tezos.Storage_functors.html#length"><span class="id" title="variable">length</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="decode_len_value"><span class="id" title="definition">decode_len_value</span></a> (<span class="id" title="var">__key_value</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">len</span> : <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="Tezos.Environment.html#Data_encoding.Binary.of_bytes"><span class="id" title="axiom">Data_encoding.Binary.of_bytes</span></a> <a class="idref" href="Tezos.Environment.html#Data_encoding.int31"><span class="id" title="axiom">Data_encoding.int31</span></a>) <a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">len</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="map_key"><span class="id" title="definition">map_key</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <a class="idref" href="Tezos.Environment.html#Context.key"><span class="id" title="definition">Context.key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Context.key"><span class="id" title="definition">Context.key</span></a>) (<span class="id" title="var">function_parameter</span> : <a class="idref" href="Tezos.Environment.html#Context.dir_or_key"><span class="id" title="inductive">Context.dir_or_key</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Context.dir_or_key"><span class="id" title="inductive">Context.dir_or_key</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> (<a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">k</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> (<a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">k</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Make_subcontext"><span class="id" title="definition">Make_subcontext</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">R</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#REGISTER.signature"><span class="id" title="record">REGISTER.signature</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">C</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Raw_context.html#T.signature"><span class="id" title="record">Raw_context.T.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">N</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#NAME.signature"><span class="id" title="record">NAME.signature</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">name_length</span> := <a class="idref" href="Tezos.Environment.html#List.length"><span class="id" title="axiom">List.length</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_key</span> (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_at"><span class="id" title="axiom">Pervasives.op_at</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">of_key</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>} (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Misc.html#remove_elem_from_list"><span class="id" title="definition">Misc.remove_elem_from_list</span></a> <a class="idref" href="Tezos.Storage_functors.html#name_length"><span class="id" title="variable">name_length</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">dir_mem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.dir_mem"><span class="id" title="projection">Raw_context.T.dir_mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get"><span class="id" title="projection">Raw_context.T.get</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get_option"><span class="id" title="projection">Raw_context.T.get_option</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init"><span class="id" title="projection">Raw_context.T.init</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set"><span class="id" title="projection">Raw_context.T.set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init_set"><span class="id" title="projection">Raw_context.T.init_set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">set_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set_option"><span class="id" title="projection">Raw_context.T.set_option</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delete</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.delete"><span class="id" title="projection">Raw_context.T.delete</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove_rec</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove_rec"><span class="id" title="projection">Raw_context.T.remove_rec</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">copy</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">from</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">to_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.copy"><span class="id" title="projection">Raw_context.T.copy</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#from"><span class="id" title="variable">from</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#to_"><span class="id" title="variable">to_</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">fold</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">f</span> : <a class="idref" href="Tezos.Environment.html#Context.dir_or_key"><span class="id" title="inductive">Context.dir_or_key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold"><span class="id" title="projection">Raw_context.T.fold</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tezos.Storage_functors.html#map_key"><span class="id" title="definition">map_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#of_key"><span class="id" title="variable">of_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">keys</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtpipeeq"><span class="id" title="axiom">Error_monad.op_gtpipeeq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.keys"><span class="id" title="projection">Raw_context.T.keys</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">keys</span> ⇒ <a class="idref" href="Tezos.Environment.html#List.map"><span class="id" title="axiom">List.map</span></a> <a class="idref" href="Tezos.Storage_functors.html#of_key"><span class="id" title="variable">of_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#keys"><span class="id" title="variable">keys</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fold_keys</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold_keys"><span class="id" title="projection">Raw_context.T.fold_keys</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tezos.Storage_functors.html#of_key"><span class="id" title="variable">of_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">project</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">absolute_key</span> (<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.absolute_key"><span class="id" title="projection">Raw_context.T.absolute_key</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consume_gas</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">check_enough_gas</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.check_enough_gas"><span class="id" title="projection">Raw_context.T.check_enough_gas</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">description</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">description</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#R"><span class="id" title="variable">R</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#REGISTER.ghost"><span class="id" title="projection">Storage_sigs.REGISTER.ghost</span></a>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_description.html#create"><span class="id" title="definition">Storage_description.create</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.description"><span class="id" title="projection">Raw_context.T.description</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_description.html#register_named_subcontext"><span class="id" title="definition">Storage_description.register_named_subcontext</span></a> <a class="idref" href="Tezos.Storage_functors.html#description"><span class="id" title="variable">description</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.mem</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.dir_mem</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">dir_mem</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.get</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">get</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.get_option</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">get_option</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.init</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">init</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.set</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.init_set</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">init_set</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.set_option</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">set_option</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.delete</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">delete</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.remove</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">remove</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.remove_rec</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">remove_rec</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.copy</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">copy</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.fold</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">fold</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.keys</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">keys</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.fold_keys</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">fold_keys</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.project</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">project</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.absolute_key</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">absolute_key</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.consume_gas</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">consume_gas</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.check_enough_gas</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">check_enough_gas</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.description</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">description</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Raw_context.html#T.signature"><span class="id" title="record">Raw_context.T.signature</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Make_single_data_storage"><span class="id" title="definition">Make_single_data_storage</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">R</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#REGISTER.signature"><span class="id" title="record">REGISTER.signature</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">C</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Raw_context.html#T.signature"><span class="id" title="record">Raw_context.T.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">N</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#NAME.signature"><span class="id" title="record">NAME.signature</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">V</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#VALUE.signature"><span class="id" title="record">VALUE.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">tag_Single_data_storage</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">value</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Encoder</span> := <a class="idref" href="Tezos.Storage_functors.html#Make_encoder"><span class="id" title="definition">Make_encoder</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">of_bytes</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Encoder"><span class="id" title="variable">Encoder</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="projection">ENCODER.of_bytes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_bytes</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Encoder"><span class="id" title="variable">Encoder</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="projection">ENCODER.to_bytes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__b_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get"><span class="id" title="projection">Raw_context.T.get</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__key_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.absolute_key"><span class="id" title="projection">Raw_context.T.absolute_key</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="variable">of_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#__key_value"><span class="id" title="variable">__key_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#__b_value"><span class="id" title="variable">__b_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get_option</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get_option"><span class="id" title="projection">Raw_context.T.get_option</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_none"><span class="id" title="axiom">Error_monad.return_none</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">__b_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__key_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.absolute_key"><span class="id" title="projection">Raw_context.T.absolute_key</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="variable">of_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#__key_value"><span class="id" title="variable">__key_value</span></a> <span class="id" title="var">__b_value</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_some"><span class="id" title="axiom">Error_monad.return_some</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">__error_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">__error_value</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init"><span class="id" title="projection">Raw_context.T.init</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set"><span class="id" title="projection">Raw_context.T.set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init_set"><span class="id" title="projection">Raw_context.T.init_set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">set_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set_option"><span class="id" title="projection">Raw_context.T.set_option</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) (<a class="idref" href="Tezos.Environment.html#Option.map"><span class="id" title="axiom">Option.map</span></a> <a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delete</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.delete"><span class="id" title="projection">Raw_context.T.delete</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;top_level_evaluation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Single_data_storage.tag_Single_data_storage</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">tag_Single_data_storage</span></a><a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Single_data_storage.mem</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Single_data_storage.get</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">get</span></a><a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Single_data_storage.get_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">get_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Single_data_storage.init</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">init</span></a><a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Single_data_storage.set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Single_data_storage.init_set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">init_set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Single_data_storage.set_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">set_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Single_data_storage.delete</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">delete</span></a><a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Single_data_storage.remove</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.Build_signature"><span class="id" title="constructor">remove</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Single_data_storage.signature"><span class="id" title="record">Single_data_storage.signature</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>).<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="INDEX"><span class="id" title="module">INDEX</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="INDEX.signature"><span class="id" title="record">signature</span></a> {<span class="id" title="var">t</span> : <span class="id" title="keyword">Set</span>} {<span class="id" title="var">ipath</span> : <span class="id" title="keyword">Set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Set</span>} : <span class="id" title="keyword">Set</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="INDEX.path_length"><span class="id" title="projection">path_length</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="INDEX.to_path"><span class="id" title="projection">to_path</span></a> : <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="method">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="INDEX.of_path"><span class="id" title="projection">of_path</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="method">t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ipath</span> := <a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="INDEX.args"><span class="id" title="projection">args</span></a> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">a</span> : <span class="id" title="keyword">Set</span>}, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_description.html#args"><span class="id" title="definition">Storage_description.args</span></a> <a class="idref" href="Tezos.Storage_functors.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="method">t</span></a> (<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="method">ipath</span></a> <a class="idref" href="Tezos.Storage_functors.html#a"><span class="id" title="variable">a</span></a>);<br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <a class="idref" href="Tezos.Storage_functors.html#INDEX.signature"><span class="id" title="record">signature</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tezos.Storage_functors.html#INDEX"><span class="id" title="module">INDEX</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Pair"><span class="id" title="definition">Pair</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">I1</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">{'</span></a><span class="id" title="notation">[</span><span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="var">ipath</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">INDEX.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">I2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">{'</span></a><span class="id" title="notation">[</span><span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="var">ipath</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">INDEX.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">path_length</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_plus"><span class="id" title="axiom">Pervasives.op_plus</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#path_length"><span class="id" title="projection">INDEX.path_length</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#path_length"><span class="id" title="projection">INDEX.path_length</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_path</span> (<span class="id" title="var">function_parameter</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">l</span> ⇒ <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <span class="id" title="var">x</span> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <span class="id" title="var">y</span> <a class="idref" href="Tezos.Storage_functors.html#l"><span class="id" title="variable">l</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">of_path</span> (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Misc.html#take"><span class="id" title="definition">Misc.take</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#path_length"><span class="id" title="projection">INDEX.path_length</span></a>) <a class="idref" href="Tezos.Storage_functors.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">l1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_path"><span class="id" title="projection">INDEX.of_path</span></a>) <span class="id" title="var">l1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_path"><span class="id" title="projection">INDEX.of_path</span></a>) <span class="id" title="var">l2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ipath</span> (<span class="id" title="var">a</span> : <span class="id" title="keyword">Set</span>) := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <a class="idref" href="Tezos.Storage_functors.html#a"><span class="id" title="variable">a</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">args</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>} (<span class="id" title="var">function_parameter</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Storage_description.html#args"><span class="id" title="definition">Storage_description.args</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<span class="id" title="var">_</span> := <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_description.html#Pair"><span class="id" title="constructor">Storage_description.Pair</span></a> ((<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#args"><span class="id" title="projection">INDEX.args</span></a>) (<span class="id" title="var">a</span> := <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#args"><span class="id" title="projection">INDEX.args</span></a>) (<span class="id" title="var">a</span> := <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">INDEX.path_length</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">path_length</span></a><a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">INDEX.to_path</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">to_path</span></a><a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">INDEX.of_path</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">of_path</span></a><a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">INDEX.args</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#Build_signature"><span class="id" title="constructor">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">ipath</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">INDEX.signature</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I1"><span class="id" title="variable">I1</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I2"><span class="id" title="variable">I2</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) <a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Make_data_set_storage"><span class="id" title="definition">Make_data_set_storage</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">C</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Raw_context.html#T.signature"><span class="id" title="record">Raw_context.T.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">I</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">{'</span></a><span class="id" title="notation">[</span><span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="var">ipath</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">INDEX.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">elt</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">inited</span> := <a class="idref" href="Tezos.Environment.html#MBytes.of_string"><span class="id" title="axiom">MBytes.of_string</span></a> "inited" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">add</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init_set"><span class="id" title="projection">Raw_context.T.init_set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Tezos.Storage_functors.html#inited"><span class="id" title="variable">inited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">del</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">function_parameter</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒ <a class="idref" href="Tezos.Storage_functors.html#add"><span class="id" title="variable">add</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒ <a class="idref" href="Tezos.Storage_functors.html#del"><span class="id" title="variable">del</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">clear</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove_rec"><span class="id" title="projection">Raw_context.T.remove_rec</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">fold</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">dig</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>)) (<span class="id" title="var">path</span> : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a>) (<span class="id" title="var">acc</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="keyword">struct</span> <span class="id" title="var">i</span>} : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lteq"><span class="id" title="projection">Compare.S.op_lteq</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 1 <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold"><span class="id" title="projection">Raw_context.T.fold</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">file</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_path"><span class="id" title="projection">INDEX.of_path</span></a>) <span class="id" title="var">file</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Assert&nbsp;instruction&nbsp;is&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">assert</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">__p_value</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">__p_value</span> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold"><span class="id" title="projection">Raw_context.T.fold</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#dig"><span class="id" title="variable">dig</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 1) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#dig"><span class="id" title="variable">dig</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#path_length"><span class="id" title="projection">INDEX.path_length</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">elements</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold"><span class="id" title="variable">fold</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tezos.Storage_functors.html#elt"><span class="id" title="variable">elt</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">__p_value</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Storage_functors.html#__p_value"><span class="id" title="variable">__p_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;top_level_evaluation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.mem</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.add</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">add</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.del</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">del</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.elements</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">elements</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.fold</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">fold</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.clear</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">clear</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.signature"><span class="id" title="record">Data_set_storage.signature</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Make_indexed_data_storage"><span class="id" title="definition">Make_indexed_data_storage</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">C</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Raw_context.html#T.signature"><span class="id" title="record">Raw_context.T.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">I</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">{'</span></a><span class="id" title="notation">[</span><span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="var">ipath</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">INDEX.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">V</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#VALUE.signature"><span class="id" title="record">VALUE.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">tag_Non_iterable_indexed_data_storage</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">value</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Encoder</span> := <a class="idref" href="Tezos.Storage_functors.html#Make_encoder"><span class="id" title="definition">Make_encoder</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">of_bytes</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Encoder"><span class="id" title="variable">Encoder</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="projection">ENCODER.of_bytes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_bytes</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Encoder"><span class="id" title="variable">Encoder</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="projection">ENCODER.to_bytes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__b_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get"><span class="id" title="projection">Raw_context.T.get</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__key_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.absolute_key"><span class="id" title="projection">Raw_context.T.absolute_key</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="variable">of_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#__key_value"><span class="id" title="variable">__key_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#__b_value"><span class="id" title="variable">__b_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get_option</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get_option"><span class="id" title="projection">Raw_context.T.get_option</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_none"><span class="id" title="axiom">Error_monad.return_none</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">__b_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__key_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.absolute_key"><span class="id" title="projection">Raw_context.T.absolute_key</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="variable">of_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#__key_value"><span class="id" title="variable">__key_value</span></a> <span class="id" title="var">__b_value</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_some"><span class="id" title="axiom">Error_monad.return_some</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">__error_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">__error_value</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set"><span class="id" title="projection">Raw_context.T.set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init"><span class="id" title="projection">Raw_context.T.init</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init_set"><span class="id" title="projection">Raw_context.T.init_set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">set_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set_option"><span class="id" title="projection">Raw_context.T.set_option</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Option.map"><span class="id" title="axiom">Option.map</span></a> <a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delete</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.delete"><span class="id" title="projection">Raw_context.T.delete</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">clear</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove_rec"><span class="id" title="projection">Raw_context.T.remove_rec</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fold_keys</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">dig</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>)) (<span class="id" title="var">path</span> : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">acc</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">i</span>} : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lteq"><span class="id" title="projection">Compare.S.op_lteq</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 1 <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold"><span class="id" title="projection">Raw_context.T.fold</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">file</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_path"><span class="id" title="projection">INDEX.of_path</span></a>) <span class="id" title="var">file</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Assert&nbsp;instruction&nbsp;is&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">assert</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">path</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold"><span class="id" title="projection">Raw_context.T.fold</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#dig"><span class="id" title="variable">dig</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 1) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#dig"><span class="id" title="variable">dig</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#path_length"><span class="id" title="projection">INDEX.path_length</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">fold</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> (<span class="id" title="var">path</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) (<span class="id" title="var">acc</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#get"><span class="id" title="variable">get</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <span class="id" title="var">v</span> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys"><span class="id" title="variable">fold_keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a> <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bindings</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold"><span class="id" title="variable">fold</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Storage_functors.html#value"><span class="id" title="variable">value</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">__p_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Storage_functors.html#__p_value"><span class="id" title="variable">__p_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">keys</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys"><span class="id" title="variable">fold_keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">__p_value</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Storage_functors.html#__p_value"><span class="id" title="variable">__p_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;top_level_evaluation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.tag_Non_iterable_indexed_data_storage</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">tag_Non_iterable_indexed_data_storage</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.mem</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.get</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">get</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.get_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">get_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.init</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">init</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.init_set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">init_set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.set_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">set_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.delete</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">delete</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.remove</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">remove</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.clear</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">clear</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.keys</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">keys</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.bindings</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">bindings</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.fold</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">fold</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.fold_keys</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">fold_keys</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.signature"><span class="id" title="record">Indexed_data_storage.signature</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Make_indexed_carbonated_data_storage"><span class="id" title="definition">Make_indexed_carbonated_data_storage</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">C</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Raw_context.html#T.signature"><span class="id" title="record">Raw_context.T.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">I</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">{'</span></a><span class="id" title="notation">[</span><span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="var">ipath</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">INDEX.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">V</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#VALUE.signature"><span class="id" title="record">VALUE.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">tag_Non_iterable_indexed_carbonated_data_storage</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">value</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Encoder</span> := <a class="idref" href="Tezos.Storage_functors.html#Make_encoder"><span class="id" title="definition">Make_encoder</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">of_bytes</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Encoder"><span class="id" title="variable">Encoder</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="projection">ENCODER.of_bytes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_bytes</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Encoder"><span class="id" title="variable">Encoder</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="projection">ENCODER.to_bytes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">data_key</span> (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="definition">data_name</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">len_key</span> (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a> <a class="idref" href="Tezos.Storage_functors.html#len_name"><span class="id" title="definition">len_name</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consume_mem_gas</span> (<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Gas_limit_repr.html#read_bytes_cost"><span class="id" title="definition">Gas_limit_repr.read_bytes_cost</span></a> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">existing_size</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get_option"><span class="id" title="projection">Raw_context.T.get_option</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> (<a class="idref" href="Tezos.Storage_functors.html#len_key"><span class="id" title="variable">len_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">len</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">len</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#decode_len_value"><span class="id" title="definition">decode_len_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#len_key"><span class="id" title="variable">len_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="var">len</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consume_read_gas</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">len</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#get"><span class="id" title="variable">get</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> (<a class="idref" href="Tezos.Storage_functors.html#len_key"><span class="id" title="variable">len_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">len</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#decode_len_value"><span class="id" title="definition">decode_len_value</span></a> (<a class="idref" href="Tezos.Storage_functors.html#len_key"><span class="id" title="variable">len_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Gas_limit_repr.html#read_bytes_cost"><span class="id" title="definition">Gas_limit_repr.read_bytes_cost</span></a> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a>))) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consume_serialize_write_gas</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">set</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)) (<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) (<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__bytes_value</span> := <a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">len</span> := <a class="idref" href="Tezos.Environment.html#MBytes.length"><span class="id" title="axiom">MBytes.length</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Gas_limit_repr.html#alloc_mbytes_cost"><span class="id" title="definition">Gas_limit_repr.alloc_mbytes_cost</span></a> <a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a>)) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Gas_limit_repr.html#write_bytes_cost"><span class="id" title="definition">Gas_limit_repr.write_bytes_cost</span></a> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a>))) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#set"><span class="id" title="variable">set</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> (<a class="idref" href="Tezos.Storage_functors.html#len_key"><span class="id" title="variable">len_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#encode_len_value"><span class="id" title="definition">encode_len_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consume_remove_gas</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">del</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)) (<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Gas_limit_repr.html#write_bytes_cost"><span class="id" title="definition">Gas_limit_repr.write_bytes_cost</span></a> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a>)) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#del"><span class="id" title="variable">del</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> (<a class="idref" href="Tezos.Storage_functors.html#len_key"><span class="id" title="variable">len_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">s</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#consume_mem_gas"><span class="id" title="variable">consume_mem_gas</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__exists</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#data_key"><span class="id" title="variable">data_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#__exists"><span class="id" title="variable">__exists</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">s</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#consume_read_gas"><span class="id" title="variable">consume_read_gas</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get"><span class="id" title="projection">Raw_context.T.get</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__b_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get"><span class="id" title="projection">Raw_context.T.get</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#data_key"><span class="id" title="variable">data_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__key_value</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.absolute_key"><span class="id" title="projection">Raw_context.T.absolute_key</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#data_key"><span class="id" title="variable">data_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">v</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="variable">of_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#__key_value"><span class="id" title="variable">__key_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#__b_value"><span class="id" title="variable">__b_value</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get_option</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">s</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#consume_mem_gas"><span class="id" title="variable">consume_mem_gas</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__exists</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#data_key"><span class="id" title="variable">data_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Storage_functors.html#__exists"><span class="id" title="variable">__exists</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#get"><span class="id" title="variable">get</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">prev_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#existing_size"><span class="id" title="variable">existing_size</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__bytes_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#consume_serialize_write_gas"><span class="id" title="variable">consume_serialize_write_gas</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set"><span class="id" title="projection">Raw_context.T.set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set"><span class="id" title="projection">Raw_context.T.set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#data_key"><span class="id" title="variable">data_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">size_diff</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> (<a class="idref" href="Tezos.Environment.html#MBytes.length"><span class="id" title="axiom">MBytes.length</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a>) <a class="idref" href="Tezos.Storage_functors.html#prev_size"><span class="id" title="variable">prev_size</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#size_diff"><span class="id" title="variable">size_diff</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__bytes_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#consume_serialize_write_gas"><span class="id" title="variable">consume_serialize_write_gas</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init"><span class="id" title="projection">Raw_context.T.init</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init"><span class="id" title="projection">Raw_context.T.init</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#data_key"><span class="id" title="variable">data_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">size</span> := <a class="idref" href="Tezos.Environment.html#MBytes.length"><span class="id" title="axiom">MBytes.length</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#size"><span class="id" title="variable">size</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtgteq"><span class="id" title="axiom">Error_monad.op_gtgteq</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init_set"><span class="id" title="projection">Raw_context.T.init_set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">prev_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">existed</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#existing_size"><span class="id" title="variable">existing_size</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__bytes_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#consume_serialize_write_gas"><span class="id" title="variable">consume_serialize_write_gas</span></a> <a class="idref" href="Tezos.Storage_functors.html#init_set"><span class="id" title="variable">init_set</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#init_set"><span class="id" title="variable">init_set</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#data_key"><span class="id" title="variable">data_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">size_diff</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> (<a class="idref" href="Tezos.Environment.html#MBytes.length"><span class="id" title="axiom">MBytes.length</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a>) <a class="idref" href="Tezos.Storage_functors.html#prev_size"><span class="id" title="variable">prev_size</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#size_diff"><span class="id" title="variable">size_diff</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Storage_functors.html#existed"><span class="id" title="variable">existed</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtgteq"><span class="id" title="axiom">Error_monad.op_gtgteq</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">prev_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">existed</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#existing_size"><span class="id" title="variable">existing_size</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">s</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#consume_remove_gas"><span class="id" title="variable">consume_remove_gas</span></a> <a class="idref" href="Tezos.Storage_functors.html#remove"><span class="id" title="variable">remove</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#remove"><span class="id" title="variable">remove</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#data_key"><span class="id" title="variable">data_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#prev_size"><span class="id" title="variable">prev_size</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Storage_functors.html#existed"><span class="id" title="variable">existed</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delete</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">prev_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#existing_size"><span class="id" title="variable">existing_size</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">s</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#consume_remove_gas"><span class="id" title="variable">consume_remove_gas</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.delete"><span class="id" title="projection">Raw_context.T.delete</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.delete"><span class="id" title="projection">Raw_context.T.delete</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#data_key"><span class="id" title="variable">data_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#prev_size"><span class="id" title="variable">prev_size</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">set_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Storage_functors.html#remove"><span class="id" title="variable">remove</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#init_set"><span class="id" title="variable">init_set</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fold_keys_unaccounted</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">dig</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>)) (<span class="id" title="var">path</span> : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">acc</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">i</span>} : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lteq"><span class="id" title="projection">Compare.S.op_lteq</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 0 <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold"><span class="id" title="projection">Raw_context.T.fold</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">file</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Environment.html#List.rev"><span class="id" title="axiom">List.rev</span></a> <span class="id" title="var">file</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Environment.html#List.rev"><span class="id" title="axiom">List.rev</span></a> <span class="id" title="var">file</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">last</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.String"><span class="id" title="axiom">Compare.String</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_eq"><span class="id" title="projection">Compare.S.op_eq</span></a>) <span class="id" title="var">last</span> <a class="idref" href="Tezos.Storage_functors.html#len_name"><span class="id" title="definition">len_name</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Environment.html#List.rev"><span class="id" title="axiom">List.rev</span></a> <span class="id" title="var">file</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">last</span> <span class="id" title="var">rest</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.String"><span class="id" title="axiom">Compare.String</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_eq"><span class="id" title="projection">Compare.S.op_eq</span></a>) <span class="id" title="var">last</span> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="definition">data_name</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">last</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">last</span> <span class="id" title="var">rest</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">file</span> := <a class="idref" href="Tezos.Environment.html#List.rev"><span class="id" title="axiom">List.rev</span></a> <span class="id" title="var">rest</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_path"><span class="id" title="projection">INDEX.of_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#file"><span class="id" title="variable">file</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Assert&nbsp;instruction&nbsp;is&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">assert</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">path</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Assert&nbsp;instruction&nbsp;is&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">assert</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold"><span class="id" title="projection">Raw_context.T.fold</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#dig"><span class="id" title="variable">dig</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 1) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#dig"><span class="id" title="variable">dig</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#path_length"><span class="id" title="projection">INDEX.path_length</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">keys_unaccounted</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys_unaccounted"><span class="id" title="variable">fold_keys_unaccounted</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">__p_value</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Storage_functors.html#__p_value"><span class="id" title="variable">__p_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;top_level_evaluation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.tag_Non_iterable_indexed_carbonated_data_storage</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">tag_Non_iterable_indexed_carbonated_data_storage</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.mem</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.get</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">get</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.get_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">get_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.init</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">init</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.init_set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">init_set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.set_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">set_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.delete</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">delete</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.remove</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">remove</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.signature"><span class="id" title="record">Non_iterable_indexed_carbonated_data_storage.signature</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Make_indexed_data_snapshotable_storage"><span class="id" title="definition">Make_indexed_data_snapshotable_storage</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">C</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Raw_context.html#T.signature"><span class="id" title="record">Raw_context.T.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">Snapshot_index</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">{'</span></a><span class="id" title="notation">[</span><span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="var">ipath</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">INDEX.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">I</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">{'</span></a><span class="id" title="notation">[</span><span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="var">ipath</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">INDEX.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">V</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#VALUE.signature"><span class="id" title="record">VALUE.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">snapshot</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Snapshot_index"><span class="id" title="variable">Snapshot_index</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">data_name</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a> "current" <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">snapshot_name</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a> "snapshot" <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">C_data</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="Tezos.Storage_functors.html#Make_subcontext"><span class="id" title="definition">Make_subcontext</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Registered"><span class="id" title="definition">Registered</span></a><span class="id" title="notation">|)</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">let</span> <span class="id" title="var">name</span> := <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#NAME.Build_signature"><span class="id" title="constructor">Storage_sigs.NAME.name</span></a> <a class="idref" href="Tezos.Storage_sigs.html#NAME.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#NAME.Build_signature"><span class="id" title="constructor">name</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">C_snapshot</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="Tezos.Storage_functors.html#Make_subcontext"><span class="id" title="definition">Make_subcontext</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Registered"><span class="id" title="definition">Registered</span></a><span class="id" title="notation">|)</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">let</span> <span class="id" title="var">name</span> := <a class="idref" href="Tezos.Storage_functors.html#snapshot_name"><span class="id" title="variable">snapshot_name</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#NAME.Build_signature"><span class="id" title="constructor">Storage_sigs.NAME.name</span></a> <a class="idref" href="Tezos.Storage_sigs.html#NAME.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#NAME.Build_signature"><span class="id" title="constructor">name</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Data_storage</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="Tezos.Storage_functors.html#Make_indexed_data_storage"><span class="id" title="definition">Make_indexed_data_storage</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C_data"><span class="id" title="variable">C_data</span></a><span class="id" title="notation">|)</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="notation">[</span><span class="id" title="keyword">Set</span> <span class="id" title="notation">**</span> <span class="id" title="keyword">Set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Set</span><span class="id" title="notation">]</span>) <span class="id" title="var">_</span> <span class="id" title="notation">[</span><span class="id" title="var">_</span><span class="id" title="notation">,</span> <span class="id" title="var">_</span><span class="id" title="notation">]</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tag_Non_iterable_indexed_data_storage</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.tag_Non_iterable_indexed_data_storage"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.tag_Non_iterable_indexed_data_storage</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.t"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.key"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.key</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.mem"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.mem</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get_option</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get_option</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init_set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init_set</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">set_option</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set_option</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delete</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.delete"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.delete</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.remove"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.remove</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">clear</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.clear"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.clear</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">keys</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.keys"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.keys</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bindings</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.bindings"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.bindings</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">fold</span> {<span class="id" title="var">a</span> : <span class="id" title="keyword">Set</span>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.fold"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.fold</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fold_keys</span> {<span class="id" title="var">a</span> : <span class="id" title="keyword">Set</span>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Data_storage"><span class="id" title="variable">Data_storage</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.fold_keys"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.fold_keys</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Pair_Snapshot_index_I</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Storage_functors.html#Pair"><span class="id" title="definition">Pair</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="notation">[</span><span class="id" title="keyword">Set</span> <span class="id" title="notation">**</span> <span class="id" title="keyword">Set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Set</span><span class="id" title="notation">]</span>) <span class="id" title="var">_</span> <span class="id" title="notation">[</span><span class="id" title="var">_</span><span class="id" title="notation">,</span> <span class="id" title="var">_</span><span class="id" title="notation">]</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Snapshot_index"><span class="id" title="variable">Snapshot_index</span></a><span class="id" title="notation">|)</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="notation">[</span><span class="id" title="keyword">Set</span> <span class="id" title="notation">**</span> <span class="id" title="keyword">Set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Set</span><span class="id" title="notation">]</span>) <span class="id" title="var">_</span> <span class="id" title="notation">[</span><span class="id" title="var">_</span><span class="id" title="notation">,</span> <span class="id" title="var">_</span><span class="id" title="notation">]</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Snapshot</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="Tezos.Storage_functors.html#Make_indexed_data_storage"><span class="id" title="definition">Make_indexed_data_storage</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C_snapshot"><span class="id" title="variable">C_snapshot</span></a><span class="id" title="notation">|)</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="notation">[</span><span class="id" title="keyword">Set</span> <span class="id" title="notation">**</span> <span class="id" title="keyword">Set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Set</span><span class="id" title="notation">]</span>) <span class="id" title="var">_</span> <span class="id" title="notation">[</span><span class="id" title="var">_</span><span class="id" title="notation">,</span> <span class="id" title="var">_</span><span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Pair_Snapshot_index_I"><span class="id" title="variable">Pair_Snapshot_index_I</span></a><span class="id" title="notation">|)</span>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">snapshot_path</span> (<span class="id" title="var">id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Snapshot_index"><span class="id" title="variable">Snapshot_index</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_at"><span class="id" title="axiom">Pervasives.op_at</span></a> <a class="idref" href="Tezos.Storage_functors.html#snapshot_name"><span class="id" title="variable">snapshot_name</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Snapshot_index"><span class="id" title="variable">Snapshot_index</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#id"><span class="id" title="variable">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">snapshot_exists</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Snapshot_index"><span class="id" title="variable">Snapshot_index</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.dir_mem"><span class="id" title="projection">Raw_context.T.dir_mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#snapshot_path"><span class="id" title="variable">snapshot_path</span></a> <a class="idref" href="Tezos.Storage_functors.html#id"><span class="id" title="variable">id</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__snapshot_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Snapshot_index"><span class="id" title="variable">Snapshot_index</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.copy"><span class="id" title="projection">Raw_context.T.copy</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a> (<a class="idref" href="Tezos.Storage_functors.html#snapshot_path"><span class="id" title="variable">snapshot_path</span></a> <a class="idref" href="Tezos.Storage_functors.html#id"><span class="id" title="variable">id</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delete_snapshot</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Snapshot_index"><span class="id" title="variable">Snapshot_index</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove_rec"><span class="id" title="projection">Raw_context.T.remove_rec</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="Tezos.Storage_functors.html#snapshot_path"><span class="id" title="variable">snapshot_path</span></a> <a class="idref" href="Tezos.Storage_functors.html#id"><span class="id" title="variable">id</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.tag_Non_iterable_indexed_data_storage</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">tag_Non_iterable_indexed_data_storage</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.mem</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.get</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">get</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.get_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">get_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.init</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">init</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.init_set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">init_set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.set_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">set_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.delete</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">delete</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.remove</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">remove</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.clear</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">clear</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.keys</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">keys</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.bindings</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">bindings</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.fold</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">fold</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.fold_keys</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">fold_keys</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.Snapshot</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">(|</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Snapshot</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">|);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.snapshot_exists</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">snapshot_exists</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.__snapshot_value</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">__snapshot_value</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_snapshotable_storage.delete_snapshot</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.Build_signature"><span class="id" title="constructor">delete_snapshot</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_snapshotable_storage.signature"><span class="id" title="record">Indexed_data_snapshotable_storage.signature</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Snapshot_index"><span class="id" title="variable">Snapshot_index</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Make_indexed_subcontext"><span class="id" title="definition">Make_indexed_subcontext</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">C</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Raw_context.html#T.signature"><span class="id" title="record">Raw_context.T.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">I</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">{'</span></a><span class="id" title="notation">[</span><span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="var">ipath</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">INDEX.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ipath</span> (<span class="id" title="var">a</span> : <span class="id" title="keyword">Set</span>) := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <a class="idref" href="Tezos.Storage_functors.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">clear</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove_rec"><span class="id" title="projection">Raw_context.T.remove_rec</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fold_keys</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">dig</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>)) (<span class="id" title="var">path</span> : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a>) (<span class="id" title="var">acc</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="keyword">struct</span> <span class="id" title="var">i</span>} : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lteq"><span class="id" title="projection">Compare.S.op_lteq</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 0 <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_path"><span class="id" title="projection">INDEX.of_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Assert&nbsp;instruction&nbsp;is&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">assert</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">path</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold"><span class="id" title="projection">Raw_context.T.fold</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#path"><span class="id" title="variable">path</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#dig"><span class="id" title="variable">dig</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 1) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#dig"><span class="id" title="variable">dig</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#path_length"><span class="id" title="projection">INDEX.path_length</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">keys</span> (<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys"><span class="id" title="variable">fold_keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__list_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Environment.html#Context.dir_or_key"><span class="id" title="inductive">Context.dir_or_key</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold"><span class="id" title="projection">Raw_context.T.fold</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove_rec</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">k</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove_rec"><span class="id" title="projection">Raw_context.T.remove_rec</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">copy</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">from</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">to_</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.copy"><span class="id" title="projection">Raw_context.T.copy</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#from"><span class="id" title="variable">from</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#to_"><span class="id" title="variable">to_</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">description</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_description.html#register_indexed_subcontext"><span class="id" title="definition">Storage_description.register_indexed_subcontext</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.description"><span class="id" title="projection">Raw_context.T.description</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">c</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.op_gtgteq"><span class="id" title="axiom">Error_monad.op_gtgteq</span></a> (<a class="idref" href="Tezos.Storage_functors.html#keys"><span class="id" title="variable">keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a>) <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#args"><span class="id" title="projection">INDEX.args</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">unpack</span> := <a class="idref" href="Tezos.Storage_description.html#unpack"><span class="id" title="definition">Storage_description.unpack</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#args"><span class="id" title="projection">INDEX.args</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pack</span> := <a class="idref" href="Tezos.Storage_description.html#pack"><span class="id" title="definition">Storage_description.pack</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#args"><span class="id" title="projection">INDEX.args</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Raw_context</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_key</span> (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_path"><span class="id" title="projection">INDEX.to_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">of_key</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>} (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Misc.html#remove_elem_from_list"><span class="id" title="definition">Misc.remove_elem_from_list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#path_length"><span class="id" title="projection">INDEX.path_length</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">dir_mem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.dir_mem"><span class="id" title="projection">Raw_context.T.dir_mem</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get"><span class="id" title="projection">Raw_context.T.get</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get_option"><span class="id" title="projection">Raw_context.T.get_option</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">v</span> : <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init"><span class="id" title="projection">Raw_context.T.init</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">v</span> : <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set"><span class="id" title="projection">Raw_context.T.set</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">v</span> : <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init_set"><span class="id" title="projection">Raw_context.T.init_set</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">set_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">v</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set_option"><span class="id" title="projection">Raw_context.T.set_option</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delete</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.delete"><span class="id" title="projection">Raw_context.T.delete</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove_rec</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove_rec"><span class="id" title="projection">Raw_context.T.remove_rec</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">copy</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">from</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">to_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.copy"><span class="id" title="projection">Raw_context.T.copy</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#from"><span class="id" title="variable">from</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#to_"><span class="id" title="variable">to_</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">fold</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">f</span> : <a class="idref" href="Tezos.Environment.html#Context.dir_or_key"><span class="id" title="inductive">Context.dir_or_key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold"><span class="id" title="projection">Raw_context.T.fold</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tezos.Storage_functors.html#map_key"><span class="id" title="definition">map_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#of_key"><span class="id" title="variable">of_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">keys</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtpipeeq"><span class="id" title="axiom">Error_monad.op_gtpipeeq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.keys"><span class="id" title="projection">Raw_context.T.keys</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">keys</span> ⇒ <a class="idref" href="Tezos.Environment.html#List.map"><span class="id" title="axiom">List.map</span></a> <a class="idref" href="Tezos.Storage_functors.html#of_key"><span class="id" title="variable">of_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#keys"><span class="id" title="variable">keys</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fold_keys</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.fold_keys"><span class="id" title="projection">Raw_context.T.fold_keys</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tezos.Storage_functors.html#of_key"><span class="id" title="variable">of_key</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">project</span> (<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <span class="id" title="var">__t_value</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">absolute_key</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.absolute_key"><span class="id" title="projection">Raw_context.T.absolute_key</span></a>) <span class="id" title="var">__t_value</span> (<a class="idref" href="Tezos.Storage_functors.html#to_key"><span class="id" title="variable">to_key</span></a> <span class="id" title="var">i</span> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consume_gas</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> : <a class="idref" href="Tezos.Gas_limit_repr.html#cost"><span class="id" title="definition">Gas_limit_repr.cost</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Storage_functors.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.ok"><span class="id" title="axiom">Error_monad.ok</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">check_enough_gas</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> : <a class="idref" href="Tezos.Gas_limit_repr.html#cost"><span class="id" title="definition">Gas_limit_repr.cost</span></a>) : <a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">__t_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.check_enough_gas"><span class="id" title="projection">Raw_context.T.check_enough_gas</span></a>) <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Storage_functors.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.mem</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.dir_mem</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">dir_mem</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.get</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">get</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.get_option</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">get_option</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.init</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">init</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.set</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.init_set</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">init_set</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.set_option</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">set_option</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.delete</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">delete</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.remove</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">remove</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.remove_rec</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">remove_rec</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.copy</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">copy</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.fold</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">fold</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.keys</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">keys</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.fold_keys</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">fold_keys</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.project</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">project</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.absolute_key</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">absolute_key</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.consume_gas</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">consume_gas</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.check_enough_gas</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">check_enough_gas</span></a><a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">Raw_context.T.description</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Raw_context.html#T.Build_signature"><span class="id" title="constructor">description</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Raw_context.html#T.signature"><span class="id" title="record">Raw_context.T.signature</span></a> (<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="variable">ipath</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">resolve</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__t_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">prefix</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">loop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>)) (<span class="id" title="var">prefix</span> : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">function_parameter</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">i</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_eq"><span class="id" title="projection">Compare.S.op_eq</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#path_length"><span class="id" title="projection">INDEX.path_length</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_eq"><span class="id" title="projection">Compare.S.op_eq</span></a>) <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#path_length"><span class="id" title="projection">INDEX.path_length</span></a>) 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_path"><span class="id" title="projection">INDEX.of_path</span></a>) <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Assert&nbsp;instruction&nbsp;is&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">assert</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">path</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a> <span class="id" title="var">path</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">prefixes</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#__list_value"><span class="id" title="variable">__list_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtpipeeq"><span class="id" title="axiom">Error_monad.op_gtpipeeq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Lwt_list.map_s"><span class="id" title="axiom">Lwt_list.map_s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">prefix</span> | <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">prefix</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#loop"><span class="id" title="variable">loop</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.op_plus"><span class="id" title="axiom">Pervasives.op_plus</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 1) <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="Tezos.Storage_functors.html#prefixes"><span class="id" title="variable">prefixes</span></a>) <a class="idref" href="Tezos.Environment.html#List.flatten"><span class="id" title="axiom">List.flatten</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Sequences&nbsp;of&nbsp;instructions&nbsp;are&nbsp;ignored&nbsp;(operator&nbsp;";")&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;instruction_sequence&nbsp;";"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">prefixes</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#__list_value"><span class="id" title="variable">__list_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtpipeeq"><span class="id" title="axiom">Error_monad.op_gtpipeeq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Lwt_list.map_s"><span class="id" title="axiom">Lwt_list.map_s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">prefix</span> | <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">prefix</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Misc.html#remove_prefix"><span class="id" title="definition">Misc.remove_prefix</span></a> <span class="id" title="var">d</span> (<a class="idref" href="Tezos.Environment.html#List.hd"><span class="id" title="axiom">List.hd</span></a> (<a class="idref" href="Tezos.Environment.html#List.rev"><span class="id" title="axiom">List.rev</span></a> <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.return_nil"><span class="id" title="axiom">Lwt.return_nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#loop"><span class="id" title="variable">loop</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.op_plus"><span class="id" title="axiom">Pervasives.op_plus</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 1) <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="Tezos.Storage_functors.html#prefixes"><span class="id" title="variable">prefixes</span></a>) <a class="idref" href="Tezos.Environment.html#List.flatten"><span class="id" title="axiom">List.flatten</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> "" <span class="id" title="var">ds</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">prefixes</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#__list_value"><span class="id" title="variable">__list_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtpipeeq"><span class="id" title="axiom">Error_monad.op_gtpipeeq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Lwt_list.map_s"><span class="id" title="axiom">Lwt_list.map_s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="Tezos.Environment.html#Context.Key"><span class="id" title="constructor">Context.Key</span></a> <span class="id" title="var">prefix</span> | <a class="idref" href="Tezos.Environment.html#Context.Dir"><span class="id" title="constructor">Context.Dir</span></a> <span class="id" title="var">prefix</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#loop"><span class="id" title="variable">loop</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.op_plus"><span class="id" title="axiom">Pervasives.op_plus</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 1) <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a> <span class="id" title="var">ds</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="Tezos.Storage_functors.html#prefixes"><span class="id" title="variable">prefixes</span></a>) <a class="idref" href="Tezos.Environment.html#List.flatten"><span class="id" title="axiom">List.flatten</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">d</span> <span class="id" title="var">ds</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Sequences&nbsp;of&nbsp;instructions&nbsp;are&nbsp;ignored&nbsp;(operator&nbsp;";")&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;instruction_sequence&nbsp;";"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.dir_mem"><span class="id" title="projection">Raw_context.T.dir_mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_at"><span class="id" title="axiom">Pervasives.op_at</span></a> <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a> <span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#loop"><span class="id" title="variable">loop</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.op_plus"><span class="id" title="axiom">Pervasives.op_plus</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> 1) (<a class="idref" href="Tezos.Environment.html#Pervasives.op_at"><span class="id" title="axiom">Pervasives.op_at</span></a> <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a> <span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">ds</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.return_nil"><span class="id" title="axiom">Lwt.return_nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#loop"><span class="id" title="variable">loop</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tezos.Storage_functors.html#prefix"><span class="id" title="variable">prefix</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Make_set</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">R</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#REGISTER.signature"><span class="id" title="record">REGISTER.signature</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">N</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#NAME.signature"><span class="id" title="record">NAME.signature</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">elt</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">inited</span> := <a class="idref" href="Tezos.Environment.html#MBytes.of_string"><span class="id" title="axiom">MBytes.of_string</span></a> "inited" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">add</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init_set"><span class="id" title="projection">Raw_context.T.init_set</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Storage_functors.html#inited"><span class="id" title="variable">inited</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">del</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">function_parameter</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒ <a class="idref" href="Tezos.Storage_functors.html#add"><span class="id" title="variable">add</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒ <a class="idref" href="Tezos.Storage_functors.html#del"><span class="id" title="variable">del</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">clear</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys"><span class="id" title="variable">fold_keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">fold</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys"><span class="id" title="variable">fold_keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#mem"><span class="id" title="variable">mem</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">elements</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold"><span class="id" title="variable">fold</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tezos.Storage_functors.html#elt"><span class="id" title="variable">elt</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">__p_value</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Storage_functors.html#__p_value"><span class="id" title="variable">__p_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;top_level_evaluation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.mem</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.add</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">add</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.del</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">del</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.elements</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">elements</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.fold</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">fold</span></a><a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Data_set_storage.clear</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.Build_signature"><span class="id" title="constructor">clear</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Data_set_storage.signature"><span class="id" title="record">Data_set_storage.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Make_map</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">N</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#NAME.signature"><span class="id" title="record">NAME.signature</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">V</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#VALUE.signature"><span class="id" title="record">VALUE.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">tag_Non_iterable_indexed_data_storage</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">value</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Encoder</span> := <a class="idref" href="Tezos.Storage_functors.html#Make_encoder"><span class="id" title="definition">Make_encoder</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">of_bytes</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Encoder"><span class="id" title="variable">Encoder</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="projection">ENCODER.of_bytes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_bytes</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Encoder"><span class="id" title="variable">Encoder</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="projection">ENCODER.to_bytes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__b_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get"><span class="id" title="projection">Raw_context.T.get</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__key_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.absolute_key"><span class="id" title="projection">Raw_context.T.absolute_key</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="variable">of_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#__key_value"><span class="id" title="variable">__key_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#__b_value"><span class="id" title="variable">__b_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get_option"><span class="id" title="projection">Raw_context.T.get_option</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_none"><span class="id" title="axiom">Error_monad.return_none</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">__b_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__key_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.absolute_key"><span class="id" title="projection">Raw_context.T.absolute_key</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="variable">of_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#__key_value"><span class="id" title="variable">__key_value</span></a> <span class="id" title="var">__b_value</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.return_some"><span class="id" title="axiom">Error_monad.return_some</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">__error_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">__error_value</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set"><span class="id" title="projection">Raw_context.T.set</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init"><span class="id" title="projection">Raw_context.T.init</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init_set"><span class="id" title="projection">Raw_context.T.init_set</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">set_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set_option"><span class="id" title="projection">Raw_context.T.set_option</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) (<a class="idref" href="Tezos.Environment.html#Option.map"><span class="id" title="axiom">Option.map</span></a> <a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delete</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.delete"><span class="id" title="projection">Raw_context.T.delete</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">clear</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys"><span class="id" title="variable">fold_keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#__t_value"><span class="id" title="variable">__t_value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">fold</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys"><span class="id" title="variable">fold_keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#get"><span class="id" title="variable">get</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="var">v</span> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bindings</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold"><span class="id" title="variable">fold</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Storage_functors.html#value"><span class="id" title="variable">value</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">__p_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Storage_functors.html#__p_value"><span class="id" title="variable">__p_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fold_keys</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys"><span class="id" title="variable">fold_keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#mem"><span class="id" title="variable">mem</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">keys</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys"><span class="id" title="variable">fold_keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">__p_value</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Storage_functors.html#__p_value"><span class="id" title="variable">__p_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;top_level_evaluation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.tag_Non_iterable_indexed_data_storage</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">tag_Non_iterable_indexed_data_storage</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.mem</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.get</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">get</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.get_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">get_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.init</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">init</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.init_set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">init_set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.set_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">set_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.delete</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">delete</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.remove</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">remove</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.clear</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">clear</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.keys</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">keys</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.bindings</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">bindings</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.fold</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">fold</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.fold_keys</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">fold_keys</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.signature"><span class="id" title="record">Indexed_data_storage.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Make_carbonated_map</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">N</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#NAME.signature"><span class="id" title="record">NAME.signature</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">V</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#VALUE.signature"><span class="id" title="record">VALUE.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">tag_Non_iterable_indexed_carbonated_data_storage</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">value</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Encoder</span> := <a class="idref" href="Tezos.Storage_functors.html#Make_encoder"><span class="id" title="definition">Make_encoder</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">of_bytes</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Encoder"><span class="id" title="variable">Encoder</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="projection">ENCODER.of_bytes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_bytes</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Encoder"><span class="id" title="variable">Encoder</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="projection">ENCODER.to_bytes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">len_name</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Storage_functors.html#len_name"><span class="id" title="definition">len_name</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">data_name</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="definition">data_name</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#N"><span class="id" title="variable">N</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#NAME.name"><span class="id" title="projection">Storage_sigs.NAME.name</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consume_mem_gas</span> (<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Gas_limit_repr.html#read_bytes_cost"><span class="id" title="definition">Gas_limit_repr.read_bytes_cost</span></a> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">existing_size</span> (<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get_option"><span class="id" title="projection">Raw_context.T.get_option</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#len_name"><span class="id" title="variable">len_name</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">len</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">len</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#decode_len_value"><span class="id" title="definition">decode_len_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#len_name"><span class="id" title="variable">len_name</span></a> <span class="id" title="var">len</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consume_read_gas</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">get</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">len</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#get"><span class="id" title="variable">get</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#len_name"><span class="id" title="variable">len_name</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">len</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#decode_len_value"><span class="id" title="definition">decode_len_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#len_name"><span class="id" title="variable">len_name</span></a> <a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Gas_limit_repr.html#read_bytes_cost"><span class="id" title="definition">Gas_limit_repr.read_bytes_cost</span></a> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a>))) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consume_write_gas</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">set</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Environment.html#MBytes.t"><span class="id" title="axiom">MBytes.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__bytes_value</span> := <a class="idref" href="Tezos.Storage_functors.html#to_bytes"><span class="id" title="variable">to_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">len</span> := <a class="idref" href="Tezos.Environment.html#MBytes.length"><span class="id" title="axiom">MBytes.length</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Gas_limit_repr.html#write_bytes_cost"><span class="id" title="definition">Gas_limit_repr.write_bytes_cost</span></a> (<a class="idref" href="Tezos.Environment.html#Z.of_int"><span class="id" title="axiom">Z.of_int</span></a> <a class="idref" href="Tezos.Storage_functors.html#len"><span class="id" title="variable">len</span></a>))) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#set"><span class="id" title="variable">set</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#len_name"><span class="id" title="variable">len_name</span></a> (<a class="idref" href="Tezos.Storage_functors.html#encode_len_value"><span class="id" title="definition">encode_len_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consume_remove_gas</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">del</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.consume_gas"><span class="id" title="projection">Raw_context.T.consume_gas</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Gas_limit_repr.html#write_bytes_cost"><span class="id" title="definition">Gas_limit_repr.write_bytes_cost</span></a> <a class="idref" href="Tezos.Environment.html#Z.zero"><span class="id" title="axiom">Z.zero</span></a>)) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#del"><span class="id" title="variable">del</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#len_name"><span class="id" title="variable">len_name</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#consume_mem_gas"><span class="id" title="variable">consume_mem_gas</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">res</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#res"><span class="id" title="variable">res</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#consume_read_gas"><span class="id" title="variable">consume_read_gas</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get"><span class="id" title="projection">Raw_context.T.get</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__b_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.get"><span class="id" title="projection">Raw_context.T.get</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__key_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.absolute_key"><span class="id" title="projection">Raw_context.T.absolute_key</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">v</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="Tezos.Storage_functors.html#of_bytes"><span class="id" title="variable">of_bytes</span></a> <a class="idref" href="Tezos.Storage_functors.html#__key_value"><span class="id" title="variable">__key_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#__b_value"><span class="id" title="variable">__b_value</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#consume_mem_gas"><span class="id" title="variable">consume_mem_gas</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Storage_functors.html#unpack"><span class="id" title="variable">unpack</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">__exists</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.mem"><span class="id" title="projection">Raw_context.T.mem</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Storage_functors.html#__exists"><span class="id" title="variable">__exists</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#get"><span class="id" title="variable">get</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">prev_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#existing_size"><span class="id" title="variable">existing_size</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__bytes_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#consume_write_gas"><span class="id" title="variable">consume_write_gas</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set"><span class="id" title="projection">Raw_context.T.set</span></a>) (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.set"><span class="id" title="projection">Raw_context.T.set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">size_diff</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> (<a class="idref" href="Tezos.Environment.html#MBytes.length"><span class="id" title="axiom">MBytes.length</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a>) <a class="idref" href="Tezos.Storage_functors.html#prev_size"><span class="id" title="variable">prev_size</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#size_diff"><span class="id" title="variable">size_diff</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__bytes_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#consume_write_gas"><span class="id" title="variable">consume_write_gas</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init"><span class="id" title="projection">Raw_context.T.init</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init"><span class="id" title="projection">Raw_context.T.init</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">size</span> := <a class="idref" href="Tezos.Environment.html#MBytes.length"><span class="id" title="axiom">MBytes.length</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#size"><span class="id" title="variable">size</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a>) (<span class="id" title="var">v</span> : <a class="idref" href="Tezos.Raw_context.html#value"><span class="id" title="definition">Raw_context.value</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtgteq"><span class="id" title="axiom">Error_monad.op_gtgteq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.init_set"><span class="id" title="projection">Raw_context.T.init_set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">prev_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">existed</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#existing_size"><span class="id" title="variable">existing_size</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__bytes_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#consume_write_gas"><span class="id" title="variable">consume_write_gas</span></a> <a class="idref" href="Tezos.Storage_functors.html#init_set"><span class="id" title="variable">init_set</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#init_set"><span class="id" title="variable">init_set</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">size_diff</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> (<a class="idref" href="Tezos.Environment.html#MBytes.length"><span class="id" title="axiom">MBytes.length</span></a> <a class="idref" href="Tezos.Storage_functors.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a>) <a class="idref" href="Tezos.Storage_functors.html#prev_size"><span class="id" title="variable">prev_size</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#size_diff"><span class="id" title="variable">size_diff</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Storage_functors.html#existed"><span class="id" title="variable">existed</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <a class="idref" href="Tezos.Raw_context.html#key"><span class="id" title="definition">Raw_context.key</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtgteq"><span class="id" title="axiom">Error_monad.op_gtgteq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.remove"><span class="id" title="projection">Raw_context.T.remove</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">prev_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">existed</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#existing_size"><span class="id" title="variable">existing_size</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#consume_remove_gas"><span class="id" title="variable">consume_remove_gas</span></a> <a class="idref" href="Tezos.Storage_functors.html#remove"><span class="id" title="variable">remove</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#remove"><span class="id" title="variable">remove</span></a> <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#prev_size"><span class="id" title="variable">prev_size</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Storage_functors.html#existed"><span class="id" title="variable">existed</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delete</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">prev_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Storage_functors.html#existing_size"><span class="id" title="variable">existing_size</span></a> (<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#consume_remove_gas"><span class="id" title="variable">consume_remove_gas</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.delete"><span class="id" title="projection">Raw_context.T.delete</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Storage_functors.html#pack"><span class="id" title="variable">pack</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">c</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.delete"><span class="id" title="projection">Raw_context.T.delete</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Storage_functors.html#data_name"><span class="id" title="variable">data_name</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="axiom">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#Raw_context"><span class="id" title="variable">Raw_context</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.project"><span class="id" title="projection">Raw_context.T.project</span></a>) <a class="idref" href="Tezos.Storage_functors.html#c"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Tezos.Storage_functors.html#prev_size"><span class="id" title="variable">prev_size</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">set_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.context"><span class="id" title="projection">Raw_context.T.context</span></a>)) (<span class="id" title="var">i</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Raw_context.html#root_context"><span class="id" title="definition">Raw_context.root_context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Storage_functors.html#remove"><span class="id" title="variable">remove</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#init_set"><span class="id" title="variable">init_set</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;top_level_evaluation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.tag_Non_iterable_indexed_carbonated_data_storage</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">tag_Non_iterable_indexed_carbonated_data_storage</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.mem</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.get</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">get</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.get_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">get_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.init</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">init</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.init_set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">init_set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.set_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">set_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.delete</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">delete</span></a><a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Non_iterable_indexed_carbonated_data_storage.remove</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.Build_signature"><span class="id" title="constructor">remove</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Non_iterable_indexed_carbonated_data_storage.signature"><span class="id" title="record">Non_iterable_indexed_carbonated_data_storage.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#V"><span class="id" title="variable">V</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#VALUE.t"><span class="id" title="projection">Storage_sigs.VALUE.t</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_raw_context.clear</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">clear</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_raw_context.fold_keys</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">fold_keys</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_raw_context.keys</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">keys</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_raw_context.resolve</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">resolve</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_raw_context.remove_rec</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">remove_rec</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_raw_context.copy</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">copy</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_raw_context.Make_set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Make_set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_raw_context.Make_map</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Make_map</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_raw_context.Make_carbonated_map</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Make_carbonated_map</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_raw_context.Raw_context</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">(|</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">Raw_context</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.Build_signature"><span class="id" title="constructor">|)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_raw_context.signature"><span class="id" title="record">Indexed_raw_context.signature</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Raw_context.html#T.t"><span class="id" title="projection">Raw_context.T.t</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">INDEX.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <span class="id" title="keyword">Set</span>) ⇒ <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#I"><span class="id" title="variable">I</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#ipath"><span class="id" title="projection">INDEX.ipath</span></a>) <a class="idref" href="Tezos.Storage_functors.html#a"><span class="id" title="variable">a</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>).<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="WRAPPER"><span class="id" title="module">WRAPPER</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="WRAPPER.signature"><span class="id" title="record">signature</span></a> {<span class="id" title="var">t</span> <span class="id" title="var">key</span> : <span class="id" title="keyword">Set</span>} : <span class="id" title="keyword">Set</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> := <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">key</span> := <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="WRAPPER.wrap"><span class="id" title="projection">wrap</span></a> : <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="method">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="method">key</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="WRAPPER.unwrap"><span class="id" title="projection">unwrap</span></a> : <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="method">key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="method">t</span></a>;<br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <a class="idref" href="Tezos.Storage_functors.html#WRAPPER.signature"><span class="id" title="record">signature</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Tezos.Storage_functors.html#WRAPPER"><span class="id" title="module">WRAPPER</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="Wrap_indexed_data_storage"><span class="id" title="definition">Wrap_indexed_data_storage</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">C</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">{'</span></a><span class="id" title="notation">[</span><span class="id" title="var">t</span><span class="id" title="notation">,</span> <span class="id" title="var">key</span><span class="id" title="notation">,</span> <span class="id" title="var">value</span><span class="id" title="notation">]</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.signature"><span class="id" title="record">Indexed_data_storage.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a> <a class="idref" href="Tezos.Storage_functors.html#value"><span class="id" title="variable">value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#7804eb5cb726833591220add40ff9062"><span class="id" title="notation">}</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">K</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#signature"><span class="id" title="record">WRAPPER.signature</span></a> <a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.key"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.key</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="keyword">let</span> <span class="id" title="var">tag_Non_iterable_indexed_data_storage</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">t</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.t"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">context</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.t"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">key</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">value</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>)) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.mem"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.mem</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#wrap"><span class="id" title="projection">WRAPPER.wrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#wrap"><span class="id" title="projection">WRAPPER.wrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">get_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.get_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.get_option</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#wrap"><span class="id" title="projection">WRAPPER.wrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#wrap"><span class="id" title="projection">WRAPPER.wrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#wrap"><span class="id" title="projection">WRAPPER.wrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">init_set</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.init_set"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.init_set</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#wrap"><span class="id" title="projection">WRAPPER.wrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">set_option</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">v</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.set_option"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.set_option</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#wrap"><span class="id" title="projection">WRAPPER.wrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delete</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>)) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.delete"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.delete</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#wrap"><span class="id" title="projection">WRAPPER.wrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">remove</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>)) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.remove"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.remove</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#wrap"><span class="id" title="projection">WRAPPER.wrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">clear</span> (<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Raw_context.html#t"><span class="id" title="definition">Raw_context.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.clear"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.clear</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="tactic">fold</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>)) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.fold"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.fold</span></a>) <a class="idref" href="Tezos.Storage_functors.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#unwrap"><span class="id" title="projection">WRAPPER.unwrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">bindings</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold"><span class="id" title="variable">fold</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Storage_functors.html#value"><span class="id" title="variable">value</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">__p_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Storage_functors.html#__p_value"><span class="id" title="variable">__p_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Storage_functors.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fold_keys</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>)) (<span class="id" title="var">init</span> : <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> <a class="idref" href="Tezos.Storage_functors.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.fold_keys"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.fold_keys</span></a>) <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Tezos.Storage_functors.html#init"><span class="id" title="variable">init</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#unwrap"><span class="id" title="projection">WRAPPER.unwrap</span></a>) <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">k</span> ⇒ <a class="idref" href="Tezos.Storage_functors.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="Tezos.Storage_functors.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">keys</span> (<span class="id" title="var">s</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.context"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.context</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="axiom">Lwt.t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_functors.html#fold_keys"><span class="id" title="variable">fold_keys</span></a> <a class="idref" href="Tezos.Storage_functors.html#s"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="Tezos.Storage_functors.html#key"><span class="id" title="variable">key</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">__p_value</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="axiom">Lwt.__return</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Storage_functors.html#__p_value"><span class="id" title="variable">__p_value</span></a> <a class="idref" href="Tezos.Storage_functors.html#acc"><span class="id" title="variable">acc</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">_</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.tag_Non_iterable_indexed_data_storage</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">tag_Non_iterable_indexed_data_storage</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.mem</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">mem</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.get</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">get</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.get_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">get_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.init</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">init</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.init_set</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">init_set</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.set_option</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">set_option</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.delete</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">delete</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.remove</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">remove</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.clear</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">clear</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.keys</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">keys</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.bindings</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">bindings</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.fold</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">fold</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">Storage_sigs.Indexed_data_storage.fold_keys</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">{</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">_</span></a><a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">}</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.Build_signature"><span class="id" title="constructor">fold_keys</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.signature"><span class="id" title="record">Indexed_data_storage.signature</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.t"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.t</span></a>) <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#K"><span class="id" title="variable">K</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_functors.html#t"><span class="id" title="projection">WRAPPER.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Storage_functors.html#C"><span class="id" title="variable">C</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Storage_sigs.html#Indexed_data_storage.value"><span class="id" title="projection">Storage_sigs.Indexed_data_storage.value</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a>).<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>