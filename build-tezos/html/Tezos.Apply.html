<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Tezos.Apply</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Tezos.Apply</h1>

<div class="code">
</div>

<div class="doc">
Generated by coq-of-ocaml 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">OCaml.OCaml</span>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Set</span> <span class="id" title="var">Primitive</span> <span class="id" title="var">Projections</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="var">Guard</span> <span class="id" title="var">Checking</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Tezos.Environment.html#"><span class="id" title="library">Tezos.Environment</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Environment.Notations</span>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Alpha_context.html#"><span class="id" title="library">Tezos.Alpha_context</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Amendment.html#"><span class="id" title="library">Tezos.Amendment</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Apply_results.html#"><span class="id" title="library">Tezos.Apply_results</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Baking.html#"><span class="id" title="library">Tezos.Baking</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Blinded_public_key_hash.html#"><span class="id" title="library">Tezos.Blinded_public_key_hash</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Michelson_v1_gas.html#"><span class="id" title="library">Tezos.Michelson_v1_gas</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Nonce_hash.html#"><span class="id" title="library">Tezos.Nonce_hash</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Script_interpreter.html#"><span class="id" title="library">Tezos.Script_interpreter</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Script_ir_translator.html#"><span class="id" title="library">Tezos.Script_ir_translator</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Script_typed_ir.html#"><span class="id" title="library">Tezos.Script_typed_ir</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Storage_mli.html#"><span class="id" title="library">Tezos.Storage_mli</span></a>. <span class="id" title="keyword">Module</span> <a name="Storage"><span class="id" title="module">Storage</span></a> := <a class="idref" href="Tezos.Storage_mli.html#"><span class="id" title="module">Storage_mli</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Alpha_context</span>.<br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Top-level&nbsp;evaluations&nbsp;are&nbsp;ignored&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;top_level_evaluation&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Apply_results</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="apply_manager_operation_content"><span class="id" title="definition">apply_manager_operation_content</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#t"><span class="id" title="definition">Alpha_context.t</span></a>) (<span class="id" title="var">mode</span> : <a class="idref" href="Tezos.Script_ir_translator.html#unparsing_mode"><span class="id" title="inductive">Script_ir_translator.unparsing_mode</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">payer</span> : <a class="idref" href="Tezos.Alpha_context.html#Contract.t"><span class="id" title="inductive">Alpha_context.Contract.t</span></a>) (<span class="id" title="var">source</span> : <a class="idref" href="Tezos.Alpha_context.html#Contract.t"><span class="id" title="inductive">Alpha_context.Contract.t</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>)) (<span class="id" title="var">internal</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">operation</span> : <a class="idref" href="Tezos.Alpha_context.html#manager_operation"><span class="id" title="inductive">Alpha_context.manager_operation</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result"><span class="id" title="inductive">Apply_results.successful_manager_operation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Alpha_context.html#packed_internal_operation"><span class="id" title="inductive">Alpha_context.packed_internal_operation</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">before_operation</span> := <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Contract.must_exist"><span class="id" title="definition">Alpha_context.Contract.must_exist</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#source"><span class="id" title="variable">source</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Gas.consume"><span class="id" title="definition">Alpha_context.Gas.consume</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Michelson_v1_gas.html#Cost_of.manager_operation"><span class="id" title="definition">Michelson_v1_gas.Cost_of.manager_operation</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Alpha_context.html#Reveal"><span class="id" title="constructor">Alpha_context.Reveal</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Reveal_result"><span class="id" title="constructor">Apply_results.Reveal_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Reveal_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Reveal_result.consumed_gas</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Reveal_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Reveal_result.Build"><span class="id" title="constructor">Alpha_context.Gas.consumed</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Reveal_result.Build"><span class="id" title="constructor">before_operation</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Reveal_result.Build"><span class="id" title="constructor">ctxt</span></a> |}<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Transaction"><span class="id" title="constructor">Alpha_context.Transaction</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">Alpha_context.manager_operation.Transaction.amount</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">amount</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">Alpha_context.manager_operation.Transaction.parameters</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">parameters</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">Alpha_context.manager_operation.Transaction.entrypoint</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">entrypoint</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">Alpha_context.manager_operation.Transaction.destination</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">destination</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">|}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Contract.spend"><span class="id" title="definition">Alpha_context.Contract.spend</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#source"><span class="id" title="variable">source</span></a> <span class="id" title="var">amount</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">maybe_burn_balance_update</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">allocated_destination_contract</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Alpha_context.html#Contract.is_implicit"><span class="id" title="definition">Alpha_context.Contract.is_implicit</span></a> <span class="id" title="var">destination</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Contract.allocated"><span class="id" title="definition">Alpha_context.Contract.allocated</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">destination</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">origination_burn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Fees.origination_burn"><span class="id" title="definition">Alpha_context.Fees.origination_burn</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Contract"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply.html#payer"><span class="id" title="variable">payer</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Debited"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply.html#origination_burn"><span class="id" title="variable">origination_burn</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Contract.credit"><span class="id" title="definition">Alpha_context.Contract.credit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">destination</span> <span class="id" title="var">amount</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">script</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Contract.get_script"><span class="id" title="definition">Alpha_context.Contract.get_script</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">destination</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#script"><span class="id" title="variable">script</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">entrypoint</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| "default" ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">entrypoint</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">arg</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Script.force_decode_in_context"><span class="id" title="definition">Alpha_context.Script.force_decode_in_context</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">parameters</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cost_arg</span> := <a class="idref" href="Tezos.Alpha_context.html#Script.deserialized_cost"><span class="id" title="definition">Alpha_context.Script.deserialized_cost</span></a> <a class="idref" href="Tezos.Apply.html#arg"><span class="id" title="variable">arg</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Gas.consume"><span class="id" title="definition">Alpha_context.Gas.consume</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#cost_arg"><span class="id" title="variable">cost_arg</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Environment.html#Micheline.root"><span class="id" title="axiom">Micheline.root</span></a> <a class="idref" href="Tezos.Apply.html#arg"><span class="id" title="variable">arg</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Micheline.Prim"><span class="id" title="constructor">Micheline.Prim</span></a> <span class="id" title="var">_</span> <a class="idref" href="Tezos.Alpha_context.html#Script.D_Unit"><span class="id" title="constructor">Alpha_context.Script.D_Unit</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__result_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Transaction_result"><span class="id" title="constructor">Apply_results.Transaction_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.storage</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">None</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.big_map_diff</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">None</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Pervasives.op_at</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">amount</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">destination</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">amount</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">]</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">maybe_burn_balance_update</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.originated_contracts</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">nil</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.consumed_gas</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Gas.consumed</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">before_operation</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">ctxt</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.storage_size</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Z.zero</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.paid_storage_size_diff</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Z.zero</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.allocated_destination_contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">allocated_destination_contract</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#__result_value"><span class="id" title="variable">__result_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">script</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">parameter</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Script.force_decode_in_context"><span class="id" title="definition">Alpha_context.Script.force_decode_in_context</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">parameters</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cost_parameter</span> := <a class="idref" href="Tezos.Alpha_context.html#Script.deserialized_cost"><span class="id" title="definition">Alpha_context.Script.deserialized_cost</span></a> <a class="idref" href="Tezos.Apply.html#parameter"><span class="id" title="variable">parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Gas.consume"><span class="id" title="definition">Alpha_context.Gas.consume</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#cost_parameter"><span class="id" title="variable">cost_parameter</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">step_constants</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">Script_interpreter.step_constants.source</span></a> <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">Script_interpreter.step_constants.payer</span></a> <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">payer</span></a><a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">Script_interpreter.step_constants.self</span></a> <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">destination</span></a><a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">Script_interpreter.step_constants.amount</span></a> <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">amount</span></a><a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">Script_interpreter.step_constants.chain_id</span></a> <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_interpreter.html#step_constants.Build"><span class="id" title="constructor">chain_id</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">Script_interpreter.execution_result.ctxt</span></a> <a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">ctxt</span></a><a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">Script_interpreter.execution_result.storage</span></a> <a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">storage</span></a><a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">Script_interpreter.execution_result.big_map_diff</span></a> <a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">big_map_diff</span></a><a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">Script_interpreter.execution_result.operations</span></a> <a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">operations</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_interpreter.html#execution_result.Build"><span class="id" title="constructor">|}</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_interpreter.html#execute_wrapper"><span class="id" title="definition">Script_interpreter.execute_wrapper</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#step_constants"><span class="id" title="variable">step_constants</span></a> <a class="idref" href="Tezos.Apply.html#script"><span class="id" title="variable">script</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">entrypoint</span> <a class="idref" href="Tezos.Apply.html#parameter"><span class="id" title="variable">parameter</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Contract.update_script_storage"><span class="id" title="definition">Alpha_context.Contract.update_script_storage</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">destination</span> <a class="idref" href="Tezos.Apply.html#storage"><span class="id" title="variable">storage</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#big_map_diff"><span class="id" title="variable">big_map_diff</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">new_size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">paid_storage_size_diff</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">fees</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Fees.record_paid_storage_space"><span class="id" title="definition">Alpha_context.Fees.record_paid_storage_space</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">destination</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">originated_contracts</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Contract.originated_from_current_nonce"><span class="id" title="definition">Alpha_context.Contract.originated_from_current_nonce</span></a> <a class="idref" href="Tezos.Apply.html#before_operation"><span class="id" title="variable">before_operation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__result_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Transaction_result"><span class="id" title="constructor">Apply_results.Transaction_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.storage</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">storage</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.big_map_diff</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">big_map_diff</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">payer</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">fees</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">amount</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">destination</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">amount</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.originated_contracts</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">originated_contracts</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.consumed_gas</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Alpha_context.Gas.consumed</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">before_operation</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">ctxt</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.storage_size</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">new_size</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.paid_storage_size_diff</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">paid_storage_size_diff</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Transaction_result.allocated_destination_contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Transaction_result.Build"><span class="id" title="constructor">allocated_destination_contract</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#__result_value"><span class="id" title="variable">__result_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#operations"><span class="id" title="variable">operations</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Origination"><span class="id" title="constructor">Alpha_context.Origination</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">Alpha_context.manager_operation.Origination.delegate</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">delegate</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">Alpha_context.manager_operation.Origination.script</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">script</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">Alpha_context.manager_operation.Origination.credit</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">credit</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">Alpha_context.manager_operation.Origination.preorigination</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">preorigination</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">|}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">unparsed_storage</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Script.force_decode_in_context"><span class="id" title="definition">Alpha_context.Script.force_decode_in_context</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">script</span>.(<a class="idref" href="Tezos.Alpha_context.html#Script.t.storage"><span class="id" title="projection">Alpha_context.Script.t.storage</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Gas.consume"><span class="id" title="definition">Alpha_context.Gas.consume</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Script.deserialized_cost"><span class="id" title="definition">Alpha_context.Script.deserialized_cost</span></a> <a class="idref" href="Tezos.Apply.html#unparsed_storage"><span class="id" title="variable">unparsed_storage</span></a>)) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">unparsed_code</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Script.force_decode_in_context"><span class="id" title="definition">Alpha_context.Script.force_decode_in_context</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">script</span>.(<a class="idref" href="Tezos.Alpha_context.html#Script.t.code"><span class="id" title="projection">Alpha_context.Script.t.code</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Gas.consume"><span class="id" title="definition">Alpha_context.Gas.consume</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Script.deserialized_cost"><span class="id" title="definition">Alpha_context.Script.deserialized_cost</span></a> <a class="idref" href="Tezos.Apply.html#unparsed_code"><span class="id" title="variable">unparsed_code</span></a>)) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Script_ir_translator.html#Ex_script"><span class="id" title="constructor">Script_ir_translator.Ex_script</span></a> <span class="id" title="var">parsed_script</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_ir_translator.html#parse_script"><span class="id" title="definition">Script_ir_translator.parse_script</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="var">script</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">__Ex_script_'b</span> <span class="id" title="notation">[</span><span class="id" title="var">parsed_script</span><span class="id" title="notation">,</span> <span class="id" title="var">ctxt</span><span class="id" title="notation">]</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="var">A</span> := <span class="id" title="keyword">Set</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">__Ex_script_'b</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[</span><a class="idref" href="Tezos.Script_typed_ir.html#script"><span class="id" title="definition">Script_typed_ir.script</span></a> <a class="idref" href="Tezos.Apply.html#__Ex_script_'b"><span class="id" title="variable">__Ex_script_'b</span></a> <span class="id" title="notation">**</span> <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a><span class="id" title="notation">]</span>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[</span><a class="idref" href="Tezos.Apply.html#parsed_script"><span class="id" title="variable">parsed_script</span></a><span class="id" title="notation">,</span> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><span class="id" title="notation">]</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">to_duplicate</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_ir_translator.html#collect_big_maps"><span class="id" title="definition">Script_ir_translator.collect_big_maps</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#parsed_script"><span class="id" title="variable">parsed_script</span></a>.(<a class="idref" href="Tezos.Script_typed_ir.html#script.storage_type"><span class="id" title="projection">Script_typed_ir.script.storage_type</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#parsed_script"><span class="id" title="variable">parsed_script</span></a>.(<a class="idref" href="Tezos.Script_typed_ir.html#script.storage"><span class="id" title="projection">Script_typed_ir.script.storage</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">to_update</span> := <a class="idref" href="Tezos.Script_ir_translator.html#no_big_map_id"><span class="id" title="definition">Script_ir_translator.no_big_map_id</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">storage</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">big_map_diff</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_ir_translator.html#extract_big_map_diff"><span class="id" title="definition">Script_ir_translator.extract_big_map_diff</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_ir_translator.html#Optimized"><span class="id" title="constructor">Script_ir_translator.Optimized</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="Tezos.Apply.html#to_duplicate"><span class="id" title="variable">to_duplicate</span></a> <a class="idref" href="Tezos.Apply.html#to_update"><span class="id" title="variable">to_update</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#parsed_script"><span class="id" title="variable">parsed_script</span></a>.(<a class="idref" href="Tezos.Script_typed_ir.html#script.storage_type"><span class="id" title="projection">Script_typed_ir.script.storage_type</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#parsed_script"><span class="id" title="variable">parsed_script</span></a>.(<a class="idref" href="Tezos.Script_typed_ir.html#script.storage"><span class="id" title="projection">Script_typed_ir.script.storage</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">storage</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Script_ir_translator.html#unparse_data"><span class="id" title="definition">Script_ir_translator.unparse_data</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Script_ir_translator.html#Optimized"><span class="id" title="constructor">Script_ir_translator.Optimized</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#parsed_script"><span class="id" title="variable">parsed_script</span></a>.(<a class="idref" href="Tezos.Script_typed_ir.html#script.storage_type"><span class="id" title="projection">Script_typed_ir.script.storage_type</span></a>) <a class="idref" href="Tezos.Apply.html#storage"><span class="id" title="variable">storage</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">storage</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Script.__lazy_expr_value"><span class="id" title="definition">Alpha_context.Script.__lazy_expr_value</span></a> (<a class="idref" href="Tezos.Environment.html#Micheline.strip_locations"><span class="id" title="axiom">Micheline.strip_locations</span></a> <a class="idref" href="Tezos.Apply.html#storage"><span class="id" title="variable">storage</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">script</span> := <a class="idref" href="Tezos.Alpha_context.html#Script.t.with_storage"><span class="id" title="definition">Alpha_context.Script.t.with_storage</span></a> <a class="idref" href="Tezos.Apply.html#storage"><span class="id" title="variable">storage</span></a> <span class="id" title="var">script</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Contract.spend"><span class="id" title="definition">Alpha_context.Contract.spend</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#source"><span class="id" title="variable">source</span></a> <span class="id" title="var">credit</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">contract</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">preorigination</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">contract</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Sequences&nbsp;of&nbsp;instructions&nbsp;are&nbsp;ignored&nbsp;(operator&nbsp;";")&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;instruction_sequence&nbsp;";"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">contract</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Alpha_context.html#Contract.fresh_contract_from_current_nonce"><span class="id" title="definition">Alpha_context.Contract.fresh_contract_from_current_nonce</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Contract.originate"><span class="id" title="definition">Alpha_context.Contract.originate</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="var">credit</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#script"><span class="id" title="variable">script</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#big_map_diff"><span class="id" title="variable">big_map_diff</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">delegate</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">origination_burn</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Fees.origination_burn"><span class="id" title="definition">Alpha_context.Fees.origination_burn</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">size</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">paid_storage_size_diff</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">fees</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Fees.record_paid_storage_space"><span class="id" title="definition">Alpha_context.Fees.record_paid_storage_space</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#contract"><span class="id" title="variable">contract</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__result_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Origination_result"><span class="id" title="constructor">Apply_results.Origination_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Origination_result.big_map_diff</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">big_map_diff</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Origination_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">payer</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">fees</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">payer</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">origination_burn</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">credit</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">contract</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">credit</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Origination_result.originated_contracts</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">[</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">contract</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Origination_result.consumed_gas</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Alpha_context.Gas.consumed</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">before_operation</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">ctxt</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Origination_result.storage_size</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">size</span></a><a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Origination_result.paid_storage_size_diff</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Origination_result.Build"><span class="id" title="constructor">paid_storage_size_diff</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#__result_value"><span class="id" title="variable">__result_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Alpha_context.html#Delegation"><span class="id" title="constructor">Alpha_context.Delegation</span></a> <span class="id" title="var">delegate</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Delegate.set"><span class="id" title="definition">Alpha_context.Delegate.set</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#source"><span class="id" title="variable">source</span></a> <span class="id" title="var">delegate</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Delegation_result"><span class="id" title="constructor">Apply_results.Delegation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Delegation_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Delegation_result.consumed_gas</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Delegation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Delegation_result.Build"><span class="id" title="constructor">Alpha_context.Gas.consumed</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Delegation_result.Build"><span class="id" title="constructor">before_operation</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Delegation_result.Build"><span class="id" title="constructor">ctxt</span></a> |}<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="success_or_failure"><span class="id" title="inductive">success_or_failure</span></a> : <span class="id" title="keyword">Set</span> :=<br/>
| <a name="Success"><span class="id" title="constructor">Success</span></a> : <a class="idref" href="Tezos.Alpha_context.html#t"><span class="id" title="definition">Alpha_context.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a> <a class="idref" href="Tezos.Apply.html#success_or_failure"><span class="id" title="inductive">success_or_failure</span></a><br/>
| <a name="Failure"><span class="id" title="constructor">Failure</span></a> : <a class="idref" href="Tezos.Apply.html#success_or_failure"><span class="id" title="inductive">success_or_failure</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="apply_internal_manager_operations"><span class="id" title="definition">apply_internal_manager_operations</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#t"><span class="id" title="definition">Alpha_context.t</span></a>) (<span class="id" title="var">mode</span> : <a class="idref" href="Tezos.Script_ir_translator.html#unparsing_mode"><span class="id" title="inductive">Script_ir_translator.unparsing_mode</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">payer</span> : <a class="idref" href="Tezos.Alpha_context.html#Contract.t"><span class="id" title="inductive">Alpha_context.Contract.t</span></a>) (<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">ops</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Alpha_context.html#packed_internal_operation"><span class="id" title="inductive">Alpha_context.packed_internal_operation</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply.html#success_or_failure"><span class="id" title="inductive">success_or_failure</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Apply_results.html#packed_internal_operation_result"><span class="id" title="inductive">Apply_results.packed_internal_operation_result</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#t"><span class="id" title="definition">Alpha_context.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">applied</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Apply_results.html#packed_internal_operation_result"><span class="id" title="inductive">Apply_results.packed_internal_operation_result</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">worklist</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Alpha_context.html#packed_internal_operation"><span class="id" title="inductive">Alpha_context.packed_internal_operation</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">ctxt</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply.html#success_or_failure"><span class="id" title="inductive">success_or_failure</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Apply_results.html#packed_internal_operation_result"><span class="id" title="inductive">Apply_results.packed_internal_operation_result</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#worklist"><span class="id" title="variable">worklist</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Apply.html#Success"><span class="id" title="constructor">Success</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Environment.html#List.rev"><span class="id" title="axiom">List.rev</span></a> <a class="idref" href="Tezos.Apply.html#applied"><span class="id" title="variable">applied</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Internal_operation"><span class="id" title="constructor">Alpha_context.Internal_operation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">Alpha_context.internal_operation.source</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">Alpha_context.internal_operation.operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">operation</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">Alpha_context.internal_operation.nonce</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">__nonce_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.internal_operation.Build"><span class="id" title="constructor">|}</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">op</span>)) <span class="id" title="var">rest</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Alpha_context.html#internal_nonce_already_recorded"><span class="id" title="definition">Alpha_context.internal_nonce_already_recorded</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">__nonce_value</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#record_internal_nonce"><span class="id" title="definition">Alpha_context.record_internal_nonce</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">__nonce_value</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply_manager_operation_content"><span class="id" title="definition">apply_manager_operation_content</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#payer"><span class="id" title="variable">payer</span></a> <span class="id" title="var">source</span> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">operation</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">errors</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__result_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Internal_operation_result"><span class="id" title="constructor">Apply_results.Internal_operation_result</span></a> <span class="id" title="var">op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Failed"><span class="id" title="constructor">Apply_results.Failed</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#manager_kind"><span class="id" title="definition">Alpha_context.manager_kind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">op</span>.(<a class="idref" href="Tezos.Alpha_context.html#internal_operation.operation"><span class="id" title="projection">Alpha_context.internal_operation.operation</span></a>)) <span class="id" title="var">errors</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">skipped</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#List.rev_map"><span class="id" title="axiom">List.rev_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="Tezos.Alpha_context.html#Internal_operation"><span class="id" title="constructor">Alpha_context.Internal_operation</span></a> <span class="id" title="var">op</span> := <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Internal_operation_result"><span class="id" title="constructor">Apply_results.Internal_operation_result</span></a> <span class="id" title="var">op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Skipped"><span class="id" title="constructor">Apply_results.Skipped</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#manager_kind"><span class="id" title="definition">Alpha_context.manager_kind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">op</span>.(<a class="idref" href="Tezos.Alpha_context.html#internal_operation.operation"><span class="id" title="projection">Alpha_context.internal_operation.operation</span></a>)))) <span class="id" title="var">rest</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#Failure"><span class="id" title="constructor">Failure</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Environment.html#List.rev"><span class="id" title="axiom">List.rev</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.op_at"><span class="id" title="axiom">Pervasives.op_at</span></a> <a class="idref" href="Tezos.Apply.html#skipped"><span class="id" title="variable">skipped</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Apply.html#__result_value"><span class="id" title="variable">__result_value</span></a> <a class="idref" href="Tezos.Apply.html#applied"><span class="id" title="variable">applied</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__result_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">emitted</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply"><span class="id" title="variable">apply</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Internal_operation_result"><span class="id" title="constructor">Apply_results.Internal_operation_result</span></a> <span class="id" title="var">op</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Applied"><span class="id" title="constructor">Apply_results.Applied</span></a> <span class="id" title="var">__result_value</span>)) <a class="idref" href="Tezos.Apply.html#applied"><span class="id" title="variable">applied</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_at"><span class="id" title="axiom">Pervasives.op_at</span></a> <span class="id" title="var">rest</span> <span class="id" title="var">emitted</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply"><span class="id" title="variable">apply</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tezos.Apply.html#ops"><span class="id" title="variable">ops</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="precheck_manager_contents"><span class="id" title="definition">precheck_manager_contents</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">raw_operation</span> : <a class="idref" href="Tezos.Alpha_context.html#operation"><span class="id" title="definition">Alpha_context.operation</span></a>) (<span class="id" title="var">op</span> : <a class="idref" href="Tezos.Alpha_context.html#contents"><span class="id" title="inductive">Alpha_context.contents</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#op"><span class="id" title="variable">op</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Manager_operation"><span class="id" title="constructor">Alpha_context.Manager_operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.source</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.fee</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.counter</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">counter</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">operation</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.gas_limit</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">gas_limit</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.storage_limit</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">storage_limit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">|}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Gas.check_limit"><span class="id" title="definition">Alpha_context.Gas.check_limit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">gas_limit</span>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#Gas.set_limit"><span class="id" title="definition">Alpha_context.Gas.set_limit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">gas_limit</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Fees.check_storage_limit"><span class="id" title="definition">Alpha_context.Fees.check_storage_limit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">storage_limit</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Contract.must_be_allocated"><span class="id" title="definition">Alpha_context.Contract.must_be_allocated</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Contract.implicit_contract"><span class="id" title="definition">Alpha_context.Contract.implicit_contract</span></a> <span class="id" title="var">source</span>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Contract.check_counter_increment"><span class="id" title="definition">Alpha_context.Contract.check_counter_increment</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">source</span> <span class="id" title="var">counter</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">operation</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Alpha_context.html#Reveal"><span class="id" title="constructor">Alpha_context.Reveal</span></a> <span class="id" title="var">pk</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Contract.reveal_manager_key"><span class="id" title="definition">Alpha_context.Contract.reveal_manager_key</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">source</span> <span class="id" title="var">pk</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Transaction"><span class="id" title="constructor">Alpha_context.Transaction</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">Alpha_context.manager_operation.Transaction.parameters</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">parameters</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Transaction.Build"><span class="id" title="constructor">|}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="Tezos.Environment.html#Error_monad.record_trace"><span class="id" title="axiom">Error_monad.record_trace</span></a> <span class="id" title="axiom">extensible_type_value</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Gas.check_enough"><span class="id" title="definition">Alpha_context.Gas.check_enough</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Script.minimal_deserialize_cost"><span class="id" title="definition">Alpha_context.Script.minimal_deserialize_cost</span></a> <span class="id" title="var">parameters</span>))) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtgtpipequestion"><span class="id" title="axiom">Error_monad.op_gtgtpipequestion</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="Tezos.Environment.html#Error_monad.trace"><span class="id" title="axiom">Error_monad.trace</span></a> <span class="id" title="axiom">extensible_type_value</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Script.force_decode_in_context"><span class="id" title="definition">Alpha_context.Script.force_decode_in_context</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">parameters</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_arg</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Origination"><span class="id" title="constructor">Alpha_context.Origination</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">Alpha_context.manager_operation.Origination.script</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">script</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.manager_operation.Origination.Build"><span class="id" title="constructor">|}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="Tezos.Environment.html#Error_monad.record_trace"><span class="id" title="axiom">Error_monad.record_trace</span></a> <span class="id" title="axiom">extensible_type_value</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Gas.consume"><span class="id" title="definition">Alpha_context.Gas.consume</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Script.minimal_deserialize_cost"><span class="id" title="definition">Alpha_context.Script.minimal_deserialize_cost</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">script</span>.(<a class="idref" href="Tezos.Alpha_context.html#Script.t.code"><span class="id" title="projection">Alpha_context.Script.t.code</span></a>)) <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Gas.check_enough"><span class="id" title="definition">Alpha_context.Gas.check_enough</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Script.minimal_deserialize_cost"><span class="id" title="definition">Alpha_context.Script.minimal_deserialize_cost</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">script</span>.(<a class="idref" href="Tezos.Alpha_context.html#Script.t.storage"><span class="id" title="projection">Alpha_context.Script.t.storage</span></a>)))) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_code</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.trace"><span class="id" title="axiom">Error_monad.trace</span></a> <span class="id" title="axiom">extensible_type_value</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Script.force_decode_in_context"><span class="id" title="definition">Alpha_context.Script.force_decode_in_context</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">script</span>.(<a class="idref" href="Tezos.Alpha_context.html#Script.t.code"><span class="id" title="projection">Alpha_context.Script.t.code</span></a>)) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.op_gtgtpipequestion"><span class="id" title="axiom">Error_monad.op_gtgtpipequestion</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="Tezos.Environment.html#Error_monad.trace"><span class="id" title="axiom">Error_monad.trace</span></a> <span class="id" title="axiom">extensible_type_value</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Script.force_decode_in_context"><span class="id" title="definition">Alpha_context.Script.force_decode_in_context</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">script</span>.(<a class="idref" href="Tezos.Alpha_context.html#Script.t.storage"><span class="id" title="projection">Alpha_context.Script.t.storage</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_storage</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">public_key</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Contract.get_manager_key"><span class="id" title="definition">Alpha_context.Contract.get_manager_key</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">source</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.check_signature"><span class="id" title="definition">Alpha_context.Operation.check_signature</span></a> <a class="idref" href="Tezos.Apply.html#public_key"><span class="id" title="variable">public_key</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#raw_operation"><span class="id" title="variable">raw_operation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Contract.increment_counter"><span class="id" title="definition">Alpha_context.Contract.increment_counter</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">source</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Contract.spend"><span class="id" title="definition">Alpha_context.Contract.spend</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Contract.implicit_contract"><span class="id" title="definition">Alpha_context.Contract.implicit_contract</span></a> <span class="id" title="var">source</span>) <span class="id" title="var">fee</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#add_fees"><span class="id" title="definition">Alpha_context.add_fees</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">fee</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="axiom">unreachable_gadt_branch</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="apply_manager_contents"><span class="id" title="definition">apply_manager_contents</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">mode</span> : <a class="idref" href="Tezos.Script_ir_translator.html#unparsing_mode"><span class="id" title="inductive">Script_ir_translator.unparsing_mode</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>)) (<span class="id" title="var">op</span> : <a class="idref" href="Tezos.Alpha_context.html#contents"><span class="id" title="inductive">Alpha_context.contents</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply.html#success_or_failure"><span class="id" title="inductive">success_or_failure</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Apply_results.html#manager_operation_result"><span class="id" title="inductive">Apply_results.manager_operation_result</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Apply_results.html#packed_internal_operation_result"><span class="id" title="inductive">Apply_results.packed_internal_operation_result</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#op"><span class="id" title="variable">op</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Manager_operation"><span class="id" title="constructor">Alpha_context.Manager_operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.source</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">operation</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.gas_limit</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">gas_limit</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.storage_limit</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">storage_limit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">|}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#Gas.set_limit"><span class="id" title="definition">Alpha_context.Gas.set_limit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">gas_limit</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#Fees.start_counting_storage_fees"><span class="id" title="definition">Alpha_context.Fees.start_counting_storage_fees</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">source</span> := <a class="idref" href="Tezos.Alpha_context.html#Contract.implicit_contract"><span class="id" title="definition">Alpha_context.Contract.implicit_contract</span></a> <span class="id" title="var">source</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply_manager_operation_content"><span class="id" title="definition">apply_manager_operation_content</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#source"><span class="id" title="variable">source</span></a> <a class="idref" href="Tezos.Apply.html#source"><span class="id" title="variable">source</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">operation</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">operation_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">internal_operations</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply_internal_manager_operations"><span class="id" title="definition">apply_internal_manager_operations</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#source"><span class="id" title="variable">source</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">internal_operations</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#Success"><span class="id" title="constructor">Success</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">internal_operations_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Fees.burn_storage_fees"><span class="id" title="definition">Alpha_context.Fees.burn_storage_fees</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">storage_limit</span> <a class="idref" href="Tezos.Apply.html#source"><span class="id" title="variable">source</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">ctxt</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Apply.html#Success"><span class="id" title="constructor">Success</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Applied"><span class="id" title="constructor">Apply_results.Applied</span></a> <span class="id" title="var">operation_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">internal_operations_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">errors</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#Failure"><span class="id" title="constructor">Failure</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Backtracked"><span class="id" title="constructor">Apply_results.Backtracked</span></a> <span class="id" title="var">operation_results</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">errors</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">internal_operations_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#Failure"><span class="id" title="constructor">Failure</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">internal_operations_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#Failure"><span class="id" title="constructor">Failure</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Applied"><span class="id" title="constructor">Apply_results.Applied</span></a> <span class="id" title="var">operation_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">internal_operations_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">errors</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#Failure"><span class="id" title="constructor">Failure</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Failed"><span class="id" title="constructor">Apply_results.Failed</span></a> (<a class="idref" href="Tezos.Alpha_context.html#manager_kind"><span class="id" title="definition">Alpha_context.manager_kind</span></a> <span class="id" title="var">operation</span>) <span class="id" title="var">errors</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="axiom">unreachable_gadt_branch</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="skipped_operation_result"><span class="id" title="definition">skipped_operation_result</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">operation</span> : <a class="idref" href="Tezos.Alpha_context.html#manager_operation"><span class="id" title="inductive">Alpha_context.manager_operation</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Apply_results.html#manager_operation_result"><span class="id" title="inductive">Apply_results.manager_operation_result</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Alpha_context.html#Reveal"><span class="id" title="constructor">Alpha_context.Reveal</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Applied"><span class="id" title="constructor">Apply_results.Applied</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Reveal_result"><span class="id" title="constructor">Apply_results.Reveal_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Reveal_result.Build"><span class="id" title="constructor">Apply_results.successful_manager_operation_result.Reveal_result.consumed_gas</span></a> <a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Reveal_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#successful_manager_operation_result.Reveal_result.Build"><span class="id" title="constructor">Z.zero</span></a> |})<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Apply_results.html#Skipped"><span class="id" title="constructor">Apply_results.Skipped</span></a> (<a class="idref" href="Tezos.Alpha_context.html#manager_kind"><span class="id" title="definition">Alpha_context.manager_kind</span></a> <a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="mark_skipped"><span class="id" title="definition">mark_skipped</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">baker</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">level</span> : <a class="idref" href="Tezos.Alpha_context.html#Level.t"><span class="id" title="definition">Alpha_context.Level.t</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">function_parameter</span> : <a class="idref" href="Tezos.Alpha_context.html#contents_list"><span class="id" title="inductive">Alpha_context.contents_list</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">baker</span>}<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Apply_results.html#contents_result_list"><span class="id" title="inductive">Apply_results.contents_result_list</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Manager_operation"><span class="id" title="constructor">Alpha_context.Manager_operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.source</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.fee</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">operation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">|}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">source</span> := <a class="idref" href="Tezos.Alpha_context.html#Contract.implicit_contract"><span class="id" title="definition">Alpha_context.Contract.implicit_contract</span></a> <span class="id" title="var">source</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Manager_operation_result"><span class="id" title="constructor">Apply_results.Manager_operation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Fees</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">baker</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">level</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Level.t.cycle</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">)),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.operation_result</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">skipped_operation_result</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">operation</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.internal_operation_results</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">nil</span></a> |})<br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Cons"><span class="id" title="constructor">Alpha_context.Cons</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Manager_operation"><span class="id" title="constructor">Alpha_context.Manager_operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.source</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.fee</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">operation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">|}</span></a>) <span class="id" title="var">rest</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">source</span> := <a class="idref" href="Tezos.Alpha_context.html#Contract.implicit_contract"><span class="id" title="definition">Alpha_context.Contract.implicit_contract</span></a> <span class="id" title="var">source</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Cons_result"><span class="id" title="constructor">Apply_results.Cons_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Manager_operation_result"><span class="id" title="constructor">Apply_results.Manager_operation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Fees</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">baker</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">level</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Level.t.cycle</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">)),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.operation_result</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">skipped_operation_result</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">operation</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.internal_operation_results</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">nil</span></a> |}) (<a class="idref" href="Tezos.Apply.html#mark_skipped"><span class="id" title="definition">mark_skipped</span></a> <a class="idref" href="Tezos.Apply.html#baker"><span class="id" title="variable">baker</span></a> <a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a> <span class="id" title="var">rest</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="axiom">unreachable_gadt_branch</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="precheck_manager_contents_list"><span class="id" title="definition">precheck_manager_contents_list</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#t"><span class="id" title="definition">Alpha_context.t</span></a>) (<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">raw_operation</span> : <a class="idref" href="Tezos.Alpha_context.html#Operation.t"><span class="id" title="definition">Alpha_context.Operation.t</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">contents_list</span> : <a class="idref" href="Tezos.Alpha_context.html#contents_list"><span class="id" title="inductive">Alpha_context.contents_list</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">ctxt</span>}<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#contents_list"><span class="id" title="variable">contents_list</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a> ((<a class="idref" href="Tezos.Alpha_context.html#Manager_operation"><span class="id" title="constructor">Alpha_context.Manager_operation</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">op</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#precheck_manager_contents"><span class="id" title="definition">precheck_manager_contents</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#raw_operation"><span class="id" title="variable">raw_operation</span></a> <span class="id" title="var">op</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Alpha_context.html#Cons"><span class="id" title="constructor">Alpha_context.Cons</span></a> ((<a class="idref" href="Tezos.Alpha_context.html#Manager_operation"><span class="id" title="constructor">Alpha_context.Manager_operation</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">op</span>) <span class="id" title="var">rest</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Apply.html#precheck_manager_contents"><span class="id" title="definition">precheck_manager_contents</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#raw_operation"><span class="id" title="variable">raw_operation</span></a> <span class="id" title="var">op</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#precheck_manager_contents_list"><span class="id" title="definition">precheck_manager_contents_list</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#raw_operation"><span class="id" title="variable">raw_operation</span></a> <span class="id" title="var">rest</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="axiom">unreachable_gadt_branch</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="apply_manager_contents_list_rec"><span class="id" title="definition">apply_manager_contents_list_rec</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#t"><span class="id" title="definition">Alpha_context.t</span></a>) (<span class="id" title="var">mode</span> : <a class="idref" href="Tezos.Script_ir_translator.html#unparsing_mode"><span class="id" title="inductive">Script_ir_translator.unparsing_mode</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">baker</span> : <a class="idref" href="Tezos.Alpha_context.html#public_key_hash"><span class="id" title="definition">Alpha_context.public_key_hash</span></a>) (<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contents_list</span> : <a class="idref" href="Tezos.Alpha_context.html#contents_list"><span class="id" title="inductive">Alpha_context.contents_list</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">ctxt</span>}<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Apply.html#success_or_failure"><span class="id" title="inductive">success_or_failure</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result_list"><span class="id" title="inductive">Apply_results.contents_result_list</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#contents_list"><span class="id" title="variable">contents_list</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="Tezos.Alpha_context.html#Manager_operation"><span class="id" title="constructor">Alpha_context.Manager_operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.source</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.fee</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">fee</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">|}</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">op</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">source</span> := <a class="idref" href="Tezos.Alpha_context.html#Contract.implicit_contract"><span class="id" title="definition">Alpha_context.Contract.implicit_contract</span></a> <span class="id" title="var">source</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">=</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt_result</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">operation_result</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">internal_operation_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply_manager_contents"><span class="id" title="definition">apply_manager_contents</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <span class="id" title="var">op</span> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__result_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Manager_operation_result"><span class="id" title="constructor">Apply_results.Manager_operation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Fees</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">baker</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">level</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Level.t.cycle</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">)),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.operation_result</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">operation_result</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.internal_operation_results</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">internal_operation_results</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt_result"><span class="id" title="variable">ctxt_result</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a> <a class="idref" href="Tezos.Apply.html#__result_value"><span class="id" title="variable">__result_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Cons"><span class="id" title="constructor">Alpha_context.Cons</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="Tezos.Alpha_context.html#Manager_operation"><span class="id" title="constructor">Alpha_context.Manager_operation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.source</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">Alpha_context.contents.Manager_operation.fee</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">fee</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Manager_operation.Build"><span class="id" title="constructor">|}</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">op</span>) <span class="id" title="var">rest</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">source</span> := <a class="idref" href="Tezos.Alpha_context.html#Contract.implicit_contract"><span class="id" title="definition">Alpha_context.Contract.implicit_contract</span></a> <span class="id" title="var">source</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Apply.html#apply_manager_contents"><span class="id" title="definition">apply_manager_contents</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <span class="id" title="var">op</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#Failure"><span class="id" title="constructor">Failure</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">operation_result</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">internal_operation_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__result_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Manager_operation_result"><span class="id" title="constructor">Apply_results.Manager_operation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Fees</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">baker</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">level</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Level.t.cycle</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">)),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.operation_result</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">operation_result</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.internal_operation_results</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">internal_operation_results</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#Failure"><span class="id" title="constructor">Failure</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Cons_result"><span class="id" title="constructor">Apply_results.Cons_result</span></a> <a class="idref" href="Tezos.Apply.html#__result_value"><span class="id" title="variable">__result_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply.html#mark_skipped"><span class="id" title="definition">mark_skipped</span></a> <a class="idref" href="Tezos.Apply.html#baker"><span class="id" title="variable">baker</span></a> <a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a> <span class="id" title="var">rest</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#Success"><span class="id" title="constructor">Success</span></a> <span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">operation_result</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">internal_operation_results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__result_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Manager_operation_result"><span class="id" title="constructor">Apply_results.Manager_operation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Fees</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">baker</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">level</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Level.t.cycle</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">)),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">fee</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.operation_result</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">operation_result</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.internal_operation_results</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">internal_operation_results</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">=</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt_result</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply_manager_contents_list_rec"><span class="id" title="definition">apply_manager_contents_list_rec</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#baker"><span class="id" title="variable">baker</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <span class="id" title="var">rest</span> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt_result"><span class="id" title="variable">ctxt_result</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Cons_result"><span class="id" title="constructor">Apply_results.Cons_result</span></a> <a class="idref" href="Tezos.Apply.html#__result_value"><span class="id" title="variable">__result_value</span></a> <a class="idref" href="Tezos.Apply.html#results"><span class="id" title="variable">results</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="axiom">unreachable_gadt_branch</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="mark_backtracked"><span class="id" title="definition">mark_backtracked</span></a> (<span class="id" title="var">results</span> : <a class="idref" href="Tezos.Apply_results.html#contents_result_list"><span class="id" title="inductive">Apply_results.contents_result_list</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Apply_results.html#contents_result_list"><span class="id" title="inductive">Apply_results.contents_result_list</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mark_manager_operation_result</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">function_parameter</span> : <a class="idref" href="Tezos.Apply_results.html#manager_operation_result"><span class="id" title="inductive">Apply_results.manager_operation_result</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Apply_results.html#manager_operation_result"><span class="id" title="inductive">Apply_results.manager_operation_result</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Failed"><span class="id" title="constructor">Apply_results.Failed</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> | <a class="idref" href="Tezos.Apply_results.html#Skipped"><span class="id" title="constructor">Apply_results.Skipped</span></a> <span class="id" title="var">_</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Backtracked"><span class="id" title="constructor">Apply_results.Backtracked</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">__result_value</span> ⇒ <span class="id" title="var">__result_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="Tezos.Apply_results.html#Applied"><span class="id" title="constructor">Apply_results.Applied</span></a> (<a class="idref" href="Tezos.Apply_results.html#Reveal_result"><span class="id" title="constructor">Apply_results.Reveal_result</span></a> <span class="id" title="var">_</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">__result_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="var">__result_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Apply_results.html#Applied"><span class="id" title="constructor">Apply_results.Applied</span></a> <span class="id" title="var">__result_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Backtracked"><span class="id" title="constructor">Apply_results.Backtracked</span></a> <span class="id" title="var">__result_value</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">mark_internal_operation_results</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">function_parameter</span> : <a class="idref" href="Tezos.Apply_results.html#packed_internal_operation_result"><span class="id" title="inductive">Apply_results.packed_internal_operation_result</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Apply_results.html#packed_internal_operation_result"><span class="id" title="inductive">Apply_results.packed_internal_operation_result</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="Tezos.Apply_results.html#Internal_operation_result"><span class="id" title="constructor">Apply_results.Internal_operation_result</span></a> <span class="id" title="var">kind</span> <span class="id" title="var">__result_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Internal_operation_result"><span class="id" title="constructor">Apply_results.Internal_operation_result</span></a> <span class="id" title="var">kind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply.html#mark_manager_operation_result"><span class="id" title="variable">mark_manager_operation_result</span></a> <span class="id" title="var">__result_value</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">mark_contents_list</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">function_parameter</span> : <a class="idref" href="Tezos.Apply_results.html#contents_result_list"><span class="id" title="inductive">Apply_results.contents_result_list</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="keyword">struct</span> <span class="id" title="var">function_parameter</span>} : <a class="idref" href="Tezos.Apply_results.html#contents_result_list"><span class="id" title="inductive">Apply_results.contents_result_list</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a> (<a class="idref" href="Tezos.Apply_results.html#Manager_operation_result"><span class="id" title="constructor">Apply_results.Manager_operation_result</span></a> <span class="id" title="var">op</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Manager_operation_result"><span class="id" title="constructor">Apply_results.Manager_operation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">op</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.balance_updates</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.operation_result</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">mark_manager_operation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">op</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.operation_result</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.internal_operation_results</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">List.map</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">mark_internal_operation_results</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">op</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.internal_operation_results</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Apply_results.html#Cons_result"><span class="id" title="constructor">Apply_results.Cons_result</span></a> (<a class="idref" href="Tezos.Apply_results.html#Manager_operation_result"><span class="id" title="constructor">Apply_results.Manager_operation_result</span></a> <span class="id" title="var">op</span>) <span class="id" title="var">rest</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#Cons_result"><span class="id" title="constructor">Apply_results.Cons_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Manager_operation_result"><span class="id" title="constructor">Apply_results.Manager_operation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">op</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.balance_updates</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.operation_result</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">mark_manager_operation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">op</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.operation_result</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.internal_operation_results</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">List.map</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">mark_internal_operation_results</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">op</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Manager_operation_result.internal_operation_results</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Manager_operation_result.Build"><span class="id" title="constructor">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}) (<a class="idref" href="Tezos.Apply.html#mark_contents_list"><span class="id" title="variable">mark_contents_list</span></a> <span class="id" title="var">rest</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="axiom">unreachable_gadt_branch</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#mark_contents_list"><span class="id" title="variable">mark_contents_list</span></a> <a class="idref" href="Tezos.Apply.html#results"><span class="id" title="variable">results</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="apply_manager_contents_list"><span class="id" title="definition">apply_manager_contents_list</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#t"><span class="id" title="definition">Alpha_context.t</span></a>) (<span class="id" title="var">mode</span> : <a class="idref" href="Tezos.Script_ir_translator.html#unparsing_mode"><span class="id" title="inductive">Script_ir_translator.unparsing_mode</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">baker</span> : <a class="idref" href="Tezos.Alpha_context.html#public_key_hash"><span class="id" title="definition">Alpha_context.public_key_hash</span></a>) (<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">contents_list</span> : <a class="idref" href="Tezos.Alpha_context.html#contents_list"><span class="id" title="inductive">Alpha_context.contents_list</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Alpha_context.html#t"><span class="id" title="definition">Alpha_context.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result_list"><span class="id" title="inductive">Apply_results.contents_result_list</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">=</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt_result</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">results</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply_manager_contents_list_rec"><span class="id" title="definition">apply_manager_contents_list_rec</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#baker"><span class="id" title="variable">baker</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#contents_list"><span class="id" title="variable">contents_list</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#ctxt_result"><span class="id" title="variable">ctxt_result</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Apply.html#Failure"><span class="id" title="constructor">Failure</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#mark_backtracked"><span class="id" title="definition">mark_backtracked</span></a> <a class="idref" href="Tezos.Apply.html#results"><span class="id" title="variable">results</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Apply.html#Success"><span class="id" title="constructor">Success</span></a> <span class="id" title="var">ctxt</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">=</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Big_map.cleanup_temporary"><span class="id" title="definition">Alpha_context.Big_map.cleanup_temporary</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#792d2b92bd0d4bf4ce356163f834167c"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#results"><span class="id" title="variable">results</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="apply_contents_list"><span class="id" title="definition">apply_contents_list</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">mode</span> : <a class="idref" href="Tezos.Script_ir_translator.html#unparsing_mode"><span class="id" title="inductive">Script_ir_translator.unparsing_mode</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">pred_block</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Block_hash"><span class="id" title="axiom">Block_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">baker</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">operation</span> : <a class="idref" href="Tezos.Alpha_context.html#operation"><span class="id" title="definition">Alpha_context.operation</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">contents_list</span> : <a class="idref" href="Tezos.Alpha_context.html#contents_list"><span class="id" title="inductive">Alpha_context.contents_list</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result_list"><span class="id" title="inductive">Apply_results.contents_result_list</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#contents_list"><span class="id" title="variable">contents_list</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Endorsement"><span class="id" title="constructor">Alpha_context.Endorsement</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Endorsement.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Endorsement.Build"><span class="id" title="constructor">Alpha_context.contents.Endorsement.level</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Endorsement.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Endorsement.Build"><span class="id" title="constructor">level</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Endorsement.Build"><span class="id" title="constructor">|}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">block</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#operation.shell"><span class="id" title="projection">Alpha_context.operation.shell</span></a>).(<a class="idref" href="Tezos.Environment.html#Operation.shell_header.branch"><span class="id" title="projection">Operation.shell_header.branch</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Block_hash"><span class="id" title="axiom">Block_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.equal"><span class="id" title="projection">S.HASH.equal</span></a>) <a class="idref" href="Tezos.Apply.html#block"><span class="id" title="variable">block</span></a> <a class="idref" href="Tezos.Apply.html#pred_block"><span class="id" title="variable">pred_block</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">current_level</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Level.t.level"><span class="id" title="projection">Alpha_context.Level.t.level</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Raw_level.op_eq"><span class="id" title="definition">Alpha_context.Raw_level.op_eq</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Raw_level.succ"><span class="id" title="definition">Alpha_context.Raw_level.succ</span></a> <span class="id" title="keyword">level</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#current_level"><span class="id" title="variable">current_level</span></a>) <span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">delegate</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">slots</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">used</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#check_endorsement_rights"><span class="id" title="definition">Baking.check_endorsement_rights</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Apply.html#used"><span class="id" title="variable">used</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#record_endorsement"><span class="id" title="definition">Alpha_context.record_endorsement</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">gap</span> := <a class="idref" href="Tezos.Environment.html#List.length"><span class="id" title="axiom">List.length</span></a> <a class="idref" href="Tezos.Apply.html#slots"><span class="id" title="variable">slots</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">deposit</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Tez.op_starquestion"><span class="id" title="definition">Alpha_context.Tez.op_starquestion</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Constants.endorsement_security_deposit"><span class="id" title="definition">Alpha_context.Constants.endorsement_security_deposit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Int64.of_int"><span class="id" title="axiom">Int64.of_int</span></a> <a class="idref" href="Tezos.Apply.html#gap"><span class="id" title="variable">gap</span></a>)) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Delegate.freeze_deposit"><span class="id" title="definition">Alpha_context.Delegate.freeze_deposit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Apply.html#deposit"><span class="id" title="variable">deposit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">block_priority</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Global.get_block_priority"><span class="id" title="definition">Alpha_context.Global.get_block_priority</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">reward</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#endorsing_reward"><span class="id" title="definition">Baking.endorsing_reward</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#block_priority"><span class="id" title="variable">block_priority</span></a> <a class="idref" href="Tezos.Apply.html#gap"><span class="id" title="variable">gap</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Delegate.freeze_rewards"><span class="id" title="definition">Alpha_context.Delegate.freeze_rewards</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Apply.html#reward"><span class="id" title="variable">reward</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.from_raw"><span class="id" title="definition">Alpha_context.Level.from_raw</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">level</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Endorsement_result"><span class="id" title="constructor">Apply_results.Endorsement_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Endorsement_result.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Alpha_context.Contract.implicit_contract</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">delegate</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">)),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">deposit</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Deposits</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">level</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Alpha_context.Level.t.cycle</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">)),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">deposit</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">));</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">((</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Rewards</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">level</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Alpha_context.Level.t.cycle</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">)),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">(</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">reward</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Endorsement_result.delegate</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">delegate</span></a><a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">Apply_results.contents_result.Endorsement_result.slots</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply_results.html#contents_result.Endorsement_result.Build"><span class="id" title="constructor">slots</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|})<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Seed_nonce_revelation"><span class="id" title="constructor">Alpha_context.Seed_nonce_revelation</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Seed_nonce_revelation.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Seed_nonce_revelation.Build"><span class="id" title="constructor">Alpha_context.contents.Seed_nonce_revelation.level</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Seed_nonce_revelation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Seed_nonce_revelation.Build"><span class="id" title="constructor">level</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Seed_nonce_revelation.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Seed_nonce_revelation.Build"><span class="id" title="constructor">Alpha_context.contents.Seed_nonce_revelation.nonce</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Seed_nonce_revelation.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Seed_nonce_revelation.Build"><span class="id" title="constructor">__nonce_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Seed_nonce_revelation.Build"><span class="id" title="constructor">|}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.from_raw"><span class="id" title="definition">Alpha_context.Level.from_raw</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">level</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Nonce.reveal"><span class="id" title="definition">Alpha_context.Nonce.reveal</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a> <span class="id" title="var">__nonce_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">seed_nonce_revelation_tip</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Constants.seed_nonce_revelation_tip"><span class="id" title="definition">Alpha_context.Constants.seed_nonce_revelation_tip</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#add_rewards"><span class="id" title="definition">Alpha_context.add_rewards</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#seed_nonce_revelation_tip"><span class="id" title="variable">seed_nonce_revelation_tip</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Seed_nonce_revelation_result"><span class="id" title="constructor">Apply_results.Seed_nonce_revelation_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Rewards"><span class="id" title="constructor">Alpha_context.Delegate.Rewards</span></a> <a class="idref" href="Tezos.Apply.html#baker"><span class="id" title="variable">baker</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Credited"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#seed_nonce_revelation_tip"><span class="id" title="variable">seed_nonce_revelation_tip</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Double_endorsement_evidence"><span class="id" title="constructor">Alpha_context.Double_endorsement_evidence</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_endorsement_evidence.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_endorsement_evidence.Build"><span class="id" title="constructor">Alpha_context.contents.Double_endorsement_evidence.op1</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_endorsement_evidence.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_endorsement_evidence.Build"><span class="id" title="constructor">op1</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_endorsement_evidence.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_endorsement_evidence.Build"><span class="id" title="constructor">Alpha_context.contents.Double_endorsement_evidence.op2</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_endorsement_evidence.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_endorsement_evidence.Build"><span class="id" title="constructor">op2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_endorsement_evidence.Build"><span class="id" title="constructor">|}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="var">op1</span>.(<a class="idref" href="Tezos.Alpha_context.html#operation.protocol_data"><span class="id" title="projection">Alpha_context.operation.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#protocol_data.contents"><span class="id" title="projection">Alpha_context.protocol_data.contents</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">op2</span>.(<a class="idref" href="Tezos.Alpha_context.html#operation.protocol_data"><span class="id" title="projection">Alpha_context.operation.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#protocol_data.contents"><span class="id" title="projection">Alpha_context.protocol_data.contents</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">op1</span>.(<a class="idref" href="Tezos.Alpha_context.html#operation.protocol_data"><span class="id" title="projection">Alpha_context.operation.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#protocol_data.contents"><span class="id" title="projection">Alpha_context.protocol_data.contents</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">op2</span>.(<a class="idref" href="Tezos.Alpha_context.html#operation.protocol_data"><span class="id" title="projection">Alpha_context.operation.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#protocol_data.contents"><span class="id" title="projection">Alpha_context.protocol_data.contents</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Endorsement"><span class="id" title="constructor">Alpha_context.Endorsement</span></a> <span class="id" title="var">e1</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Endorsement"><span class="id" title="constructor">Alpha_context.Endorsement</span></a> <span class="id" title="var">e2</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_andand"><span class="id" title="axiom">Pervasives.op_andand</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Raw_level.op_eq"><span class="id" title="definition">Alpha_context.Raw_level.op_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">e1</span>.(<a class="idref" href="Tezos.Alpha_context.html#contents.Endorsement.level"><span class="id" title="projection">Alpha_context.contents.Endorsement.level</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">e2</span>.(<a class="idref" href="Tezos.Alpha_context.html#contents.Endorsement.level"><span class="id" title="projection">Alpha_context.contents.Endorsement.level</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.not"><span class="id" title="axiom">Pervasives.not</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Block_hash"><span class="id" title="axiom">Block_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.equal"><span class="id" title="projection">S.HASH.equal</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">op1</span>.(<a class="idref" href="Tezos.Alpha_context.html#operation.shell"><span class="id" title="projection">Alpha_context.operation.shell</span></a>).(<a class="idref" href="Tezos.Environment.html#Operation.shell_header.branch"><span class="id" title="projection">Operation.shell_header.branch</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">op2</span>.(<a class="idref" href="Tezos.Alpha_context.html#operation.shell"><span class="id" title="projection">Alpha_context.operation.shell</span></a>).(<a class="idref" href="Tezos.Environment.html#Operation.shell_header.branch"><span class="id" title="projection">Operation.shell_header.branch</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Endorsement"><span class="id" title="constructor">Alpha_context.Endorsement</span></a> <span class="id" title="var">e1</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Endorsement"><span class="id" title="constructor">Alpha_context.Endorsement</span></a> <span class="id" title="var">e2</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">level</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Level.from_raw"><span class="id" title="definition">Alpha_context.Level.from_raw</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">e1</span>.(<a class="idref" href="Tezos.Alpha_context.html#contents.Endorsement.level"><span class="id" title="projection">Alpha_context.contents.Endorsement.level</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">oldest_level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.last_allowed_fork_level"><span class="id" title="definition">Alpha_context.Level.last_allowed_fork_level</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Level.op_lt"><span class="id" title="definition">Alpha_context.Level.op_lt</span></a> <a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Raw_level.op_lteq"><span class="id" title="definition">Alpha_context.Raw_level.op_lteq</span></a> <a class="idref" href="Tezos.Apply.html#oldest_level"><span class="id" title="variable">oldest_level</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.level"><span class="id" title="projection">Alpha_context.Level.t.level</span></a>)) <span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">delegate1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#check_endorsement_rights"><span class="id" title="definition">Baking.check_endorsement_rights</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <span class="id" title="var">op1</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">delegate2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#check_endorsement_rights"><span class="id" title="definition">Baking.check_endorsement_rights</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <span class="id" title="var">op2</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.equal"><span class="id" title="projection">S.SPublic_key_hash.equal</span></a>) <a class="idref" href="Tezos.Apply.html#delegate1"><span class="id" title="variable">delegate1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#delegate2"><span class="id" title="variable">delegate2</span></a>) <span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">valid</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Delegate.has_frozen_balance"><span class="id" title="definition">Alpha_context.Delegate.has_frozen_balance</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate1"><span class="id" title="variable">delegate1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a> <a class="idref" href="Tezos.Apply.html#valid"><span class="id" title="variable">valid</span></a> <span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">balance</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Delegate.punish"><span class="id" title="definition">Alpha_context.Delegate.punish</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate1"><span class="id" title="variable">delegate1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">burned</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Tez.op_plusquestion"><span class="id" title="definition">Alpha_context.Tez.op_plusquestion</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#balance"><span class="id" title="variable">balance</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Delegate.frozen_balance.deposit"><span class="id" title="projection">Alpha_context.Delegate.frozen_balance.deposit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#balance"><span class="id" title="variable">balance</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Delegate.frozen_balance.fees"><span class="id" title="projection">Alpha_context.Delegate.frozen_balance.fees</span></a>)) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">reward</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Tez.op_divquestion"><span class="id" title="definition">Alpha_context.Tez.op_divquestion</span></a> <a class="idref" href="Tezos.Apply.html#burned"><span class="id" title="variable">burned</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Constant&nbsp;of&nbsp;type&nbsp;int64&nbsp;is&nbsp;converted&nbsp;to&nbsp;int&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">v</span> ⇒ <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Alpha_context.html#Tez.zero"><span class="id" title="definition">Alpha_context.Tez.zero</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#add_rewards"><span class="id" title="definition">Alpha_context.add_rewards</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#reward"><span class="id" title="variable">reward</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">current_cycle</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Double_endorsement_evidence_result"><span class="id" title="constructor">Apply_results.Double_endorsement_evidence_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Delegate.cleanup_balance_updates"><span class="id" title="definition">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Deposits"><span class="id" title="constructor">Alpha_context.Delegate.Deposits</span></a> <a class="idref" href="Tezos.Apply.html#delegate1"><span class="id" title="variable">delegate1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Debited"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#balance"><span class="id" title="variable">balance</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Delegate.frozen_balance.deposit"><span class="id" title="projection">Alpha_context.Delegate.frozen_balance.deposit</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Fees"><span class="id" title="constructor">Alpha_context.Delegate.Fees</span></a> <a class="idref" href="Tezos.Apply.html#delegate1"><span class="id" title="variable">delegate1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Debited"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#balance"><span class="id" title="variable">balance</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Delegate.frozen_balance.fees"><span class="id" title="projection">Alpha_context.Delegate.frozen_balance.fees</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Rewards"><span class="id" title="constructor">Alpha_context.Delegate.Rewards</span></a> <a class="idref" href="Tezos.Apply.html#delegate1"><span class="id" title="variable">delegate1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Debited"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#balance"><span class="id" title="variable">balance</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Delegate.frozen_balance.rewards"><span class="id" title="projection">Alpha_context.Delegate.frozen_balance.rewards</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Rewards"><span class="id" title="constructor">Alpha_context.Delegate.Rewards</span></a> <a class="idref" href="Tezos.Apply.html#baker"><span class="id" title="variable">baker</span></a> <a class="idref" href="Tezos.Apply.html#current_cycle"><span class="id" title="variable">current_cycle</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Credited"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply.html#reward"><span class="id" title="variable">reward</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Double_baking_evidence"><span class="id" title="constructor">Alpha_context.Double_baking_evidence</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_baking_evidence.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_baking_evidence.Build"><span class="id" title="constructor">Alpha_context.contents.Double_baking_evidence.bh1</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_baking_evidence.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_baking_evidence.Build"><span class="id" title="constructor">bh1</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_baking_evidence.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_baking_evidence.Build"><span class="id" title="constructor">Alpha_context.contents.Double_baking_evidence.bh2</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_baking_evidence.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_baking_evidence.Build"><span class="id" title="constructor">bh2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Double_baking_evidence.Build"><span class="id" title="constructor">|}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hash1</span> := <a class="idref" href="Tezos.Alpha_context.html#Block_header.__hash_value"><span class="id" title="definition">Alpha_context.Block_header.__hash_value</span></a> <span class="id" title="var">bh1</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">hash2</span> := <a class="idref" href="Tezos.Alpha_context.html#Block_header.__hash_value"><span class="id" title="definition">Alpha_context.Block_header.__hash_value</span></a> <span class="id" title="var">bh2</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_andand"><span class="id" title="axiom">Pervasives.op_andand</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int32"><span class="id" title="axiom">Compare.Int32</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_eq"><span class="id" title="projection">Compare.S.op_eq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bh1</span>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.shell"><span class="id" title="projection">Alpha_context.Block_header.t.shell</span></a>).(<a class="idref" href="Tezos.Environment.html#Block_header.shell_header.level"><span class="id" title="projection">Block_header.shell_header.level</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bh2</span>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.shell"><span class="id" title="projection">Alpha_context.Block_header.t.shell</span></a>).(<a class="idref" href="Tezos.Environment.html#Block_header.shell_header.level"><span class="id" title="projection">Block_header.shell_header.level</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.not"><span class="id" title="axiom">Pervasives.not</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Block_hash"><span class="id" title="axiom">Block_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.equal"><span class="id" title="projection">S.HASH.equal</span></a>) <a class="idref" href="Tezos.Apply.html#hash1"><span class="id" title="variable">hash1</span></a> <a class="idref" href="Tezos.Apply.html#hash2"><span class="id" title="variable">hash2</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">raw_level</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Raw_level.of_int32"><span class="id" title="definition">Alpha_context.Raw_level.of_int32</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bh1</span>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.shell"><span class="id" title="projection">Alpha_context.Block_header.t.shell</span></a>).(<a class="idref" href="Tezos.Environment.html#Block_header.shell_header.level"><span class="id" title="projection">Block_header.shell_header.level</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">oldest_level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.last_allowed_fork_level"><span class="id" title="definition">Alpha_context.Level.last_allowed_fork_level</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Raw_level.op_lt"><span class="id" title="definition">Alpha_context.Raw_level.op_lt</span></a> <a class="idref" href="Tezos.Apply.html#raw_level"><span class="id" title="variable">raw_level</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Level.t.level"><span class="id" title="projection">Alpha_context.Level.t.level</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Raw_level.op_lteq"><span class="id" title="definition">Alpha_context.Raw_level.op_lteq</span></a> <a class="idref" href="Tezos.Apply.html#oldest_level"><span class="id" title="variable">oldest_level</span></a> <a class="idref" href="Tezos.Apply.html#raw_level"><span class="id" title="variable">raw_level</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.from_raw"><span class="id" title="definition">Alpha_context.Level.from_raw</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="Tezos.Apply.html#raw_level"><span class="id" title="variable">raw_level</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">delegate1</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Roll.baking_rights_owner"><span class="id" title="definition">Alpha_context.Roll.baking_rights_owner</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bh1</span>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.protocol_data"><span class="id" title="projection">Alpha_context.Block_header.t.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Block_header.protocol_data.contents"><span class="id" title="projection">Alpha_context.Block_header.protocol_data.contents</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.priority"><span class="id" title="projection">Alpha_context.Block_header.contents.priority</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#check_signature"><span class="id" title="definition">Baking.check_signature</span></a> <span class="id" title="var">bh1</span> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#delegate1"><span class="id" title="variable">delegate1</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">delegate2</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Roll.baking_rights_owner"><span class="id" title="definition">Alpha_context.Roll.baking_rights_owner</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bh2</span>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.protocol_data"><span class="id" title="projection">Alpha_context.Block_header.t.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Block_header.protocol_data.contents"><span class="id" title="projection">Alpha_context.Block_header.protocol_data.contents</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.priority"><span class="id" title="projection">Alpha_context.Block_header.contents.priority</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#check_signature"><span class="id" title="definition">Baking.check_signature</span></a> <span class="id" title="var">bh2</span> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#delegate2"><span class="id" title="variable">delegate2</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.equal"><span class="id" title="projection">S.SPublic_key.equal</span></a>) <a class="idref" href="Tezos.Apply.html#delegate1"><span class="id" title="variable">delegate1</span></a> <a class="idref" href="Tezos.Apply.html#delegate2"><span class="id" title="variable">delegate2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delegate</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.__hash_value"><span class="id" title="projection">S.SPublic_key.__hash_value</span></a>) <a class="idref" href="Tezos.Apply.html#delegate1"><span class="id" title="variable">delegate1</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">valid</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Delegate.has_frozen_balance"><span class="id" title="definition">Alpha_context.Delegate.has_frozen_balance</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a> <a class="idref" href="Tezos.Apply.html#valid"><span class="id" title="variable">valid</span></a> <span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">balance</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Delegate.punish"><span class="id" title="definition">Alpha_context.Delegate.punish</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>) <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">burned</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Tez.op_plusquestion"><span class="id" title="definition">Alpha_context.Tez.op_plusquestion</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#balance"><span class="id" title="variable">balance</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Delegate.frozen_balance.deposit"><span class="id" title="projection">Alpha_context.Delegate.frozen_balance.deposit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#balance"><span class="id" title="variable">balance</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Delegate.frozen_balance.fees"><span class="id" title="projection">Alpha_context.Delegate.frozen_balance.fees</span></a>)) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">reward</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Tez.op_divquestion"><span class="id" title="definition">Alpha_context.Tez.op_divquestion</span></a> <a class="idref" href="Tezos.Apply.html#burned"><span class="id" title="variable">burned</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Constant&nbsp;of&nbsp;type&nbsp;int64&nbsp;is&nbsp;converted&nbsp;to&nbsp;int&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">v</span> ⇒ <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Alpha_context.html#Tez.zero"><span class="id" title="definition">Alpha_context.Tez.zero</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#add_rewards"><span class="id" title="definition">Alpha_context.add_rewards</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#reward"><span class="id" title="variable">reward</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">current_cycle</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Double_baking_evidence_result"><span class="id" title="constructor">Apply_results.Double_baking_evidence_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Delegate.cleanup_balance_updates"><span class="id" title="definition">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Deposits"><span class="id" title="constructor">Alpha_context.Delegate.Deposits</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Debited"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#balance"><span class="id" title="variable">balance</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Delegate.frozen_balance.deposit"><span class="id" title="projection">Alpha_context.Delegate.frozen_balance.deposit</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Fees"><span class="id" title="constructor">Alpha_context.Delegate.Fees</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Debited"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#balance"><span class="id" title="variable">balance</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Delegate.frozen_balance.fees"><span class="id" title="projection">Alpha_context.Delegate.frozen_balance.fees</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Rewards"><span class="id" title="constructor">Alpha_context.Delegate.Rewards</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Debited"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#balance"><span class="id" title="variable">balance</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Delegate.frozen_balance.rewards"><span class="id" title="projection">Alpha_context.Delegate.frozen_balance.rewards</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Rewards"><span class="id" title="constructor">Alpha_context.Delegate.Rewards</span></a> <a class="idref" href="Tezos.Apply.html#baker"><span class="id" title="variable">baker</span></a> <a class="idref" href="Tezos.Apply.html#current_cycle"><span class="id" title="variable">current_cycle</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Credited"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply.html#reward"><span class="id" title="variable">reward</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Activate_account"><span class="id" title="constructor">Alpha_context.Activate_account</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Activate_account.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Activate_account.Build"><span class="id" title="constructor">Alpha_context.contents.Activate_account.id</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Activate_account.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Activate_account.Build"><span class="id" title="constructor">pkh</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Activate_account.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Activate_account.Build"><span class="id" title="constructor">Alpha_context.contents.Activate_account.activation_code</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Activate_account.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Activate_account.Build"><span class="id" title="constructor">activation_code</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Activate_account.Build"><span class="id" title="constructor">|}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">blinded_pkh</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Blinded_public_key_hash.html#of_ed25519_pkh"><span class="id" title="definition">Blinded_public_key_hash.of_ed25519_pkh</span></a> <span class="id" title="var">activation_code</span> <span class="id" title="var">pkh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Commitment.get_opt"><span class="id" title="definition">Alpha_context.Commitment.get_opt</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#blinded_pkh"><span class="id" title="variable">blinded_pkh</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">amount</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Commitment.delete"><span class="id" title="definition">Alpha_context.Commitment.delete</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#blinded_pkh"><span class="id" title="variable">blinded_pkh</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">contract</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Contract.implicit_contract"><span class="id" title="definition">Alpha_context.Contract.implicit_contract</span></a> (<a class="idref" href="Tezos.Environment.html#Signature.Ed25519Hash"><span class="id" title="constructor">Signature.Ed25519Hash</span></a> <span class="id" title="var">pkh</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Contract.credit"><span class="id" title="definition">Alpha_context.Contract.credit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#contract"><span class="id" title="variable">contract</span></a> <span class="id" title="var">amount</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Apply_results.html#Activate_account_result"><span class="id" title="constructor">Apply_results.Activate_account_result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Contract"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a> <a class="idref" href="Tezos.Apply.html#contract"><span class="id" title="variable">contract</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Credited"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <span class="id" title="var">amount</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Proposals"><span class="id" title="constructor">Alpha_context.Proposals</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">Alpha_context.contents.Proposals.source</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">Alpha_context.contents.Proposals.period</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">period</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">Alpha_context.contents.Proposals.proposals</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">proposals</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Proposals.Build"><span class="id" title="constructor">|}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">delegate</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Roll.delegate_pubkey"><span class="id" title="definition">Alpha_context.Roll.delegate_pubkey</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">source</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.check_signature"><span class="id" title="definition">Alpha_context.Operation.check_signature</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Voting_period.op_eq"><span class="id" title="definition">Alpha_context.Voting_period.op_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.voting_period"><span class="id" title="projection">Alpha_context.Level.t.voting_period</span></a>) <span class="id" title="var">period</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Amendment.html#record_proposals"><span class="id" title="definition">Amendment.record_proposals</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">source</span> <span class="id" title="var">proposals</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a> <a class="idref" href="Tezos.Apply_results.html#Proposals_result"><span class="id" title="constructor">Apply_results.Proposals_result</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Ballot"><span class="id" title="constructor">Alpha_context.Ballot</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">Alpha_context.contents.Ballot.source</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">source</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">Alpha_context.contents.Ballot.period</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">period</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">Alpha_context.contents.Ballot.proposal</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">proposal</span></a><a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">Alpha_context.contents.Ballot.ballot</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">ballot</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Ballot.Build"><span class="id" title="constructor">|}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">delegate</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Roll.delegate_pubkey"><span class="id" title="definition">Alpha_context.Roll.delegate_pubkey</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">source</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.check_signature"><span class="id" title="definition">Alpha_context.Operation.check_signature</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Voting_period.op_eq"><span class="id" title="definition">Alpha_context.Voting_period.op_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.voting_period"><span class="id" title="projection">Alpha_context.Level.t.voting_period</span></a>) <span class="id" title="var">period</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Amendment.html#record_ballot"><span class="id" title="definition">Amendment.record_ballot</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">source</span> <span class="id" title="var">proposal</span> <span class="id" title="var">ballot</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply_results.html#Single_result"><span class="id" title="constructor">Apply_results.Single_result</span></a> <a class="idref" href="Tezos.Apply_results.html#Ballot_result"><span class="id" title="constructor">Apply_results.Ballot_result</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;| (<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Manager_operation"><span class="id" title="constructor">Alpha_context.Manager_operation</span></a> <span class="id" title="var">_</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">op</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Apply.html#precheck_manager_contents_list"><span class="id" title="definition">precheck_manager_contents_list</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a> <span class="id" title="var">op</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">=</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__result_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply_manager_contents_list"><span class="id" title="definition">apply_manager_contents_list</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#baker"><span class="id" title="variable">baker</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <span class="id" title="var">op</span> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#__result_value"><span class="id" title="variable">__result_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| (<a class="idref" href="Tezos.Alpha_context.html#Cons"><span class="id" title="constructor">Alpha_context.Cons</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Manager_operation"><span class="id" title="constructor">Alpha_context.Manager_operation</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">op</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Apply.html#precheck_manager_contents_list"><span class="id" title="definition">precheck_manager_contents_list</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a> <span class="id" title="var">op</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">=</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__result_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply_manager_contents_list"><span class="id" title="definition">apply_manager_contents_list</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#baker"><span class="id" title="variable">baker</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <span class="id" title="var">op</span> <a class="idref" href="Tezos.Environment.html#3dcfc08c1f26363306f7bd490d57bd95"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#__result_value"><span class="id" title="variable">__result_value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="axiom">unreachable_gadt_branch</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="apply_operation"><span class="id" title="definition">apply_operation</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">mode</span> : <a class="idref" href="Tezos.Script_ir_translator.html#unparsing_mode"><span class="id" title="inductive">Script_ir_translator.unparsing_mode</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">pred_block</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Block_hash"><span class="id" title="axiom">Block_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">baker</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">__hash_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Operation_hash"><span class="id" title="axiom">Operation_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">operation</span> : <a class="idref" href="Tezos.Alpha_context.html#operation"><span class="id" title="definition">Alpha_context.operation</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Apply_results.html#operation_metadata"><span class="id" title="definition">Apply_results.operation_metadata</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#Contract.init_origination_nonce"><span class="id" title="definition">Alpha_context.Contract.init_origination_nonce</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#__hash_value"><span class="id" title="variable">__hash_value</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">__result_value</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#apply_contents_list"><span class="id" title="definition">apply_contents_list</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#mode"><span class="id" title="variable">mode</span></a> <a class="idref" href="Tezos.Apply.html#pred_block"><span class="id" title="variable">pred_block</span></a> <a class="idref" href="Tezos.Apply.html#baker"><span class="id" title="variable">baker</span></a> <a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#operation"><span class="id" title="variable">operation</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#operation.protocol_data"><span class="id" title="projection">Alpha_context.operation.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#protocol_data.contents"><span class="id" title="projection">Alpha_context.protocol_data.contents</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#Gas.set_unlimited"><span class="id" title="definition">Alpha_context.Gas.set_unlimited</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#Contract.unset_origination_nonce"><span class="id" title="definition">Alpha_context.Contract.unset_origination_nonce</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">{|</span></a> <a class="idref" href="Tezos.Apply_results.html#operation_metadata.Build"><span class="id" title="constructor">Apply_results.operation_metadata.contents</span></a> <a class="idref" href="Tezos.Apply_results.html#operation_metadata.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply_results.html#operation_metadata.Build"><span class="id" title="constructor">__result_value</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">|})</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="may_snapshot_roll"><span class="id" title="definition">may_snapshot_roll</span></a> (<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">blocks_per_roll_snapshot</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Constants.blocks_per_roll_snapshot"><span class="id" title="definition">Alpha_context.Constants.blocks_per_roll_snapshot</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int32"><span class="id" title="axiom">Compare.Int32</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.equal"><span class="id" title="projection">Compare.S.equal</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Int32.rem"><span class="id" title="axiom">Int32.rem</span></a> <a class="idref" href="Tezos.Apply.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle_position"><span class="id" title="projection">Alpha_context.Level.t.cycle_position</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#blocks_per_roll_snapshot"><span class="id" title="variable">blocks_per_roll_snapshot</span></a>) (<a class="idref" href="Tezos.Environment.html#Int32.pred"><span class="id" title="axiom">Int32.pred</span></a> <a class="idref" href="Tezos.Apply.html#blocks_per_roll_snapshot"><span class="id" title="variable">blocks_per_roll_snapshot</span></a>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Roll.snapshot_rolls"><span class="id" title="definition">Alpha_context.Roll.snapshot_rolls</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="may_start_new_cycle"><span class="id" title="definition">may_start_new_cycle</span></a> (<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Alpha_context.html#Delegate.balance_updates"><span class="id" title="definition">Alpha_context.Delegate.balance_updates</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">function_parameter</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#dawn_of_a_new_cycle"><span class="id" title="definition">Baking.dawn_of_a_new_cycle</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">last_cycle</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">unrevealed</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Seed.cycle_end"><span class="id" title="definition">Alpha_context.Seed.cycle_end</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">last_cycle</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Roll.cycle_end"><span class="id" title="definition">Alpha_context.Roll.cycle_end</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">last_cycle</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">update_balances</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">deactivated</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Delegate.cycle_end"><span class="id" title="definition">Alpha_context.Delegate.cycle_end</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">last_cycle</span> <a class="idref" href="Tezos.Apply.html#unrevealed"><span class="id" title="variable">unrevealed</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Bootstrap.cycle_end"><span class="id" title="definition">Alpha_context.Bootstrap.cycle_end</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">last_cycle</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#update_balances"><span class="id" title="variable">update_balances</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#deactivated"><span class="id" title="variable">deactivated</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="begin_full_construction"><span class="id" title="definition">begin_full_construction</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">pred_timestamp</span> : <a class="idref" href="Tezos.Environment.html#Time.t"><span class="id" title="axiom">Time.t</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">protocol_data</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents"><span class="id" title="definition">Alpha_context.Block_header.contents</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents"><span class="id" title="definition">Alpha_context.Block_header.contents</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#public_key"><span class="id" title="definition">Alpha_context.public_key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Alpha_context.html#Period.t"><span class="id" title="definition">Alpha_context.Period.t</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Global.set_block_priority"><span class="id" title="definition">Alpha_context.Global.set_block_priority</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#protocol_data"><span class="id" title="variable">protocol_data</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.priority"><span class="id" title="projection">Alpha_context.Block_header.contents.priority</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">delegate_pk</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">block_delay</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#check_baking_rights"><span class="id" title="definition">Baking.check_baking_rights</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#protocol_data"><span class="id" title="variable">protocol_data</span></a> <a class="idref" href="Tezos.Apply.html#pred_timestamp"><span class="id" title="variable">pred_timestamp</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#Fitness.increase"><span class="id" title="definition">Alpha_context.Fitness.increase</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Alpha_context.html#Level.pred"><span class="id" title="definition">Alpha_context.Level.pred</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Assert&nbsp;instruction&nbsp;is&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents"><span class="id" title="definition">Alpha_context.Block_header.contents</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#public_key"><span class="id" title="definition">Alpha_context.public_key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Alpha_context.html#Period.t"><span class="id" title="definition">Alpha_context.Period.t</span></a>))) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">pred_level</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">rights</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#endorsement_rights"><span class="id" title="definition">Baking.endorsement_rights</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">pred_level</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#init_endorsements"><span class="id" title="definition">Alpha_context.init_endorsements</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#rights"><span class="id" title="variable">rights</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#protocol_data"><span class="id" title="variable">protocol_data</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#delegate_pk"><span class="id" title="variable">delegate_pk</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#block_delay"><span class="id" title="variable">block_delay</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="begin_partial_construction"><span class="id" title="definition">begin_partial_construction</span></a> (<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#Fitness.increase"><span class="id" title="definition">Alpha_context.Fitness.increase</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Alpha_context.html#Level.pred"><span class="id" title="definition">Alpha_context.Level.pred</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Assert&nbsp;instruction&nbsp;is&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">assert</span> (<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">pred_level</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">rights</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#endorsement_rights"><span class="id" title="definition">Baking.endorsement_rights</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">pred_level</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#init_endorsements"><span class="id" title="definition">Alpha_context.init_endorsements</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#rights"><span class="id" title="variable">rights</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="begin_application"><span class="id" title="definition">begin_application</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">block_header</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.t"><span class="id" title="definition">Alpha_context.Block_header.t</span></a>) (<span class="id" title="var">pred_timestamp</span> : <a class="idref" href="Tezos.Environment.html#Time.t"><span class="id" title="axiom">Time.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Alpha_context.html#public_key"><span class="id" title="definition">Alpha_context.public_key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Alpha_context.html#Period.t"><span class="id" title="definition">Alpha_context.Period.t</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Global.set_block_priority"><span class="id" title="definition">Alpha_context.Global.set_block_priority</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#block_header"><span class="id" title="variable">block_header</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.protocol_data"><span class="id" title="projection">Alpha_context.Block_header.t.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Block_header.protocol_data.contents"><span class="id" title="projection">Alpha_context.Block_header.protocol_data.contents</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.priority"><span class="id" title="projection">Alpha_context.Block_header.contents.priority</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">current_level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#check_proof_of_work_stamp"><span class="id" title="definition">Baking.check_proof_of_work_stamp</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#block_header"><span class="id" title="variable">block_header</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#check_fitness_gap"><span class="id" title="definition">Baking.check_fitness_gap</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#block_header"><span class="id" title="variable">block_header</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">delegate_pk</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">block_delay</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#check_baking_rights"><span class="id" title="definition">Baking.check_baking_rights</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#block_header"><span class="id" title="variable">block_header</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.protocol_data"><span class="id" title="projection">Alpha_context.Block_header.t.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Block_header.protocol_data.contents"><span class="id" title="projection">Alpha_context.Block_header.protocol_data.contents</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#pred_timestamp"><span class="id" title="variable">pred_timestamp</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#check_signature"><span class="id" title="definition">Baking.check_signature</span></a> <a class="idref" href="Tezos.Apply.html#block_header"><span class="id" title="variable">block_header</span></a> <a class="idref" href="Tezos.Apply.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Apply.html#delegate_pk"><span class="id" title="variable">delegate_pk</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">has_commitment</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#block_header"><span class="id" title="variable">block_header</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.protocol_data"><span class="id" title="projection">Alpha_context.Block_header.t.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Block_header.protocol_data.contents"><span class="id" title="projection">Alpha_context.Block_header.protocol_data.contents</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.seed_nonce_hash"><span class="id" title="projection">Alpha_context.Block_header.contents.seed_nonce_hash</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Bool"><span class="id" title="axiom">Compare.Bool</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_eq"><span class="id" title="projection">Compare.S.op_eq</span></a>) <a class="idref" href="Tezos.Apply.html#has_commitment"><span class="id" title="variable">has_commitment</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#current_level"><span class="id" title="variable">current_level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.expected_commitment"><span class="id" title="projection">Alpha_context.Level.t.expected_commitment</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#Fitness.increase"><span class="id" title="definition">Alpha_context.Fitness.increase</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Alpha_context.html#Level.pred"><span class="id" title="definition">Alpha_context.Level.pred</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Assert&nbsp;instruction&nbsp;is&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Alpha_context.html#public_key"><span class="id" title="definition">Alpha_context.public_key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Period.t"><span class="id" title="definition">Alpha_context.Period.t</span></a>))) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">pred_level</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">rights</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#endorsement_rights"><span class="id" title="definition">Baking.endorsement_rights</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="var">pred_level</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ctxt</span> := <a class="idref" href="Tezos.Alpha_context.html#init_endorsements"><span class="id" title="definition">Alpha_context.init_endorsements</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#rights"><span class="id" title="variable">rights</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#delegate_pk"><span class="id" title="variable">delegate_pk</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#block_delay"><span class="id" title="variable">block_delay</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_minimum_endorsements"><span class="id" title="definition">check_minimum_endorsements</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">protocol_data</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents"><span class="id" title="definition">Alpha_context.Block_header.contents</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">block_delay</span> : <a class="idref" href="Tezos.Alpha_context.html#Period.t"><span class="id" title="definition">Alpha_context.Period.t</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">included_endorsements</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">minimum</span> := <a class="idref" href="Tezos.Baking.html#minimum_allowed_endorsements"><span class="id" title="definition">Baking.minimum_allowed_endorsements</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#block_delay"><span class="id" title="variable">block_delay</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">timestamp</span> := <a class="idref" href="Tezos.Alpha_context.html#Timestamp.current"><span class="id" title="definition">Alpha_context.Timestamp.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_gteq"><span class="id" title="projection">Compare.S.op_gteq</span></a>) <a class="idref" href="Tezos.Apply.html#included_endorsements"><span class="id" title="variable">included_endorsements</span></a> <a class="idref" href="Tezos.Apply.html#minimum"><span class="id" title="variable">minimum</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="finalize_application"><span class="id" title="definition">finalize_application</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">protocol_data</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents"><span class="id" title="definition">Alpha_context.Block_header.contents</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">delegate</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">block_delay</span> : <a class="idref" href="Tezos.Alpha_context.html#Period.t"><span class="id" title="definition">Alpha_context.Period.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata"><span class="id" title="definition">Apply_results.block_metadata</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">included_endorsements</span> := <a class="idref" href="Tezos.Alpha_context.html#included_endorsements"><span class="id" title="definition">Alpha_context.included_endorsements</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#check_minimum_endorsements"><span class="id" title="definition">check_minimum_endorsements</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#protocol_data"><span class="id" title="variable">protocol_data</span></a> <a class="idref" href="Tezos.Apply.html#block_delay"><span class="id" title="variable">block_delay</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#included_endorsements"><span class="id" title="variable">included_endorsements</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">deposit</span> := <a class="idref" href="Tezos.Alpha_context.html#Constants.block_security_deposit"><span class="id" title="definition">Alpha_context.Constants.block_security_deposit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#add_deposit"><span class="id" title="definition">Alpha_context.add_deposit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Apply.html#deposit"><span class="id" title="variable">deposit</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">reward</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#baking_reward"><span class="id" title="definition">Baking.baking_reward</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#protocol_data"><span class="id" title="variable">protocol_data</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.priority"><span class="id" title="projection">Alpha_context.Block_header.contents.priority</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#included_endorsements"><span class="id" title="variable">included_endorsements</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#add_rewards"><span class="id" title="definition">Alpha_context.add_rewards</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#reward"><span class="id" title="variable">reward</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.Map"><span class="id" title="projection">S.SPublic_key_hash.Map</span></a>).(<a class="idref" href="Tezos.Environment.html#S.INDEXES_Map.fold"><span class="id" title="projection">S.INDEXES_Map.fold</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">delegate</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">deposit</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">ctxt</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Delegate.freeze_deposit"><span class="id" title="definition">Alpha_context.Delegate.freeze_deposit</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Apply.html#deposit"><span class="id" title="variable">deposit</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#get_deposits"><span class="id" title="definition">Alpha_context.get_deposits</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>) (<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">fees</span> := <a class="idref" href="Tezos.Alpha_context.html#get_fees"><span class="id" title="definition">Alpha_context.get_fees</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Delegate.freeze_fees"><span class="id" title="definition">Alpha_context.Delegate.freeze_fees</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Apply.html#fees"><span class="id" title="variable">fees</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">rewards</span> := <a class="idref" href="Tezos.Alpha_context.html#get_rewards"><span class="id" title="definition">Alpha_context.get_rewards</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Delegate.freeze_rewards"><span class="id" title="definition">Alpha_context.Delegate.freeze_rewards</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Apply.html#rewards"><span class="id" title="variable">rewards</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Apply.html#protocol_data"><span class="id" title="variable">protocol_data</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.seed_nonce_hash"><span class="id" title="projection">Alpha_context.Block_header.contents.seed_nonce_hash</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">nonce_hash</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Nonce.record_hash"><span class="id" title="definition">Alpha_context.Nonce.record_hash</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">Storage.unrevealed_nonce.nonce_hash</span></a> <a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">nonce_hash</span></a><a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">Storage.unrevealed_nonce.delegate</span></a> <a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">delegate</span></a><a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">Storage.unrevealed_nonce.rewards</span></a> <a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">rewards</span></a><a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">Storage.unrevealed_nonce.fees</span></a> <a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply.html#Build"><span class="id" title="constructor">fees</span></a> |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Apply.html#may_snapshot_roll"><span class="id" title="definition">may_snapshot_roll</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctxt</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">balance_updates</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">deactivated</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Apply.html#may_start_new_cycle"><span class="id" title="definition">may_start_new_cycle</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">ctxt</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Amendment.html#may_start_new_voting_period"><span class="id" title="definition">Amendment.may_start_new_voting_period</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">cycle</span> := (<a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">balance_updates</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Delegate.cleanup_balance_updates"><span class="id" title="definition">Alpha_context.Delegate.cleanup_balance_updates</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_at"><span class="id" title="axiom">Pervasives.op_at</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Contract"><span class="id" title="constructor">Alpha_context.Delegate.Contract</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Contract.implicit_contract"><span class="id" title="definition">Alpha_context.Contract.implicit_contract</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Debited"><span class="id" title="constructor">Alpha_context.Delegate.Debited</span></a> <a class="idref" href="Tezos.Apply.html#deposit"><span class="id" title="variable">deposit</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Deposits"><span class="id" title="constructor">Alpha_context.Delegate.Deposits</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Apply.html#cycle"><span class="id" title="variable">cycle</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Credited"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply.html#deposit"><span class="id" title="variable">deposit</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Rewards"><span class="id" title="constructor">Alpha_context.Delegate.Rewards</span></a> <a class="idref" href="Tezos.Apply.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Apply.html#cycle"><span class="id" title="variable">cycle</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Alpha_context.html#Delegate.Credited"><span class="id" title="constructor">Alpha_context.Delegate.Credited</span></a> <a class="idref" href="Tezos.Apply.html#reward"><span class="id" title="variable">reward</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="Tezos.Apply.html#balance_updates"><span class="id" title="variable">balance_updates</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">consumed_gas</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Z.sub"><span class="id" title="definition">Z.sub</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Constants.hard_gas_limit_per_block"><span class="id" title="definition">Alpha_context.Constants.hard_gas_limit_per_block</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Gas.block_level"><span class="id" title="definition">Alpha_context.Gas.block_level</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">voting_period_kind</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Vote.get_current_period_kind"><span class="id" title="definition">Alpha_context.Vote.get_current_period_kind</span></a> <a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">receipt</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">Apply_results.block_metadata.baker</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">delegate</span></a><a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">Apply_results.block_metadata.level</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">ctxt</span></a><a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">Apply_results.block_metadata.voting_period_kind</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">voting_period_kind</span></a><a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">Apply_results.block_metadata.nonce_hash</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">protocol_data</span></a><a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">.(</span></a><a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">Alpha_context.Block_header.contents.seed_nonce_hash</span></a><a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">);</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">Apply_results.block_metadata.consumed_gas</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">consumed_gas</span></a><a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">Apply_results.block_metadata.deactivated</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">deactivated</span></a><a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">Apply_results.block_metadata.balance_updates</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Apply_results.html#block_metadata.Build"><span class="id" title="constructor">balance_updates</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Apply.html#ctxt"><span class="id" title="variable">ctxt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Apply.html#receipt"><span class="id" title="variable">receipt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>