<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Tezos.Baking</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Tezos.Baking</h1>

<div class="code">
</div>

<div class="doc">
Generated by coq-of-ocaml 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">OCaml.OCaml</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="var">Guard</span> <span class="id" title="var">Checking</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Tezos.Environment.html#"><span class="id" title="library">Tezos.Environment</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Environment.Notations</span>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Alpha_context.html#"><span class="id" title="library">Tezos.Alpha_context</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Tezos.Misc.html#"><span class="id" title="library">Tezos.Misc</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Alpha_context</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Misc</span>.<br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Top-level&nbsp;evaluations&nbsp;are&nbsp;ignored&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;top_level_evaluation&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="minimal_time"><span class="id" title="definition">minimal_time</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">priority</span> : <span class="id" title="definition">int</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">pred_timestamp</span> : <a class="idref" href="Tezos.Alpha_context.html#Timestamp.time"><span class="id" title="definition">Alpha_context.Timestamp.time</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#Timestamp.time"><span class="id" title="definition">Alpha_context.Timestamp.time</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">priority</span> := <a class="idref" href="Tezos.Environment.html#Int32.of_int"><span class="id" title="axiom">Int32.of_int</span></a> <a class="idref" href="Tezos.Baking.html#priority"><span class="id" title="variable">priority</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">cumsum_time_between_blocks</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">acc</span> : <a class="idref" href="Tezos.Alpha_context.html#Timestamp.time"><span class="id" title="definition">Alpha_context.Timestamp.time</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">durations</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Tezos.Alpha_context.html#Period.period"><span class="id" title="definition">Alpha_context.Period.period</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__p_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int32"><span class="id" title="axiom">Compare.Int32</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>)) {<span class="id" title="keyword">struct</span> <span class="id" title="var">acc</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#Timestamp.time"><span class="id" title="definition">Alpha_context.Timestamp.time</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int32"><span class="id" title="axiom">Compare.Int32</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lteq"><span class="id" title="projection">Compare.S.op_lteq</span></a>) <a class="idref" href="Tezos.Baking.html#__p_value"><span class="id" title="variable">__p_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Constant&nbsp;of&nbsp;type&nbsp;int32&nbsp;is&nbsp;converted&nbsp;to&nbsp;int&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.ok"><span class="id" title="definition">Error_monad.ok</span></a> <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Baking.html#durations"><span class="id" title="variable">durations</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#cumsum_time_between_blocks"><span class="id" title="variable">cumsum_time_between_blocks</span></a> <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a> <a class="idref" href="Tezos.Alpha_context.html#Period.one_minute"><span class="id" title="definition">Alpha_context.Period.one_minute</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#__p_value"><span class="id" title="variable">__p_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">last</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">?</span></a> <span class="id" title="var">period</span> <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Period.mult"><span class="id" title="definition">Alpha_context.Period.mult</span></a> <a class="idref" href="Tezos.Baking.html#__p_value"><span class="id" title="variable">__p_value</span></a> <span class="id" title="var">last</span> <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Timestamp.op_plusquestion"><span class="id" title="definition">Alpha_context.Timestamp.op_plusquestion</span></a> <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a> <a class="idref" href="Tezos.Baking.html#period"><span class="id" title="variable">period</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="tactic">first</span> <span class="id" title="var">durations</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">?</span></a> <span class="id" title="var">acc</span> <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Timestamp.op_plusquestion"><span class="id" title="definition">Alpha_context.Timestamp.op_plusquestion</span></a> <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a> <span class="id" title="tactic">first</span> <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__p_value</span> := <a class="idref" href="Tezos.Environment.html#Int32.pred"><span class="id" title="axiom">Int32.pred</span></a> <a class="idref" href="Tezos.Baking.html#__p_value"><span class="id" title="variable">__p_value</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#cumsum_time_between_blocks"><span class="id" title="variable">cumsum_time_between_blocks</span></a> <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a> <a class="idref" href="Tezos.Baking.html#durations"><span class="id" title="variable">durations</span></a> <a class="idref" href="Tezos.Baking.html#__p_value"><span class="id" title="variable">__p_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Baking.html#cumsum_time_between_blocks"><span class="id" title="variable">cumsum_time_between_blocks</span></a> <a class="idref" href="Tezos.Baking.html#pred_timestamp"><span class="id" title="variable">pred_timestamp</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Constants.time_between_blocks"><span class="id" title="definition">Alpha_context.Constants.time_between_blocks</span></a> <a class="idref" href="Tezos.Baking.html#c"><span class="id" title="variable">c</span></a>) (<a class="idref" href="Tezos.Environment.html#Int32.succ"><span class="id" title="axiom">Int32.succ</span></a> <a class="idref" href="Tezos.Baking.html#priority"><span class="id" title="variable">priority</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="earlier_predecessor_timestamp"><span class="id" title="definition">earlier_predecessor_timestamp</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="keyword">level</span> : <a class="idref" href="Tezos.Alpha_context.html#Level.level"><span class="id" title="definition">Alpha_context.Level.level</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#Timestamp.time"><span class="id" title="definition">Alpha_context.Timestamp.time</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">current</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">current_timestamp</span> := <a class="idref" href="Tezos.Alpha_context.html#Timestamp.current"><span class="id" title="definition">Alpha_context.Timestamp.current</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">gap</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.diff"><span class="id" title="definition">Alpha_context.Level.diff</span></a> <a class="idref" href="Tezos.Baking.html#level"><span class="id" title="variable">level</span></a> <a class="idref" href="Tezos.Baking.html#current"><span class="id" title="variable">current</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">step</span> := <a class="idref" href="Tezos.Environment.html#List.hd"><span class="id" title="axiom">List.hd</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Constants.time_between_blocks"><span class="id" title="definition">Alpha_context.Constants.time_between_blocks</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int32"><span class="id" title="axiom">Compare.Int32</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lt"><span class="id" title="projection">Compare.S.op_lt</span></a>) <a class="idref" href="Tezos.Baking.html#gap"><span class="id" title="variable">gap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Constant&nbsp;of&nbsp;type&nbsp;int32&nbsp;is&nbsp;converted&nbsp;to&nbsp;int&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.failwith"><span class="id" title="axiom">Pervasives.failwith</span></a> "Baking.earlier_block_timestamp: past block."<br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">delay</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Period.mult"><span class="id" title="definition">Alpha_context.Period.mult</span></a> (<a class="idref" href="Tezos.Environment.html#Int32.pred"><span class="id" title="axiom">Int32.pred</span></a> <a class="idref" href="Tezos.Baking.html#gap"><span class="id" title="variable">gap</span></a>) <a class="idref" href="Tezos.Baking.html#step"><span class="id" title="variable">step</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__result_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Timestamp.op_plusquestion"><span class="id" title="definition">Alpha_context.Timestamp.op_plusquestion</span></a> <a class="idref" href="Tezos.Baking.html#current_timestamp"><span class="id" title="variable">current_timestamp</span></a> <a class="idref" href="Tezos.Baking.html#delay"><span class="id" title="variable">delay</span></a>) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="Tezos.Baking.html#__result_value"><span class="id" title="variable">__result_value</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_timestamp"><span class="id" title="definition">check_timestamp</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">priority</span> : <span class="id" title="definition">int</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">pred_timestamp</span> : <a class="idref" href="Tezos.Alpha_context.html#Timestamp.time"><span class="id" title="definition">Alpha_context.Timestamp.time</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#Period.t"><span class="id" title="definition">Alpha_context.Period.t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">minimal_time</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#minimal_time"><span class="id" title="definition">minimal_time</span></a> <a class="idref" href="Tezos.Baking.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Baking.html#priority"><span class="id" title="variable">priority</span></a> <a class="idref" href="Tezos.Baking.html#pred_timestamp"><span class="id" title="variable">pred_timestamp</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">timestamp</span> := <a class="idref" href="Tezos.Alpha_context.html#Timestamp.current"><span class="id" title="definition">Alpha_context.Timestamp.current</span></a> <a class="idref" href="Tezos.Baking.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.record_trace"><span class="id" title="axiom">Error_monad.record_trace</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Timestamp.op_minusquestion"><span class="id" title="definition">Alpha_context.Timestamp.op_minusquestion</span></a> <a class="idref" href="Tezos.Baking.html#timestamp"><span class="id" title="variable">timestamp</span></a> <a class="idref" href="Tezos.Baking.html#minimal_time"><span class="id" title="variable">minimal_time</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_baking_rights"><span class="id" title="definition">check_baking_rights</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">function_parameter</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents"><span class="id" title="definition">Alpha_context.Block_header.contents</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Alpha_context.html#Timestamp.time"><span class="id" title="definition">Alpha_context.Timestamp.time</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Alpha_context.html#public_key"><span class="id" title="definition">Alpha_context.public_key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="Tezos.Alpha_context.html#Period.t"><span class="id" title="definition">Alpha_context.Period.t</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.Build"><span class="id" title="constructor">{|</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.Build"><span class="id" title="constructor">Alpha_context.Block_header.contents.priority</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.Build"><span class="id" title="constructor">priority</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents.Build"><span class="id" title="constructor">|}</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">pred_timestamp</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Baking.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">delegate</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Roll.baking_rights_owner"><span class="id" title="definition">Alpha_context.Roll.baking_rights_owner</span></a> <a class="idref" href="Tezos.Baking.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Baking.html#level"><span class="id" title="variable">level</span></a> <span class="id" title="var">priority</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">block_delay</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#check_timestamp"><span class="id" title="definition">check_timestamp</span></a> <a class="idref" href="Tezos.Baking.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="var">priority</span> <a class="idref" href="Tezos.Baking.html#pred_timestamp"><span class="id" title="variable">pred_timestamp</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Baking.html#delegate"><span class="id" title="variable">delegate</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Tezos.Baking.html#block_delay"><span class="id" title="variable">block_delay</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Structure&nbsp;item&nbsp;`typext`&nbsp;not&nbsp;handled.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;type_extension&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Top-level&nbsp;evaluations&nbsp;are&nbsp;ignored&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;top_level_evaluation&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;❌&nbsp;Top-level&nbsp;evaluations&nbsp;are&nbsp;ignored&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;top_level_evaluation&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="baking_reward"><span class="id" title="definition">baking_reward</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">prio</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">num_endo</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#Tez.tez"><span class="id" title="definition">Alpha_context.Tez.tez</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_gteq"><span class="id" title="projection">Compare.S.op_gteq</span></a>) <a class="idref" href="Tezos.Baking.html#prio"><span class="id" title="variable">prio</span></a> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">max_endorsements</span> := <a class="idref" href="Tezos.Alpha_context.html#Constants.endorsers_per_block"><span class="id" title="definition">Alpha_context.Constants.endorsers_per_block</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">=?</span></a> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">'</span></a><span class="id" title="var">_</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail_unless"><span class="id" title="axiom">Error_monad.fail_unless</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_andand"><span class="id" title="axiom">Pervasives.op_andand</span></a> (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_gteq"><span class="id" title="projection">Compare.S.op_gteq</span></a>) <a class="idref" href="Tezos.Baking.html#num_endo"><span class="id" title="variable">num_endo</span></a> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lteq"><span class="id" title="projection">Compare.S.op_lteq</span></a>) <a class="idref" href="Tezos.Baking.html#num_endo"><span class="id" title="variable">num_endo</span></a> <a class="idref" href="Tezos.Baking.html#max_endorsements"><span class="id" title="variable">max_endorsements</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">extensible_type_value</span> <a class="idref" href="Tezos.Environment.html#0bda090fdf5de4b8721bd60dca0fe8ed"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">prio_factor_denominator</span> := <a class="idref" href="Tezos.Environment.html#Int64.succ"><span class="id" title="axiom">Int64.succ</span></a> (<a class="idref" href="Tezos.Environment.html#Int64.of_int"><span class="id" title="axiom">Int64.of_int</span></a> <a class="idref" href="Tezos.Baking.html#prio"><span class="id" title="variable">prio</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">endo_factor_numerator</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Int64.of_int"><span class="id" title="axiom">Int64.of_int</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_plus"><span class="id" title="axiom">Pervasives.op_plus</span></a> 8<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_div"><span class="id" title="axiom">Pervasives.op_div</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.op_star"><span class="id" title="axiom">Pervasives.op_star</span></a> 2 <a class="idref" href="Tezos.Baking.html#num_endo"><span class="id" title="variable">num_endo</span></a>) <a class="idref" href="Tezos.Baking.html#max_endorsements"><span class="id" title="variable">max_endorsements</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">endo_factor_denominator</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Constant&nbsp;of&nbsp;type&nbsp;int64&nbsp;is&nbsp;converted&nbsp;to&nbsp;int&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;10 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">?</span></a> <span class="id" title="var">val1</span> <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Tez.op_starquestion"><span class="id" title="definition">Alpha_context.Tez.op_starquestion</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Constants.block_reward"><span class="id" title="definition">Alpha_context.Constants.block_reward</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a>) <a class="idref" href="Tezos.Baking.html#endo_factor_numerator"><span class="id" title="variable">endo_factor_numerator</span></a> <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">?</span></a> <span class="id" title="var">val2</span> <a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Tez.op_divquestion"><span class="id" title="definition">Alpha_context.Tez.op_divquestion</span></a> <a class="idref" href="Tezos.Baking.html#val1"><span class="id" title="variable">val1</span></a> <a class="idref" href="Tezos.Baking.html#endo_factor_denominator"><span class="id" title="variable">endo_factor_denominator</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#22ca82e0e245aab13031e62a6166a8fa"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Tez.op_divquestion"><span class="id" title="definition">Alpha_context.Tez.op_divquestion</span></a> <a class="idref" href="Tezos.Baking.html#val2"><span class="id" title="variable">val2</span></a> <a class="idref" href="Tezos.Baking.html#prio_factor_denominator"><span class="id" title="variable">prio_factor_denominator</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="endorsing_reward"><span class="id" title="definition">endorsing_reward</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">prio</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">n</span> : <span class="id" title="definition">int</span>) : <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Alpha_context.html#Tez.tez"><span class="id" title="definition">Alpha_context.Tez.tez</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_gteq"><span class="id" title="projection">Compare.S.op_gteq</span></a>) <a class="idref" href="Tezos.Baking.html#prio"><span class="id" title="variable">prio</span></a> 0 <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">tez</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Tez.op_divquestion"><span class="id" title="definition">Alpha_context.Tez.op_divquestion</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Constants.endorsement_reward"><span class="id" title="definition">Alpha_context.Constants.endorsement_reward</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Int64.succ"><span class="id" title="axiom">Int64.succ</span></a> (<a class="idref" href="Tezos.Environment.html#Int64.of_int"><span class="id" title="axiom">Int64.of_int</span></a> <a class="idref" href="Tezos.Baking.html#prio"><span class="id" title="variable">prio</span></a>))) <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Tez.op_starquestion"><span class="id" title="definition">Alpha_context.Tez.op_starquestion</span></a> <a class="idref" href="Tezos.Baking.html#tez"><span class="id" title="variable">tez</span></a> (<a class="idref" href="Tezos.Environment.html#Int64.of_int"><span class="id" title="axiom">Int64.of_int</span></a> <a class="idref" href="Tezos.Baking.html#n"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="baking_priorities"><span class="id" title="definition">baking_priorities</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="keyword">level</span> : <a class="idref" href="Tezos.Alpha_context.html#Level.t"><span class="id" title="definition">Alpha_context.Level.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Misc.html#lazy_list_t"><span class="id" title="inductive">Misc.lazy_list_t</span></a> <a class="idref" href="Tezos.Alpha_context.html#public_key"><span class="id" title="definition">Alpha_context.public_key</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">f</span> (<span class="id" title="var">priority</span> : <span class="id" title="definition">int</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">priority</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="Tezos.Misc.html#lazy_list_t"><span class="id" title="inductive">Misc.lazy_list_t</span></a> <a class="idref" href="Tezos.Alpha_context.html#public_key"><span class="id" title="definition">Alpha_context.public_key</span></a>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">delegate</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Roll.baking_rights_owner"><span class="id" title="definition">Alpha_context.Roll.baking_rights_owner</span></a> <a class="idref" href="Tezos.Baking.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Baking.html#level"><span class="id" title="variable">level</span></a> <a class="idref" href="Tezos.Baking.html#priority"><span class="id" title="variable">priority</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Misc.html#LCons"><span class="id" title="constructor">Misc.LCons</span></a> <a class="idref" href="Tezos.Baking.html#delegate"><span class="id" title="variable">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<span class="id" title="var">_</span> := <a class="idref" href="Tezos.Baking.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.succ"><span class="id" title="axiom">Pervasives.succ</span></a> <a class="idref" href="Tezos.Baking.html#priority"><span class="id" title="variable">priority</span></a>))) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#f"><span class="id" title="variable">f</span></a> 0.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="endorsement_rights"><span class="id" title="definition">endorsement_rights</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">c</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="keyword">level</span> : <a class="idref" href="Tezos.Alpha_context.html#Level.t"><span class="id" title="definition">Alpha_context.Level.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.Map"><span class="id" title="projection">S.SPublic_key_hash.Map</span></a>).(<a class="idref" href="Tezos.Environment.html#S.INDEXES_Map.t"><span class="id" title="projection">S.INDEXES_Map.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#public_key"><span class="id" title="definition">Alpha_context.public_key</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="definition">int</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>))) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fold_left_s"><span class="id" title="axiom">Error_monad.fold_left_s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">slot</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">pk</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Roll.endorsement_rights_owner"><span class="id" title="definition">Alpha_context.Roll.endorsement_rights_owner</span></a> <a class="idref" href="Tezos.Baking.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="Tezos.Baking.html#level"><span class="id" title="variable">level</span></a> <a class="idref" href="Tezos.Baking.html#slot"><span class="id" title="variable">slot</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pkh</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.__hash_value"><span class="id" title="projection">S.SPublic_key.__hash_value</span></a>) <a class="idref" href="Tezos.Baking.html#pk"><span class="id" title="variable">pk</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__right</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.Map"><span class="id" title="projection">S.SPublic_key_hash.Map</span></a>).(<a class="idref" href="Tezos.Environment.html#S.INDEXES_Map.find_opt"><span class="id" title="projection">S.INDEXES_Map.find_opt</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#pkh"><span class="id" title="variable">pkh</span></a> <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Baking.html#pk"><span class="id" title="variable">pk</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a> <a class="idref" href="Tezos.Baking.html#slot"><span class="id" title="variable">slot</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">pk</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">slots</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">used</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Baking.html#pk"><span class="id" title="variable">pk</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Baking.html#slot"><span class="id" title="variable">slot</span></a> <span class="id" title="var">slots</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <span class="id" title="var">used</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.Map"><span class="id" title="projection">S.SPublic_key_hash.Map</span></a>).(<a class="idref" href="Tezos.Environment.html#S.INDEXES_Map.add"><span class="id" title="projection">S.INDEXES_Map.add</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#pkh"><span class="id" title="variable">pkh</span></a> <a class="idref" href="Tezos.Baking.html#__right"><span class="id" title="variable">__right</span></a> <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.Map"><span class="id" title="projection">S.SPublic_key_hash.Map</span></a>).(<a class="idref" href="Tezos.Environment.html#S.INDEXES_Map.empty"><span class="id" title="projection">S.INDEXES_Map.empty</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Misc.html#op_minusminusgt"><span class="id" title="definition">Misc.op_minusminusgt</span></a> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Constants.endorsers_per_block"><span class="id" title="definition">Alpha_context.Constants.endorsers_per_block</span></a> <a class="idref" href="Tezos.Baking.html#c"><span class="id" title="variable">c</span></a>) 1)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_endorsement_rights"><span class="id" title="definition">check_endorsement_rights</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">op</span> : <a class="idref" href="Tezos.Alpha_context.html#Operation.t"><span class="id" title="definition">Alpha_context.Operation.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.Map"><span class="id" title="projection">S.SPublic_key_hash.Map</span></a>).(<a class="idref" href="Tezos.Environment.html#S.INDEXES_Map.key"><span class="id" title="projection">S.INDEXES_Map.key</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="definition">int</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">current_level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#op"><span class="id" title="variable">op</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#operation.protocol_data"><span class="id" title="projection">Alpha_context.operation.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#protocol_data.contents"><span class="id" title="projection">Alpha_context.protocol_data.contents</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Single"><span class="id" title="constructor">Alpha_context.Single</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Endorsement"><span class="id" title="constructor">Alpha_context.Endorsement</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Endorsement.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Endorsement.Build"><span class="id" title="constructor">Alpha_context.contents.Endorsement.level</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Endorsement.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Endorsement.Build"><span class="id" title="constructor">level</span></a> <a class="idref" href="Tezos.Alpha_context.html#Operation.contents.Endorsement.Build"><span class="id" title="constructor">|}</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">endorsements</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Raw_level.op_eq"><span class="id" title="definition">Alpha_context.Raw_level.op_eq</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Raw_level.succ"><span class="id" title="definition">Alpha_context.Raw_level.succ</span></a> <span class="id" title="keyword">level</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#current_level"><span class="id" title="variable">current_level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.level"><span class="id" title="projection">Alpha_context.Level.t.level</span></a>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> (<a class="idref" href="Tezos.Alpha_context.html#allowed_endorsements"><span class="id" title="definition">Alpha_context.allowed_endorsements</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#endorsement_rights"><span class="id" title="definition">endorsement_rights</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Level.from_raw"><span class="id" title="definition">Alpha_context.Level.from_raw</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">level</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.Map"><span class="id" title="projection">S.SPublic_key_hash.Map</span></a>).(<a class="idref" href="Tezos.Environment.html#S.INDEXES_Map.fold"><span class="id" title="projection">S.INDEXES_Map.fold</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">pkh</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">function_parameter</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">pk</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">slots</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">used</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="Tezos.Baking.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">acc</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Alpha_context.html#Operation.check_signature_sync"><span class="id" title="definition">Alpha_context.Operation.check_signature_sync</span></a> <span class="id" title="var">pk</span> <a class="idref" href="Tezos.Baking.html#chain_id"><span class="id" title="variable">chain_id</span></a> <a class="idref" href="Tezos.Baking.html#op"><span class="id" title="variable">op</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Tezos.Baking.html#pkh"><span class="id" title="variable">pkh</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">slots</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">used</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="Tezos.Baking.html#endorsements"><span class="id" title="variable">endorsements</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="axiom">unreachable_gadt_branch</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="select_delegate"><span class="id" title="definition">select_delegate</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">delegate</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">delegate_list</span> : <a class="idref" href="Tezos.Misc.html#lazy_list_t"><span class="id" title="inductive">Misc.lazy_list_t</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.t"><span class="id" title="projection">S.SPublic_key.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">max_priority</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <span class="id" title="var">loop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">acc</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">l</span> : <a class="idref" href="Tezos.Misc.html#lazy_list_t"><span class="id" title="inductive">Misc.lazy_list_t</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.t"><span class="id" title="projection">S.SPublic_key.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>)) {<span class="id" title="keyword">struct</span> <span class="id" title="var">acc</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_gteq"><span class="id" title="projection">Compare.S.op_gteq</span></a>) <a class="idref" href="Tezos.Baking.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Tezos.Baking.html#max_priority"><span class="id" title="variable">max_priority</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a> (<a class="idref" href="Tezos.Environment.html#List.rev"><span class="id" title="axiom">List.rev</span></a> <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="Tezos.Misc.html#LCons"><span class="id" title="constructor">Misc.LCons</span></a> <span class="id" title="var">pk</span> <span class="id" title="var">__t_value</span> := <a class="idref" href="Tezos.Baking.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">acc</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.equal"><span class="id" title="projection">S.SPublic_key_hash.equal</span></a>) <a class="idref" href="Tezos.Baking.html#delegate"><span class="id" title="variable">delegate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.__hash_value"><span class="id" title="projection">S.SPublic_key.__hash_value</span></a>) <span class="id" title="var">pk</span>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Tezos.Baking.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <span class="id" title="var">__t_value</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="Tezos.Baking.html#acc"><span class="id" title="variable">acc</span></a> <a class="idref" href="Tezos.Baking.html#__t_value"><span class="id" title="variable">__t_value</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.succ"><span class="id" title="axiom">Pervasives.succ</span></a> <a class="idref" href="Tezos.Baking.html#n"><span class="id" title="variable">n</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#loop"><span class="id" title="variable">loop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Tezos.Baking.html#delegate_list"><span class="id" title="variable">delegate_list</span></a> 0.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="first_baking_priorities"><span class="id" title="definition">first_baking_priorities</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">op_staroptstar</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))<br/>
&nbsp;&nbsp;: <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key_hash"><span class="id" title="definition">Signature.Public_key_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key_hash.t"><span class="id" title="projection">S.SPublic_key_hash.t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Level.t"><span class="id" title="definition">Alpha_context.Level.t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>))) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">max_priority</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Tezos.Baking.html#op_staroptstar"><span class="id" title="variable">op_staroptstar</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">op_starsthstar</span> ⇒ <span class="id" title="var">op_starsthstar</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 32<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">delegate</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="keyword">level</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">delegate_list</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#baking_priorities"><span class="id" title="definition">baking_priorities</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Baking.html#level"><span class="id" title="variable">level</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#select_delegate"><span class="id" title="definition">select_delegate</span></a> <a class="idref" href="Tezos.Baking.html#delegate"><span class="id" title="variable">delegate</span></a> <a class="idref" href="Tezos.Baking.html#delegate_list"><span class="id" title="variable">delegate_list</span></a> <a class="idref" href="Tezos.Baking.html#max_priority"><span class="id" title="variable">max_priority</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_hash"><span class="id" title="definition">check_hash</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">__hash_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Block_hash"><span class="id" title="axiom">Block_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">stamp_threshold</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Uint64"><span class="id" title="axiom">Compare.Uint64</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__bytes_value</span> := <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Block_hash"><span class="id" title="axiom">Block_hash</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.to_bytes"><span class="id" title="projection">S.HASH.to_bytes</span></a>) <a class="idref" href="Tezos.Baking.html#__hash_value"><span class="id" title="variable">__hash_value</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">word</span> := <a class="idref" href="Tezos.Environment.html#MBytes.get_int64"><span class="id" title="axiom">MBytes.get_int64</span></a> <a class="idref" href="Tezos.Baking.html#__bytes_value"><span class="id" title="variable">__bytes_value</span></a> 0 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Uint64"><span class="id" title="axiom">Compare.Uint64</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lteq"><span class="id" title="projection">Compare.S.op_lteq</span></a>) <a class="idref" href="Tezos.Baking.html#word"><span class="id" title="variable">word</span></a> <a class="idref" href="Tezos.Baking.html#stamp_threshold"><span class="id" title="variable">stamp_threshold</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_header_proof_of_work_stamp"><span class="id" title="definition">check_header_proof_of_work_stamp</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">shell</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.shell_header"><span class="id" title="definition">Block_header.shell_header</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">contents</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.contents"><span class="id" title="definition">Alpha_context.Block_header.contents</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">stamp_threshold</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Uint64"><span class="id" title="axiom">Compare.Uint64</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">__hash_value</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.__hash_value"><span class="id" title="definition">Alpha_context.Block_header.__hash_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">Alpha_context.Block_header.t.shell</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">shell</span></a><a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">Alpha_context.Block_header.t.protocol_data</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">{|</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">Alpha_context.Block_header.protocol_data.contents</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">contents</span></a><a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">Alpha_context.Block_header.protocol_data.signature</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">Signature.zero</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">|}</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#check_hash"><span class="id" title="definition">check_hash</span></a> <a class="idref" href="Tezos.Baking.html#__hash_value"><span class="id" title="variable">__hash_value</span></a> <a class="idref" href="Tezos.Baking.html#stamp_threshold"><span class="id" title="variable">stamp_threshold</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_proof_of_work_stamp"><span class="id" title="definition">check_proof_of_work_stamp</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">block</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.t"><span class="id" title="definition">Alpha_context.Block_header.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">proof_of_work_threshold</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Constants.proof_of_work_threshold"><span class="id" title="definition">Alpha_context.Constants.proof_of_work_threshold</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#check_header_proof_of_work_stamp"><span class="id" title="definition">check_header_proof_of_work_stamp</span></a> <a class="idref" href="Tezos.Baking.html#block"><span class="id" title="variable">block</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.shell"><span class="id" title="projection">Alpha_context.Block_header.t.shell</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#block"><span class="id" title="variable">block</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.protocol_data"><span class="id" title="projection">Alpha_context.Block_header.t.protocol_data</span></a>).(<a class="idref" href="Tezos.Alpha_context.html#Block_header.protocol_data.contents"><span class="id" title="projection">Alpha_context.Block_header.protocol_data.contents</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#proof_of_work_threshold"><span class="id" title="variable">proof_of_work_threshold</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.return_unit"><span class="id" title="axiom">Error_monad.return_unit</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_signature"><span class="id" title="definition">check_signature</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">block</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.t"><span class="id" title="definition">Alpha_context.Block_header.t</span></a>) (<span class="id" title="var">chain_id</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Chain_id"><span class="id" title="axiom">Chain_id</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.HASH.t"><span class="id" title="projection">S.HASH.t</span></a>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">__key_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.t"><span class="id" title="projection">S.SPublic_key.t</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">check_signature</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">__key_value</span> : <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Signature.Public_key"><span class="id" title="definition">Signature.Public_key</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#S.SPublic_key.t"><span class="id" title="projection">S.SPublic_key.t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">function_parameter</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.t"><span class="id" title="definition">Alpha_context.Block_header.t</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">Alpha_context.Block_header.t.shell</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">shell</span></a><a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">Alpha_context.Block_header.t.protocol_data</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">{|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">Alpha_context.Block_header.protocol_data.contents</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">:=</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">contents</span></a><a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">Alpha_context.Block_header.protocol_data.signature</span></a> <a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">signature</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">|}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.Build"><span class="id" title="constructor">|}</span></a> := <a class="idref" href="Tezos.Baking.html#function_parameter"><span class="id" title="variable">function_parameter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">unsigned_header</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Data_encoding.Binary.to_bytes_exn"><span class="id" title="axiom">Data_encoding.Binary.to_bytes_exn</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Block_header.unsigned_encoding"><span class="id" title="definition">Alpha_context.Block_header.unsigned_encoding</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">shell</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">contents</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Signature.check"><span class="id" title="definition">Signature.check</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Tezos.Environment.html#Signature.Block_header"><span class="id" title="constructor">Signature.Block_header</span></a> <a class="idref" href="Tezos.Baking.html#chain_id"><span class="id" title="variable">chain_id</span></a>)) <a class="idref" href="Tezos.Baking.html#__key_value"><span class="id" title="variable">__key_value</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">signature</span> <a class="idref" href="Tezos.Baking.html#unsigned_header"><span class="id" title="variable">unsigned_header</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Baking.html#check_signature"><span class="id" title="variable">check_signature</span></a> <a class="idref" href="Tezos.Baking.html#__key_value"><span class="id" title="variable">__key_value</span></a> <a class="idref" href="Tezos.Baking.html#block"><span class="id" title="variable">block</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.return_unit"><span class="id" title="axiom">Error_monad.return_unit</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="max_fitness_gap"><span class="id" title="definition">max_fitness_gap</span></a> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Set</span>} (<span class="id" title="var">_ctxt</span> : <a class="idref" href="Tezos.Baking.html#A"><span class="id" title="variable">A</span></a>) : <span class="id" title="definition">int64</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Constant&nbsp;of&nbsp;type&nbsp;int64&nbsp;is&nbsp;converted&nbsp;to&nbsp;int&nbsp;*)</span><br/>
&nbsp;&nbsp;1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="check_fitness_gap"><span class="id" title="definition">check_fitness_gap</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">block</span> : <a class="idref" href="Tezos.Alpha_context.html#Block_header.t"><span class="id" title="definition">Alpha_context.Block_header.t</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">current_fitness</span> := <a class="idref" href="Tezos.Alpha_context.html#Fitness.current"><span class="id" title="definition">Alpha_context.Fitness.current</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">announced_fitness</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Fitness.to_int64"><span class="id" title="definition">Alpha_context.Fitness.to_int64</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#block"><span class="id" title="variable">block</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Block_header.t.shell"><span class="id" title="projection">Alpha_context.Block_header.t.shell</span></a>).(<a class="idref" href="Tezos.Environment.html#Block_header.shell_header.fitness"><span class="id" title="projection">Block_header.shell_header.fitness</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">gap</span> := <a class="idref" href="Tezos.Environment.html#Int64.sub"><span class="id" title="axiom">Int64.sub</span></a> <a class="idref" href="Tezos.Baking.html#announced_fitness"><span class="id" title="variable">announced_fitness</span></a> <a class="idref" href="Tezos.Baking.html#current_fitness"><span class="id" title="variable">current_fitness</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_pipepipe"><span class="id" title="axiom">Pervasives.op_pipepipe</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int64"><span class="id" title="axiom">Compare.Int64</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lteq"><span class="id" title="projection">Compare.S.op_lteq</span></a>) <a class="idref" href="Tezos.Baking.html#gap"><span class="id" title="variable">gap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;❌&nbsp;Constant&nbsp;of&nbsp;type&nbsp;int64&nbsp;is&nbsp;converted&nbsp;to&nbsp;int&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0) (<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int64"><span class="id" title="axiom">Compare.Int64</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_lt"><span class="id" title="projection">Compare.S.op_lt</span></a>) (<a class="idref" href="Tezos.Baking.html#max_fitness_gap"><span class="id" title="definition">max_fitness_gap</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a>) <a class="idref" href="Tezos.Baking.html#gap"><span class="id" title="variable">gap</span></a>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.fail"><span class="id" title="axiom">Error_monad.fail</span></a> <span class="id" title="axiom">extensible_type_value</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.return_unit"><span class="id" title="axiom">Error_monad.return_unit</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="last_of_a_cycle"><span class="id" title="definition">last_of_a_cycle</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="Tezos.Alpha_context.html#Level.t"><span class="id" title="definition">Alpha_context.Level.t</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int32"><span class="id" title="axiom">Compare.Int32</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_eq"><span class="id" title="projection">Compare.S.op_eq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Int32.succ"><span class="id" title="axiom">Int32.succ</span></a> <a class="idref" href="Tezos.Baking.html#l"><span class="id" title="variable">l</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle_position"><span class="id" title="projection">Alpha_context.Level.t.cycle_position</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Constants.blocks_per_cycle"><span class="id" title="definition">Alpha_context.Constants.blocks_per_cycle</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="dawn_of_a_new_cycle"><span class="id" title="definition">dawn_of_a_new_cycle</span></a> (<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Tezos.Alpha_context.html#Cycle.t"><span class="id" title="definition">Alpha_context.Cycle.t</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">level</span> := <a class="idref" href="Tezos.Alpha_context.html#Level.current"><span class="id" title="definition">Alpha_context.Level.current</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Tezos.Baking.html#last_of_a_cycle"><span class="id" title="definition">last_of_a_cycle</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Baking.html#level"><span class="id" title="variable">level</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.return_some"><span class="id" title="axiom">Error_monad.return_some</span></a> <a class="idref" href="Tezos.Baking.html#level"><span class="id" title="variable">level</span></a>.(<a class="idref" href="Tezos.Alpha_context.html#Level.t.cycle"><span class="id" title="projection">Alpha_context.Level.t.cycle</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.return_none"><span class="id" title="axiom">Error_monad.return_none</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="minimum_allowed_endorsements"><span class="id" title="definition">minimum_allowed_endorsements</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">block_delay</span> : <a class="idref" href="Tezos.Alpha_context.html#Period.period"><span class="id" title="definition">Alpha_context.Period.period</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.t"><span class="id" title="projection">Compare.S.t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">minimum</span> := <a class="idref" href="Tezos.Alpha_context.html#Constants.initial_endorsers"><span class="id" title="definition">Alpha_context.Constants.initial_endorsers</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delay_per_missing_endorsement</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Int64.to_int"><span class="id" title="axiom">Int64.to_int</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Period.to_seconds"><span class="id" title="definition">Alpha_context.Period.to_seconds</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Alpha_context.html#Constants.delay_per_missing_endorsement"><span class="id" title="definition">Alpha_context.Constants.delay_per_missing_endorsement</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">reduced_time_constraint</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delay</span> := <a class="idref" href="Tezos.Environment.html#Int64.to_int"><span class="id" title="axiom">Int64.to_int</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Period.to_seconds"><span class="id" title="definition">Alpha_context.Period.to_seconds</span></a> <a class="idref" href="Tezos.Baking.html#block_delay"><span class="id" title="variable">block_delay</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.op_eq"><span class="id" title="projection">Compare.S.op_eq</span></a>) <a class="idref" href="Tezos.Baking.html#delay_per_missing_endorsement"><span class="id" title="variable">delay_per_missing_endorsement</span></a> 0 <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#delay"><span class="id" title="variable">delay</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Pervasives.op_div"><span class="id" title="axiom">Pervasives.op_div</span></a> <a class="idref" href="Tezos.Baking.html#delay"><span class="id" title="variable">delay</span></a> <a class="idref" href="Tezos.Baking.html#delay_per_missing_endorsement"><span class="id" title="variable">delay_per_missing_endorsement</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.max"><span class="id" title="projection">Compare.S.max</span></a>) 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> <a class="idref" href="Tezos.Baking.html#minimum"><span class="id" title="variable">minimum</span></a> <a class="idref" href="Tezos.Baking.html#reduced_time_constraint"><span class="id" title="variable">reduced_time_constraint</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="minimal_valid_time"><span class="id" title="definition">minimal_valid_time</span></a><br/>
&nbsp;&nbsp;(<span class="id" title="var">ctxt</span> : <a class="idref" href="Tezos.Alpha_context.html#context"><span class="id" title="definition">Alpha_context.context</span></a>) (<span class="id" title="var">priority</span> : <span class="id" title="definition">int</span>) (<span class="id" title="var">endorsing_power</span> : <span class="id" title="definition">int</span>)<br/>
&nbsp;&nbsp;: <a class="idref" href="Tezos.Environment.html#Lwt.t"><span class="id" title="definition">Lwt.t</span></a> (<a class="idref" href="Tezos.Environment.html#Error_monad.tzresult"><span class="id" title="definition">Error_monad.tzresult</span></a> <a class="idref" href="Tezos.Environment.html#Time.t"><span class="id" title="axiom">Time.t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">predecessor_timestamp</span> := <a class="idref" href="Tezos.Alpha_context.html#Timestamp.current"><span class="id" title="definition">Alpha_context.Timestamp.current</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">let</span></a><a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">=?</span></a> <span class="id" title="var">minimal_time</span> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Tezos.Baking.html#minimal_time"><span class="id" title="definition">minimal_time</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <a class="idref" href="Tezos.Baking.html#priority"><span class="id" title="variable">priority</span></a> <a class="idref" href="Tezos.Baking.html#predecessor_timestamp"><span class="id" title="variable">predecessor_timestamp</span></a> <a class="idref" href="Tezos.Environment.html#fe7ed8135c3e89d56eff82d8ee27a32f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">minimal_required_endorsements</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Constants.initial_endorsers"><span class="id" title="definition">Alpha_context.Constants.initial_endorsers</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">delay_per_missing_endorsement</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Constants.delay_per_missing_endorsement"><span class="id" title="definition">Alpha_context.Constants.delay_per_missing_endorsement</span></a> <a class="idref" href="Tezos.Baking.html#ctxt"><span class="id" title="variable">ctxt</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">missing_endorsements</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(|</span><a class="idref" href="Tezos.Environment.html#Compare.Int"><span class="id" title="axiom">Compare.Int</span></a><span class="id" title="notation">|)</span>.(<a class="idref" href="Tezos.Environment.html#Compare.S.max"><span class="id" title="projection">Compare.S.max</span></a>) 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Pervasives.op_minus"><span class="id" title="axiom">Pervasives.op_minus</span></a> <a class="idref" href="Tezos.Baking.html#minimal_required_endorsements"><span class="id" title="variable">minimal_required_endorsements</span></a> <a class="idref" href="Tezos.Baking.html#endorsing_power"><span class="id" title="variable">endorsing_power</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Alpha_context.html#Period.mult"><span class="id" title="definition">Alpha_context.Period.mult</span></a> (<a class="idref" href="Tezos.Environment.html#Int32.of_int"><span class="id" title="axiom">Int32.of_int</span></a> <a class="idref" href="Tezos.Baking.html#missing_endorsements"><span class="id" title="variable">missing_endorsements</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Baking.html#delay_per_missing_endorsement"><span class="id" title="variable">delay_per_missing_endorsement</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Ok"><span class="id" title="constructor">Pervasives.Ok</span></a> <span class="id" title="var">delay</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Error_monad.__return"><span class="id" title="definition">Error_monad.__return</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Tezos.Environment.html#Time.add"><span class="id" title="axiom">Time.add</span></a> <a class="idref" href="Tezos.Baking.html#minimal_time"><span class="id" title="variable">minimal_time</span></a> (<a class="idref" href="Tezos.Alpha_context.html#Period.to_seconds"><span class="id" title="definition">Alpha_context.Period.to_seconds</span></a> <span class="id" title="var">delay</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">__error_value</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Tezos.Environment.html#Lwt.__return"><span class="id" title="definition">Lwt.__return</span></a> (<a class="idref" href="Tezos.Environment.html#Pervasives.Error"><span class="id" title="constructor">Pervasives.Error</span></a> <span class="id" title="var">__error_value</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>