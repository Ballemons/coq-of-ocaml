<%= header("../", project_name) %>
<div class="row center-block not-full-width">
  <div class="col-md-12">
    <%= project_intro %>
    <p>We show the original source code on the left and the imported Coq code on the right. The imported code does not compile. This is due to either various incompleteness in our tool, or to side-effects in the source code. Write at <code>web [at] clarus [dot] me</code> for more information. Work currently made at <a href="https://www.nomadic-labs.com/">Nomadic Labs</a>.</p>
  </div>
</div>
<hr />
<div class="row">
  <% column_size = conversions.size / 3 %>
  <% column_size += 1 if conversions.size % 3 != 0 %>
  <% 3.times do |i| %>
  <div class="col-md-4">
    <ul>
      <% for ocaml_name, nb_errors, _, _, _, _, _ in conversions[i * column_size..(i + 1) * column_size - 1] do %>
      <li><a href="#<%= u(ocaml_name) %>"><%= h(ocaml_name) %></a>&nbsp;<%= nb_errors == 0 ? "<span class=\"label label-success\">âœ“</span>" : "<span class=\"label label-danger\">#{nb_errors}</span>" %></li>
      <% end %>
    </ul>
  </div>
  <% end %>
</div>
<% for ocaml_name, nb_errors, global_errors, ocaml_content, coq_name, coq_content in conversions do %>
<hr />
<div class="row conversion-row" id="<%= u(ocaml_name) %>">
  <div class="col-md-6">
    <a href="#<%= u(ocaml_name) %>"><code><%= h(ocaml_name) %></code></a>&nbsp;<span class="label label-<%= nb_errors == 0 ? "success" : "danger" %>"><%= nb_errors == 0 ? "success" : "#{nb_errors} error#{nb_errors != 1 ? "s" : ""}" %></span>
    <% if global_errors.size != 0 then %>
      <div class="alert alert-danger global-errors" role="alert">
        <ul>
          <% for global_error in global_errors do %>
            <li><%= h(global_error) %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    <pre><%= ocaml_content %></pre>
  </div>
  <div class="col-md-6">
    <a href="#<%= u(ocaml_name) %>"><code><%= h(coq_name) %></code></a>
    <pre><%= h(coq_content) %></pre>
  </div>
</div>
<% end %>
<%= footer("../") %>
